"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6012],{6012:(Z,_,s)=>{s.r(_),s.d(_,{CourseGroupPageModule:()=>W});var p=s(6814),h=s(6223),f=s(3582),d=s(8520),l=s(5861),x=s(4036),u=s(6676),t=s(2029),b=s(2234),v=s(5693),y=s(3271),T=s(2425),A=s(7364),C=s(3911);function S(e,i){if(1&e&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.courseBookings.name," ")}}function w(e,i){1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"collective")," "))}function I(e,i){1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"private")," "))}function k(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.courseSport.name," ")}}function G(e,i){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,w,3,3,"ng-container",15),t.YNc(2,I,3,3,"ng-container",15),t.YNc(3,k,2,1,"ng-container",15),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",1==o.courseBookings.course_type),t.xp6(1),t.Q6J("ngIf",2==o.courseBookings.course_type),t.xp6(1),t.Q6J("ngIf",o.courseSport&&o.sports.length)}}function Y(e,i){1&e&&t._UZ(0,"img",32)}function B(e,i){if(1&e&&t._UZ(0,"img",33),2&e){const o=t.oxw(2);t.Q6J("src",o.monitorSubgroup.monitor.image?o.monitorSubgroup.monitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH)}}function U(e,i){if(1&e&&(t.TgZ(0,"div",34),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.AsE("",o.monitorSubgroup.monitor.first_name," ",o.monitorSubgroup.monitor.last_name,"")}}function D(e,i){1&e&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"no_monitor")))}const M=function(e){return{background:e}};function z(e,i){if(1&e&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,M,o.monitorSubgroup.degree_data.color)),t.xp6(1),t.hij(" ",o.monitorSubgroup.degree_data.annotation," ")}}function J(e,i){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.AsE(" ",o.monitorSubgroup.degree_data.annotation,"-",o.monitorSubgroup.subgroup_order," ")}}function Q(e,i){if(1&e&&(t.TgZ(0,"div",16)(1,"div",17),t.YNc(2,Y,1,0,"img",18),t.YNc(3,B,1,1,"img",19),t.qZA(),t.TgZ(4,"div",20)(5,"div",21)(6,"div",22),t.YNc(7,U,2,2,"div",23),t.YNc(8,D,3,3,"div",23),t.YNc(9,z,2,4,"div",24),t.qZA(),t.TgZ(10,"div",25)(11,"span",26),t._uU(12),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.YNc(15,J,2,2,"div",27),t.qZA(),t.TgZ(16,"div",28)(17,"div",29),t._UZ(18,"img",30),t.TgZ(19,"span",26),t._uU(20),t.qZA()(),t.TgZ(21,"div",29),t._UZ(22,"img",31),t.TgZ(23,"span",26),t._uU(24),t.qZA()()()()()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",!o.monitorSubgroup.monitor),t.xp6(1),t.Q6J("ngIf",o.monitorSubgroup.monitor),t.xp6(4),t.Q6J("ngIf",o.monitorSubgroup.monitor),t.xp6(1),t.Q6J("ngIf",!o.monitorSubgroup.monitor),t.xp6(1),t.Q6J("ngIf",o.monitorSubgroup.degree_data&&o.degrees.length),t.xp6(3),t.Oqu(o.monitorSubgroup.monitor_id==o.monitorData.id?t.lcZ(13,11,"you"):t.lcZ(14,13,"teacher")),t.xp6(3),t.Q6J("ngIf",o.monitorSubgroup.degree_data&&o.degrees.length),t.xp6(5),t.AsE("",o.monitorSubgroup.bookings_number,"/",o.monitorSubgroup.max_participants,""),t.xp6(4),t.AsE("",o.courseDateIndex+1,"/",o.courseBookings.course_dates.length,"")}}function q(e,i){1&e&&t._UZ(0,"img",32)}function N(e,i){if(1&e&&t._UZ(0,"img",33),2&e){const o=t.oxw().$implicit;t.Q6J("src",o.monitor.image?o.monitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH)}}function E(e,i){if(1&e&&(t.TgZ(0,"div",34),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.AsE("",o.monitor.first_name," ",o.monitor.last_name,"")}}function j(e,i){1&e&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"no_monitor")))}function L(e,i){if(1&e&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.Q6J("ngStyle",t.VKq(2,M,o.degree_data.color)),t.xp6(1),t.hij(" ",o.degree_data.annotation," ")}}function F(e,i){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.AsE(" ",o.degree_data.annotation,"-",o.subgroup_order," ")}}function K(e,i){if(1&e&&(t.TgZ(0,"div",38)(1,"div",17),t.YNc(2,q,1,0,"img",18),t.YNc(3,N,1,1,"img",19),t.qZA(),t.TgZ(4,"div",20)(5,"div",21)(6,"div",22),t.YNc(7,E,2,2,"div",23),t.YNc(8,j,3,3,"div",23),t.YNc(9,L,2,4,"div",24),t.qZA(),t.TgZ(10,"div",25)(11,"span",26),t._uU(12),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.YNc(15,F,2,2,"div",27),t.qZA(),t.TgZ(16,"div",28)(17,"div",29),t._UZ(18,"img",30),t.TgZ(19,"span",26),t._uU(20),t.qZA()(),t.TgZ(21,"div",29),t._UZ(22,"img",31),t.TgZ(23,"span",26),t._uU(24),t.qZA()()()()()()),2&e){const o=i.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!o.monitor),t.xp6(1),t.Q6J("ngIf",o.monitor),t.xp6(4),t.Q6J("ngIf",o.monitor),t.xp6(1),t.Q6J("ngIf",!o.monitor),t.xp6(1),t.Q6J("ngIf",o.degree_data&&n.degrees.length),t.xp6(3),t.Oqu(o.monitor_id==n.monitorData.id?t.lcZ(13,11,"you"):t.lcZ(14,13,"teacher")),t.xp6(3),t.Q6J("ngIf",o.degree_data&&n.degrees.length),t.xp6(5),t.AsE("",o.bookings_number,"/",o.max_participants,""),t.xp6(4),t.AsE("",n.courseDateIndex+1,"/",n.courseBookings.course_dates.length,"")}}function R(e,i){if(1&e&&(t.TgZ(0,"div",10),t.YNc(1,K,25,15,"div",37),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.restSubgroups)}}const V=[{path:"",component:(()=>{var e;class i{constructor(n,c,r,a,g,m,P,O){this.router=n,this.activatedRoute=c,this.monitorDataService=r,this.sharedDataService=a,this.teachService=g,this.toastr=m,this.spinnerService=P,this.translate=O,this.degrees=[],this.sports=[]}ngOnInit(){var n=this;return(0,l.Z)(function*(){n.subscription=n.monitorDataService.getMonitorData().subscribe(function(){var c=(0,l.Z)(function*(r){if(r){n.monitorData=r;try{n.degrees=yield(0,x.z)(n.sharedDataService.fetchDegrees(n.monitorData.active_school)),n.sports=yield(0,x.z)(n.sharedDataService.fetchSports(n.monitorData.active_school))}catch(a){console.error("Error fetching data:",a),n.toastr.error(n.translate.instant("toast.error_loading_data"))}n.activatedRoute.params.subscribe(function(){var a=(0,l.Z)(function*(g){n.bookingId=g.id,n.dateBooking=g.date,n.courseId=+g.course,n.hourStart=g.hour,n.groupId=+g.group,n.subgroupId=+g.subgroup,n.bookingId&&n.dateBooking&&n.courseId&&n.hourStart&&n.groupId&&n.subgroupId?(n.spinnerService.show(),n.loadBookings()):n.goTo("home")});return function(g){return a.apply(this,arguments)}}())}});return function(r){return c.apply(this,arguments)}}())})()}loadBookings(){this.teachService.getData("teach/courses",this.courseId).subscribe(n=>{this.courseBookings=n.data,this.courseBookings.course_dates.sort((r,a)=>new Date(r.date).getTime()-new Date(a.date).getTime()),this.courseSport=this.sports.find(r=>r.id===this.courseBookings.sport_id)||this.sports[0],this.subgroupBookings=this.courseBookings.booking_users.reduce((r,a)=>(r[a.course_subgroup_id]?r[a.course_subgroup_id]+=1:r[a.course_subgroup_id]=1,r),{});const c=this.courseBookings.course_dates.find((r,a)=>r.date.split("T")[0]===this.dateBooking&&r.hour_start===this.hourStart&&(this.courseDateIndex=a,!0));if(c){const r=[];c.course_groups.forEach(a=>{a.course_subgroups.forEach((g,m)=>{const P=this.degrees.find(X=>X.id===g.degree_id)||this.degrees[0],O=this.subgroupBookings[g.id]||0;r.push({...g,subgroup_order:m+1,degree_data:P,bookings_number:O})})}),this.monitorSubgroup=r.find(a=>a.id===this.subgroupId),this.restSubgroups=r.filter(a=>a.id!==this.subgroupId)}this.spinnerService.hide()},n=>{console.error("There was an error!",n),this.spinnerService.hide()})}getBirthYears(n){const c=u(n);return u().diff(c,"years")}getDateFormat(n){return u(n).format("DD-MM-YYYY")}isDateBeforeOrEqualToToday(n){const c=u(n).startOf("day"),r=u().startOf("day");return c.isSameOrBefore(r)}goTo(...n){this.router.navigate(n)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(e=i).\u0275fac=function(n){return new(n||e)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(b.q),t.Y36(v.g),t.Y36(y.b),t.Y36(T._W),t.Y36(A.V),t.Y36(C.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-course-group"]],decls:23,vars:13,consts:[[1,"content-size","dark-background","status-bar-overlap"],[1,"padding-wrapper"],[1,"header-content","mb-8"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],["class","header-top-title",4,"ngIf"],["class","montserrat color-light header-top-subtitle",4,"ngIf"],[1,"menu-section-content","mb-24"],[1,"menu-section-title"],[1,"menu-section-content","mt-24","mb-12"],[1,"menu-section-title-b","color-light","uppercase"],[1,"member-list"],["class","pb-8 mb-8 member-list-item no-border",4,"ngIf"],["class","member-list",4,"ngIf"],[1,"header-top-title"],[1,"montserrat","color-light","header-top-subtitle"],[4,"ngIf"],[1,"pb-8","mb-8","member-list-item","no-border"],[1,"member-list-item-img"],["src","assets/icon/icons-outline-default-avatar.svg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"member-item-flex"],[1,"member-item-content"],[1,"member-item-title"],["class","montserrat",4,"ngIf"],["class","box-selector-level color-light",3,"ngStyle",4,"ngIf"],[1,"member-item-subtitle"],[1,"montserrat","color-light"],["class","box-selector-subgroup",4,"ngIf"],[1,"member-item-data"],[1,"task-content-icon"],["src","assets/icon/icon-user-tick.png"],["src","assets/icon/icon-calendar-tick.png"],["src","assets/icon/icons-outline-default-avatar.svg"],[3,"src"],[1,"montserrat"],[1,"box-selector-level","color-light",3,"ngStyle"],[1,"box-selector-subgroup"],["class","pb-8 mb-8 member-list-item",4,"ngFor","ngForOf"],[1,"pb-8","mb-8","member-list-item"]],template:function(n,c){1&n&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),t.NdJ("click",function(){return c.goTo("course-detail",c.bookingId,c.dateBooking)}),t.qZA(),t.YNc(5,S,2,1,"div",4),t.qZA(),t.YNc(6,G,4,3,"div",5),t.qZA(),t.TgZ(7,"div",1)(8,"div",6)(9,"div",7),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"div",8)(13,"div",9),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",10),t.YNc(17,Q,25,15,"div",11),t.qZA(),t.TgZ(18,"div",8)(19,"div",9),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.YNc(22,R,2,1,"div",12),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngIf",c.courseBookings),t.xp6(1),t.Q6J("ngIf",c.courseBookings),t.xp6(4),t.Oqu(t.lcZ(11,7,"groups")),t.xp6(4),t.Oqu(t.lcZ(15,9,"my_group")),t.xp6(3),t.Q6J("ngIf",c.monitorSubgroup),t.xp6(3),t.Oqu(t.lcZ(21,11,"other_groups")),t.xp6(2),t.Q6J("ngIf",c.restSubgroups&&c.restSubgroups.length))},dependencies:[p.sg,p.O5,p.PC,f.W2,C.X$],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-top-subtitle[_ngcontent-%COMP%]{font-size:14px;display:block;text-align:center}.opacity-light[_ngcontent-%COMP%]{opacity:.6}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}.box-radius[_ngcontent-%COMP%]{border-radius:8px}.content-flex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.content-flex-top-img[_ngcontent-%COMP%]{width:44px}.content-flex-top-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.content-flex-top-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:22px;font-weight:600}.content-flex-top-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.menu-section-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.menu-section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.menu-section-title-b[_ngcontent-%COMP%]{font-size:13px}.menu-section-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;background-color:var(--ion-color-primary);padding:5px 8px;border-radius:40px;font-size:12px;font-weight:500;display:flex;align-items:center;justify-content:center}.menu-section-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.menu-section-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.menu-section-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.list-box-selector-b[_ngcontent-%COMP%]{width:100%;display:flex;padding:8px 0;gap:12px;justify-content:space-between}.background-grey-translucent[_ngcontent-%COMP%]{background:rgba(65,69,78,.4)}.box-selector-type[_ngcontent-%COMP%]{display:flex;padding:12px 6px;flex-direction:column;gap:8px;align-items:center;border-radius:8px;justify-content:flex-start;text-align:center}.box-selector-type-red[_ngcontent-%COMP%]{color:#faafaf;background:#613136}.box-selector-type[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-selector-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.box-selector-type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.member-list[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:column}.member-list-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;width:100%;border-bottom:1px solid #444953}.member-list-item-img[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;border-radius:48px;position:relative}.member-list-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.member-item-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.member-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;width:100%}.member-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.member-item-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.member-item-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.member-item-subtitle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;display:flex;align-items:center;gap:2px}.member-item-bullet[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:6px;background:#e9484a}.member-item-icon[_ngcontent-%COMP%]{width:20px}.no-border[_ngcontent-%COMP%]{border:none!important}.box-selector-level[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px;border-radius:20px}.box-selector-subgroup[_ngcontent-%COMP%]{font-size:12px;color:#fff}.member-item-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task-content-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.task-content-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.task-content-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}"]}),i})()}];let $=(()=>{var e;class i{}return(e=i).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(V),d.Bz]}),i})();var H=s(822);let W=(()=>{var e;class i{}return(e=i).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,h.u5,f.Pc,$,H.K,C.aw]}),i})()},4036:(Z,_,s)=>{s.d(_,{z:()=>f});var p=s(6973),h=s(305);function f(d,l){const x="object"==typeof l;return new Promise((u,t)=>{const b=new h.Hp({next:v=>{u(v),b.unsubscribe()},error:t,complete:()=>{x?u(l.defaultValue):t(new p.K)}});d.subscribe(b)})}}}]);