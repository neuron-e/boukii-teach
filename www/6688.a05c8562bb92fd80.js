"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(M,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>C});var h=r(177),l=r(9417),u=r(8974),g=r(3314),d=r(467),c=r(4843),t=r(6996),m=r(4387),f=r(5663),v=r(918),P=r(5794),x=r(8551),_=r(1547);function w(o,s){if(1&o){const i=t.RV6();t.j41(0,"div")(1,"div",6),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",7)(5,"div",8),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"div",9),t.nrm(9,"img",10),t.j41(10,"input",11),t.bIt("ngModelChange",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.email=n)}),t.k0s()(),t.j41(11,"div",8),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"div",9),t.nrm(15,"img",12),t.j41(16,"input",13),t.bIt("ngModelChange",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.password=n)}),t.k0s(),t.j41(17,"img",14),t.bIt("click",function(){t.eBV(i);const n=t.XpG();return t.Njj(n.togglePassword())}),t.k0s()()(),t.j41(18,"button",15),t.bIt("click",function(){t.eBV(i);const n=t.XpG();return t.Njj(n.onLogin())}),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",16),t.bIt("click",function(){t.eBV(i);const n=t.XpG();return t.Njj(n.showLogin=!1)}),t.EFF(22),t.nI1(23,"translate"),t.k0s()()}if(2&o){const i=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,9,"login")," "),t.R7$(4),t.SpI(" ",t.bMT(7,11,"email")," "),t.R7$(4),t.Y8G("ngModel",i.email),t.R7$(2),t.SpI(" ",t.bMT(13,13,"password")," "),t.R7$(4),t.Y8G("ngModel",i.password)("type",i.showPassword?"text":"password"),t.R7$(2),t.Y8G("disabled",!i.email||!i.password),t.R7$(1),t.SpI(" ",t.bMT(20,15,"login")," "),t.R7$(3),t.SpI(" ",t.bMT(23,17,"forgot_password")," ")}}function L(o,s){if(1&o){const i=t.RV6();t.j41(0,"div")(1,"div",17),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div")(5,"div",8),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"div",9),t.nrm(9,"img",10),t.j41(10,"input",11),t.bIt("ngModelChange",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.emailRecover=n)}),t.k0s()()(),t.j41(11,"button",15),t.bIt("click",function(){t.eBV(i);const n=t.XpG();return t.Njj(n.onRecover())}),t.EFF(12),t.nI1(13,"translate"),t.k0s()()}if(2&o){const i=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,5,"recover_password")," "),t.R7$(4),t.SpI(" ",t.bMT(7,7,"email")," "),t.R7$(4),t.Y8G("ngModel",i.emailRecover),t.R7$(1),t.Y8G("disabled",!i.emailRecover),t.R7$(1),t.SpI(" ",t.bMT(13,9,"reset_password")," ")}}const I=[{path:"",component:(()=>{var o;class s{constructor(e,n,a,b,k,S,y){this.router=e,this.teachService=n,this.monitorDataService=a,this.sharedDataService=b,this.toastr=k,this.spinnerService=S,this.translate=y,this.showLogin=!0,this.showPassword=!1}ngOnInit(){}togglePassword(){this.showPassword=!this.showPassword}onLogin(){var e=this;return(0,d.A)(function*(){e.spinnerService.show(),e.teachService.login(e.email,e.password).subscribe(function(){var n=(0,d.A)(function*(a){e.toastr.success(e.translate.instant("toast.connected_correctly")),localStorage.setItem("token",a.data.token),localStorage.setItem("monitorId",a.data.user.monitors[0].id),e.monitorDataService.fetchMonitorData(a.data.user.monitors[0].id);try{yield(0,c._)(e.sharedDataService.fetchDegrees(a.data.user.monitors[0].active_school)),yield(0,c._)(e.sharedDataService.fetchSports(a.data.user.monitors[0].active_school)),yield(0,c._)(e.sharedDataService.fetchLanguages()),yield(0,c._)(e.sharedDataService.fetchStations()),yield(0,c._)(e.sharedDataService.fetchSchools())}catch(b){console.error("Error fetching data:",b),e.toastr.error(e.translate.instant("toast.error_loading_data"))}e.spinnerService.hide(),e.goTo("home"),e.email="",e.password=""});return function(a){return n.apply(this,arguments)}}(),n=>{e.spinnerService.hide(),console.error("Login failed",n),e.toastr.error(e.translate.instant("toast.identification_error"))})})()}onRecover(){this.emailRecover&&(this.spinnerService.show(),(0,c._)(this.teachService.postData("forgot-password",{email:this.emailRecover,type:"monitor"})).then(n=>{this.spinnerService.hide(),this.toastr.success(this.translate.instant("toast.recover_correctly")),this.emailRecover="",this.showLogin=!0}).catch(n=>{console.error("Error during recover:",n),this.spinnerService.hide(),this.toastr.error(this.translate.instant("toast.error"))}))}goTo(...e){this.router.navigate(e)}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(g.Ix),t.rXU(m.R),t.rXU(f.O),t.rXU(v.H),t.rXU(P.tw),t.rXU(x.D),t.rXU(_.c$))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"content-wrapper","content-background-image","status-bar-overlap-wrapper"],[1,"header-content"],[1,"header-back","background-color-dark","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg",1,"header-back-icon"],["src","assets/images/boukii-logo.png",1,"header-logo"],[4,"ngIf"],[1,"content-title"],[1,"pb-24"],[1,"input-label","color-light","montserrat"],[1,"input-form-icon","background-color-dark"],["src","assets/icon/icon-mail.png"],["type","text",1,"montserrat",3,"ngModel","ngModelChange"],["src","assets/icon/icon-password.png"],[1,"montserrat",3,"ngModel","type","ngModelChange"],["src","assets/icon/icon-eye.png",1,"cursor-pointer",3,"click"],[1,"content-button","btn-back-primary","montserrat",3,"disabled","click"],[1,"content-footer","cursor-pointer","montserrat",3,"click"],[1,"content-title-b"]],template:function(e,n){1&e&&(t.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),t.bIt("click",function(){return n.showLogin?n.goTo("start"):n.showLogin=!0}),t.nrm(4,"img",3),t.k0s(),t.nrm(5,"img",4),t.k0s(),t.DNE(6,w,24,19,"div",5),t.DNE(7,L,14,11,"div",5),t.k0s()()),2&e&&(t.R7$(6),t.Y8G("ngIf",n.showLogin),t.R7$(1),t.Y8G("ngIf",!n.showLogin))},dependencies:[h.bT,l.me,l.BC,l.vS,u.W9,_.D9],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-logo[_ngcontent-%COMP%]{width:100px}.header-back[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:34px;height:34px;border-radius:12px;display:flex;align-items:center;justify-content:center}.header-back-icon[_ngcontent-%COMP%]{width:22px}.content-title[_ngcontent-%COMP%]{color:#fff;text-align:left;font-size:24px;font-weight:600;line-height:1.2;margin-bottom:24px}.content-title-b[_ngcontent-%COMP%]{color:#fff;text-align:left;font-size:21px;font-weight:600;line-height:1.2;margin-bottom:12px}.content-subtitle[_ngcontent-%COMP%]{font-size:14px;margin-bottom:24px}.input-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.input-form-icon[_ngcontent-%COMP%]{width:100%;height:48px;border-radius:12px;color:#fff;padding:0 16px;display:flex;align-items:center;gap:9px;margin-bottom:24px}.input-form-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;position:relative;top:-1px}.input-form-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;font-size:15px;width:100%;border:none;background:transparent;outline:0}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.content-footer[_ngcontent-%COMP%]{text-align:center;margin-top:18px;font-size:15px}button[disabled][_ngcontent-%COMP%]{opacity:.4;pointer-events:none}"]}),s})()}];let j=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[g.iI.forChild(I),g.iI]}),s})(),C=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[h.MD,l.YN,u.bv,j,_.h]}),s})()},4843:(M,p,r)=>{r.d(p,{_:()=>u});var h=r(9350),l=r(7707);function u(g,d){const c="object"==typeof d;return new Promise((t,m)=>{const f=new l.Ms({next:v=>{t(v),f.unsubscribe()},error:m,complete:()=>{c?t(d.defaultValue):m(new h.G)}});g.subscribe(f)})}}}]);