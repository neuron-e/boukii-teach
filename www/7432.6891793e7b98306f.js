"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7432],{7432:(y,m,n)=>{n.r(m),n.d(m,{ClientsPageModule:()=>$});var g=n(177),l=n(9417),h=n(8974),d=n(3314),u=n(467),C=n(4843),p=n(7586),f=n(9065),x=n(9569),e=n(6996),O=n(4621),S=n(5663),T=n(918),w=n(4387),I=n(5794),D=n(8551),b=n(1547),j=n(5473);function F(i,c){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const r=e.XpG().$implicit,t=e.XpG();e.R7$(1),e.SpI(" ",t.getLanguageById(r.language1_id)," \xb7 ")}}function R(i,c){if(1&i){const r=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const s=e.eBV(r).$implicit,a=e.XpG();return e.Njj(a.goTo("client-detail",s.id))}),e.j41(1,"div",11),e.nrm(2,"img",12),e.k0s(),e.j41(3,"div",13)(4,"div",14)(5,"div",15),e.EFF(6),e.k0s()(),e.j41(7,"div",16),e.DNE(8,F,2,1,"ng-container",17),e.EFF(9),e.nI1(10,"translate"),e.k0s()()()}if(2&i){const r=c.$implicit,t=e.XpG();e.R7$(2),e.Y8G("src",r.image?r.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(4),e.Lme("",r.first_name," ",r.last_name,""),e.R7$(2),e.Y8G("ngIf",r.language1_id),e.R7$(1),e.E5c(" ",t.getCountryById(r.country)," \xb7 ",r.birth_years," ",e.bMT(10,7,"years")," ")}}const E=[{path:"",component:(()=>{var i;class c{constructor(t,o,s,a,v,M,P,B){this.router=t,this.menuService=o,this.monitorDataService=s,this.sharedDataService=a,this.teachService=v,this.toastr=M,this.spinnerService=P,this.translate=B,this.searchTerm="",this.showClients=!0,this.showSchools=!1,this.languages=[]}ngOnInit(){var t=this;return(0,u.A)(function*(){t.subscription=t.monitorDataService.getMonitorData().subscribe(function(){var o=(0,u.A)(function*(s){if(s){t.spinnerService.show(),t.monitorData=s;try{t.languages=yield(0,C._)(t.sharedDataService.fetchLanguages())}catch(a){console.error("Error fetching data:",a),t.toastr.error(t.translate.instant("toast.error_loading_data"))}t.teachService.getData("teach/clients").subscribe(a=>{a.forEach(v=>{const M=p(v.birth_date),P=p().diff(M,"years");v.birth_years=P}),t.clientsMonitor=a,t.filteredClients=a,t.spinnerService.hide()},a=>{t.spinnerService.hide(),console.error("There was an error!",a)})}});return function(s){return o.apply(this,arguments)}}())})()}getLanguageById(t){const o=this.languages.find(s=>s.id===t);return o?o.code.toUpperCase():""}getCountryById(t){const o=f.k.find(s=>s.id===t);return o?o.iso:"Aucun"}getProvinceById(t){const o=x.R.find(s=>s.id===t);return o?o.name:"Aucune"}searchClients(){if(this.searchTerm){const t=this.normalizeString(this.searchTerm);this.filteredClients=this.clientsMonitor.filter(o=>this.normalizeString(o.first_name).includes(t)||this.normalizeString(o.last_name).includes(t))}else this.filteredClients=this.clientsMonitor}normalizeString(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}toggleMenu(){this.menuService.toggleMenu()}goTo(...t){this.router.navigate(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.rXU(d.Ix),e.rXU(O.$),e.rXU(S.O),e.rXU(T.H),e.rXU(w.R),e.rXU(I.tw),e.rXU(D.D),e.rXU(b.c$))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-clients"]],decls:15,vars:8,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-12"],[1,"header-section-title"],["src","assets/icon/icon-clients-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],["type","text",1,"montserrat","mt-12","header-input-search",3,"ngModel","placeholder","ngModelChange","keyup"],[1,"padding-wrapper"],["class","background-color-dark mb-24 box-message cursor-pointer",3,"click",4,"ngFor","ngForOf"],["section","clients"],[1,"background-color-dark","mb-24","box-message","cursor-pointer",3,"click"],[1,"box-message-img-wrapper"],[1,"box-message-img",3,"src"],[1,"box-message-content"],[1,"box-message-name-flex"],[1,"montserrat","box-message-name"],[1,"montserrat","color-light","box-message-text"],[4,"ngIf"]],template:function(t,o){1&t&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e.nrm(5,"img",4),e.j41(6,"div"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"img",5),e.bIt("click",function(){return o.toggleMenu()}),e.k0s()(),e.j41(10,"input",6),e.bIt("ngModelChange",function(a){return o.searchTerm=a})("keyup",function(){return o.searchClients()}),e.nI1(11,"translate"),e.k0s()(),e.j41(12,"div",7),e.DNE(13,R,11,9,"div",8),e.k0s()()(),e.nrm(14,"app-footer",9)),2&t&&(e.R7$(7),e.JRh(e.bMT(8,4,"clients")),e.R7$(3),e.FS9("placeholder",e.bMT(11,6,"search_clients")),e.Y8G("ngModel",o.searchTerm),e.R7$(3),e.Y8G("ngForOf",o.filteredClients))},dependencies:[g.Sq,g.bT,l.me,l.BC,l.vS,h.W9,j.n,b.D9],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-input-search[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px;background:#2b303b;color:#fff;border:none;outline:0;border-radius:40px}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.box-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:16px;border-radius:8px}.box-message-img-wrapper[_ngcontent-%COMP%]{width:44px;min-width:44px;height:44px;border-radius:44px;position:relative;background:#41454e}.box-message-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.box-message-img-none[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:26px}.box-message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;width:100%}.box-message-name-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.box-message-name-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-message-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.box-message-number[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:12px;background:var(--ion-color-primary);color:#fff;font-weight:600}.box-message-text[_ngcontent-%COMP%]{font-size:13px}.box-message-date[_ngcontent-%COMP%]{font-size:11px;width:100%;text-align:right}.filter-floating[_ngcontent-%COMP%]{width:54px;position:fixed;right:12px;bottom:102px;cursor:pointer}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}"]}),c})()}];let z=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.iI.forChild(E),d.iI]}),c})();var _=n(5553);let $=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.MD,l.YN,h.bv,z,_.h,b.h]}),c})()},4843:(y,m,n)=>{n.d(m,{_:()=>h});var g=n(9350),l=n(7707);function h(d,u){const C="object"==typeof u;return new Promise((p,f)=>{const x=new l.Ms({next:e=>{p(e),x.unsubscribe()},error:f,complete:()=>{C?p(u.defaultValue):f(new g.G)}});d.subscribe(x)})}}}]);