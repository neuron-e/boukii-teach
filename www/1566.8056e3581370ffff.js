"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1566],{1566:(P,f,r)=>{r.r(f),r.d(f,{SchoolsPageModule:()=>F});var d=r(177),u=r(9417),x=r(8974),h=r(3314),g=r(467),l=r(9969),m=r(4843),_=r(7468),t=r(6996),b=r(5663),M=r(918),C=r(4387),O=r(5794),k=r(8551),v=r(1547);function y(n,c){1&n&&t.nrm(0,"img",33)}function w(n,c){if(1&n){const o=t.RV6();t.j41(0,"img",34),t.bIt("click",function(){t.eBV(o);const i=t.XpG().$implicit,s=t.XpG().$implicit,a=t.XpG();return t.Njj(a.changeSchoolActive(i.id,s.id))}),t.k0s()}}const S=function(n,c){return{"box-item-img":n,"box-item-img-none":c}};function R(n,c){if(1&n){const o=t.RV6();t.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),t.nrm(4,"img",23),t.k0s(),t.j41(5,"div",24)(6,"span",25),t.EFF(7),t.k0s(),t.j41(8,"div",26),t.EFF(9),t.k0s(),t.j41(10,"div",27),t.nrm(11,"img",28)(12,"img",28)(13,"img",28)(14,"img",28),t.k0s()()(),t.j41(15,"div",29),t.DNE(16,y,1,0,"img",30),t.DNE(17,w,1,0,"img",31),t.j41(18,"img",32),t.bIt("click",function(){const s=t.eBV(o).$implicit,a=t.XpG(2);return t.Njj(a.toggleMore(s))}),t.k0s()()()()}if(2&n){const o=c.$implicit,e=t.XpG().$implicit,i=t.XpG();t.R7$(4),t.Y8G("src",o.image?o.image:"assets/icon/icon-no-image.png",t.B4B)("ngClass",t.l_i(10,S,o.image,!o.image)),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(o.name),t.R7$(2),t.Y8G("src",o.has_ski?"assets/icon/main_ski_on.png":"assets/icon/main_ski_off.png",t.B4B),t.R7$(1),t.Y8G("src",o.has_snowboard?"assets/icon/main_snowboard_on.png":"assets/icon/main_snowboard_off.png",t.B4B),t.R7$(1),t.Y8G("src",o.has_rando?"assets/icon/main_srando_on.png":"assets/icon/main_srando_off.png",t.B4B),t.R7$(1),t.Y8G("src",o.has_telemark?"assets/icon/main_telemark_on.png":"assets/icon/main_telemark_off.png",t.B4B),t.R7$(2),t.Y8G("ngIf",o.id===i.monitorData.active_school),t.R7$(1),t.Y8G("ngIf",o.id!==i.monitorData.active_school)}}function j(n,c){if(1&n&&(t.qex(0),t.j41(1,"div",14)(2,"div",15)(3,"div",16),t.EFF(4),t.k0s()()(),t.j41(5,"div",17),t.DNE(6,R,19,13,"div",18),t.k0s(),t.bVm()),2&n){const o=c.$implicit;t.R7$(4),t.SpI(" ",o.name," "),t.R7$(2),t.Y8G("ngForOf",o.schools)}}function D(n,c){if(1&n&&(t.j41(0,"div",35)(1,"div",20)(2,"div",21)(3,"div",22),t.nrm(4,"img",23),t.k0s(),t.j41(5,"div",24)(6,"div",26),t.EFF(7),t.k0s(),t.j41(8,"div",27),t.nrm(9,"img",28)(10,"img",28)(11,"img",28)(12,"img",28),t.k0s()()()(),t.j41(13,"div",36)(14,"div",26),t.EFF(15),t.k0s()()()),2&n){const o=t.XpG();t.R7$(4),t.Y8G("src",o.selectedSchool.image?o.selectedSchool.image:"assets/icon/icon-no-image.png",t.B4B)("ngClass",t.l_i(8,S,o.selectedSchool.image,!o.selectedSchool.image)),t.R7$(3),t.JRh(o.selectedSchool.name),t.R7$(2),t.Y8G("src",o.selectedSchool.has_ski?"assets/icon/main_ski_on.png":"assets/icon/main_ski_off.png",t.B4B),t.R7$(1),t.Y8G("src",o.selectedSchool.has_snowboard?"assets/icon/main_snowboard_on.png":"assets/icon/main_snowboard_off.png",t.B4B),t.R7$(1),t.Y8G("src",o.selectedSchool.has_rando?"assets/icon/main_srando_on.png":"assets/icon/main_srando_off.png",t.B4B),t.R7$(1),t.Y8G("src",o.selectedSchool.has_telemark?"assets/icon/main_telemark_on.png":"assets/icon/main_telemark_off.png",t.B4B),t.R7$(3),t.JRh(o.selectedSchool.description)}}function $(n,c){if(1&n&&(t.j41(0,"div",37)(1,"a",38)(2,"div",39)(3,"div",40)(4,"div",41)(5,"div",42),t.nrm(6,"img",43),t.j41(7,"div",26),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()()()(),t.j41(10,"a",38)(11,"div",39)(12,"div",40)(13,"div",41)(14,"div",42),t.nrm(15,"img",43),t.j41(16,"div",26),t.EFF(17),t.nI1(18,"translate"),t.k0s()()()()()(),t.j41(19,"a",38)(20,"div",44)(21,"div",40)(22,"div",41)(23,"div",42),t.nrm(24,"img",45),t.j41(25,"div",26),t.EFF(26),t.nI1(27,"translate"),t.k0s()()()()()()()),2&n){const o=t.XpG();t.R7$(1),t.Y8G("href","tel:"+o.selectedSchool.contact_phone,t.B4B),t.R7$(7),t.JRh(t.bMT(9,6,"mobile")),t.R7$(2),t.Y8G("href","tel:"+o.selectedSchool.contact_telephone,t.B4B),t.R7$(7),t.JRh(t.bMT(18,8,"telephone")),t.R7$(2),t.Y8G("href","mailto:"+o.selectedSchool.contact_email,t.B4B),t.R7$(7),t.JRh(t.bMT(27,10,"email"))}}const G=[{path:"",component:(()=>{var n;class c{constructor(e,i,s,a,p,Y,E){this.router=e,this.monitorDataService=i,this.sharedDataService=s,this.teachService=a,this.toastr=p,this.spinnerService=Y,this.translate=E,this.moreState="out",this.stations=[],this.schools=[],this.stationsSchools=[],this.monitorSchools=[],this.monitorStationsWithSchools=[]}ngOnInit(){var e=this;return(0,g.A)(function*(){e.subscription=e.monitorDataService.getMonitorData().subscribe(function(){var i=(0,g.A)(function*(s){if(s){e.spinnerService.show(),e.monitorData=s;try{e.stations=yield(0,m._)(e.sharedDataService.fetchStations()),e.schools=yield(0,m._)(e.sharedDataService.fetchSchools())}catch(a){console.error("Error fetching data:",a),e.toastr.error(e.translate.instant("toast.error_loading_data"))}e.monitorData.schools&&e.monitorData.schools.length>0?e.useMonitorSchools():e.fetchAllData()}});return function(s){return i.apply(this,arguments)}}(),i=>{console.error("Error fetching monitor data:",i)})})()}fetchAllData(){(0,_.p)({stationsSchools:this.teachService.getData("stations-schools"),monitorSchools:this.teachService.getData("monitors-schools")}).subscribe({next:e=>{this.stationsSchools=e.stationsSchools.data,this.monitorSchools=e.monitorSchools.data.filter(i=>i.monitor_id===this.monitorData.id),this.onlyMonitorStationsWithSchools()},error:e=>{this.spinnerService.hide(),console.error("Error fetching data:",e)}})}useMonitorSchools(){this.monitorStationsWithSchools=[{id:0,name:this.translate.instant("my_schools"),schools:this.monitorData.schools}],this.spinnerService.hide()}onlyMonitorStationsWithSchools(){const e=this.monitorSchools.map(i=>i.school_id);this.stations.sort((i,s)=>i.id-s.id),this.monitorStationsWithSchools=this.stations.map(i=>{let s=this.stationsSchools.filter(a=>a.station_id===i.id&&e.includes(a.school_id)).map(a=>this.schools.find(p=>p.id===a.school_id)).filter(a=>null!=a);return{...i,schools:s}}).filter(i=>i.schools.length>0),this.spinnerService.hide()}changeSchoolActive(e,i){var s=this;return(0,g.A)(function*(){if(e&&confirm(s.translate.instant("change_school_confirm"))&&s.monitorData){s.spinnerService.show();try{yield(0,m._)(s.teachService.updateData("monitors",s.monitorData.id,{active_school:e,active_station:i})),s.monitorDataService.updateActiveSchool(e),yield(0,m._)(s.sharedDataService.fetchDegrees(e)),yield(0,m._)(s.sharedDataService.fetchSports(e)),s.spinnerService.hide(),s.toastr.success(s.translate.instant("toast.school_changed")),window.location.reload()}catch(p){console.error("Error changing school:",p),s.spinnerService.hide(),s.toastr.error(s.translate.instant("toast.error"))}}})()}toggleMore(e){this.moreState="in",this.selectedSchool=e}toggleMoreHide(){this.moreState="out",this.selectedSchool=null}goTo(...e){this.router.navigate(e)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(n=c).\u0275fac=function(e){return new(e||n)(t.rXU(h.Ix),t.rXU(b.O),t.rXU(M.H),t.rXU(C.R),t.rXU(O.tw),t.rXU(k.D),t.rXU(v.c$))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-schools"]],decls:18,vars:7,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-top"],["src","assets/icon/arrow-left.svg",1,"header-top-side-img","cursor-pointer",3,"click"],[1,"header-section-title"],["src","assets/icon/ecoles.png"],[1,"padding-wrapper"],[4,"ngFor","ngForOf"],[1,"member-modal-wrapper"],[1,"padding-wrapper","dark-background","member-modal"],[1,"header-member","mt-12"],["src","assets/icon/icon-close-box.png",1,"cursor-pointer",3,"click"],["class","pb-24 mb-8 list-boxes-item",4,"ngIf"],["class","member-list background-color-dark padding-wrapper",4,"ngIf"],[1,"flex-title-selector","mt-12","mb-24"],[1,"flex-title-selector-interior"],[1,"flex-title-selector-text"],[1,"list-boxes-school"],["class","list-boxes-item background-color-dark padding-wrapper",4,"ngFor","ngForOf"],[1,"list-boxes-item","background-color-dark","padding-wrapper"],[1,"box-item-top"],[1,"box-item-left"],[1,"box-item-left-img"],[3,"src","ngClass"],[1,"box-item-left-text"],[1,"montserrat","color-light"],[1,"montserrat"],[1,"box-item-left-text-icons"],[3,"src"],[1,"box-school-icons"],["src","assets/icon/icon-check-radius.png","class","box-item-icon cursor-pointer",4,"ngIf"],["src","assets/icon/icon-check-radius-grey.png","class","box-item-icon cursor-pointer",3,"click",4,"ngIf"],["src","assets/icon/icon-more.png",1,"box-item-icon","cursor-pointer",3,"click"],["src","assets/icon/icon-check-radius.png",1,"box-item-icon","cursor-pointer"],["src","assets/icon/icon-check-radius-grey.png",1,"box-item-icon","cursor-pointer",3,"click"],[1,"pb-24","mb-8","list-boxes-item"],[1,"box-item-bottom"],[1,"member-list","background-color-dark","padding-wrapper"],[3,"href"],[1,"pb-8","mb-8","member-list-item","cursor-pointer"],[1,"member-item-flex"],[1,"member-item-content"],[1,"member-item-title"],["src","assets/icon/icon-phone-blue.png"],[1,"member-list-item","cursor-pointer","no-border"],["src","assets/icon/icon-mail-blue.png"]],template:function(e,i){1&e&&(t.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),t.bIt("click",function(){return i.goTo("home")}),t.k0s(),t.j41(5,"div",4),t.nrm(6,"img",5),t.j41(7,"div"),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()(),t.j41(10,"div",6),t.DNE(11,j,7,2,"ng-container",7),t.k0s()()(),t.j41(12,"div",8)(13,"div",9)(14,"div",10)(15,"img",11),t.bIt("click",function(){return i.toggleMoreHide()}),t.k0s()(),t.DNE(16,D,16,11,"div",12),t.DNE(17,$,28,12,"div",13),t.k0s()()),2&e&&(t.R7$(8),t.JRh(t.bMT(9,5,"schools")),t.R7$(3),t.Y8G("ngForOf",i.monitorStationsWithSchools),t.R7$(1),t.Y8G("@slideInOut",i.moreState),t.R7$(4),t.Y8G("ngIf",i.selectedSchool),t.R7$(1),t.Y8G("ngIf",i.selectedSchool))},dependencies:[d.YU,d.Sq,d.bT,x.W9,v.D9],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-top[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-top-side-img[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-side-img-b[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:20px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:600}.flex-title-selector[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.flex-title-selector-interior[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.flex-title-selector-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px;display:flex;align-items:center;justify-content:center}.flex-title-selector-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.flex-title-selector-text[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:500}.flex-title-selector-arrow[_ngcontent-%COMP%]{width:24px}.list-boxes-school[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:16px}.list-boxes-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;border-radius:8px}.box-item-top[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between}.box-item-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.box-item-left[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px}.box-item-left-img[_ngcontent-%COMP%]{width:60px;height:60px;position:relative;background:#41454e;border-radius:8px}.box-item-img-none[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:26px}.box-item-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:8px}.box-item-left-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:16px;font-weight:500}.box-item-left-text-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.box-item-left-text-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.box-item-icon[_ngcontent-%COMP%]{width:24px}.box-item-button[_ngcontent-%COMP%]{padding:8px 20px;border-radius:40px}.box-school-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.box-item-left-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:400}.member-modal-wrapper[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:100vh;min-height:100vh;max-height:100vh;z-index:999;background:rgba(0,0,0,.7)}.member-modal[_ngcontent-%COMP%]{position:fixed;height:-moz-fit-content!important;height:fit-content!important;min-height:-moz-fit-content!important;min-height:fit-content!important;max-height:100vh;bottom:0;left:0;width:100%;overflow-y:auto;z-index:1000}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-member[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:24px}.header-member[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:38px;position:absolute;right:0;top:50%;transform:translateY(-50%)}.member-section-text[_ngcontent-%COMP%]{display:block;color:#fff;font-size:20px;font-weight:600;text-align:center}.member-list[_ngcontent-%COMP%]{border-radius:8px;display:flex;gap:8px;flex-direction:column}.member-list-item[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;width:100%;border-bottom:1px solid #444953}.member-item-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.member-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.member-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.member-item-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.member-item-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.member-item-subtitle[_ngcontent-%COMP%]{font-size:12px}.member-item-icon[_ngcontent-%COMP%]{width:20px}.no-border[_ngcontent-%COMP%]{border:none!important}"],data:{animation:[(0,l.hZ)("slideInOut",[(0,l.wk)("in",(0,l.iF)({transform:"translateY(0)"})),(0,l.wk)("out",(0,l.iF)({transform:"translateY(100%)"})),(0,l.kY)("in => out",[(0,l.i0)("300ms ease-in-out")]),(0,l.kY)("out => in",[(0,l.i0)("300ms ease-in-out")])])]}}),c})()}];let B=(()=>{var n;class c{}return(n=c).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[h.iI.forChild(G),h.iI]}),c})(),F=(()=>{var n;class c{}return(n=c).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[d.MD,u.YN,x.bv,B,v.h]}),c})()},4843:(P,f,r)=>{r.d(f,{_:()=>x});var d=r(9350),u=r(7707);function x(h,g){const l="object"==typeof g;return new Promise((m,_)=>{const t=new u.Ms({next:b=>{m(b),t.unsubscribe()},error:_,complete:()=>{l?m(g.defaultValue):_(new d.G)}});h.subscribe(t)})}}}]);