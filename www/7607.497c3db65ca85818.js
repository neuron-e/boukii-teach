"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7607],{7607:(y,m,n)=>{n.r(m),n.d(m,{ClientsPageModule:()=>J});var g=n(6814),l=n(6223),h=n(3582),d=n(8520),p=n(5861),C=n(4036),u=n(6676),f=n(3659),x=n(8187),e=n(2029),O=n(2042),T=n(2234),w=n(5693),Z=n(3271),S=n(2425),_=n(7364),b=n(3911),z=n(7913);function A(i,c){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const s=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.getLanguageById(s.language1_id)," \xb7 ")}}function B(i,c){if(1&i){const s=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const r=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.goTo("client-detail",r.id))}),e.TgZ(1,"div",11),e._UZ(2,"img",12),e.qZA(),e.TgZ(3,"div",13)(4,"div",14)(5,"div",15),e._uU(6),e.qZA()(),e.TgZ(7,"div",16),e.YNc(8,A,2,1,"ng-container",17),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}if(2&i){const s=c.$implicit,t=e.oxw();e.xp6(2),e.Q6J("src",s.image?s.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(4),e.AsE("",s.first_name," ",s.last_name,""),e.xp6(2),e.Q6J("ngIf",s.language1_id),e.xp6(1),e.lnq(" ",t.getCountryById(s.country)," \xb7 ",s.birth_years," ",e.lcZ(10,7,"years")," ")}}const D=[{path:"",component:(()=>{var i;class c{constructor(t,o,r,a,v,M,P,Y){this.router=t,this.menuService=o,this.monitorDataService=r,this.sharedDataService=a,this.teachService=v,this.toastr=M,this.spinnerService=P,this.translate=Y,this.searchTerm="",this.showClients=!0,this.showSchools=!1,this.languages=[]}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.subscription=t.monitorDataService.getMonitorData().subscribe(function(){var o=(0,p.Z)(function*(r){if(r){t.spinnerService.show(),t.monitorData=r;try{t.languages=yield(0,C.z)(t.sharedDataService.fetchLanguages())}catch(a){console.error("Error fetching data:",a),t.toastr.error(t.translate.instant("toast.error_loading_data"))}t.teachService.getData("teach/clients").subscribe(a=>{a.forEach(v=>{const M=u(v.birth_date),P=u().diff(M,"years");v.birth_years=P}),t.clientsMonitor=a,t.filteredClients=a,t.spinnerService.hide()},a=>{t.spinnerService.hide(),console.error("There was an error!",a)})}});return function(r){return o.apply(this,arguments)}}())})()}getLanguageById(t){const o=this.languages.find(r=>r.id===t);return o?o.code.toUpperCase():""}getCountryById(t){const o=f.M.find(r=>r.id===t);return o?o.iso:"Aucun"}getProvinceById(t){const o=x.J.find(r=>r.id===t);return o?o.name:"Aucune"}searchClients(){if(this.searchTerm){const t=this.normalizeString(this.searchTerm);this.filteredClients=this.clientsMonitor.filter(o=>this.normalizeString(o.first_name).includes(t)||this.normalizeString(o.last_name).includes(t))}else this.filteredClients=this.clientsMonitor}normalizeString(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}toggleMenu(){this.menuService.toggleMenu()}goTo(...t){this.router.navigate(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(d.F0),e.Y36(O.h),e.Y36(T.q),e.Y36(w.g),e.Y36(Z.b),e.Y36(S._W),e.Y36(_.V),e.Y36(b.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-clients"]],decls:15,vars:8,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-12"],[1,"header-section-title"],["src","assets/icon/icon-clients-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],["type","text",1,"montserrat","mt-12","header-input-search",3,"ngModel","placeholder","ngModelChange","keyup"],[1,"padding-wrapper"],["class","background-color-dark mb-24 box-message cursor-pointer",3,"click",4,"ngFor","ngForOf"],["section","clients"],[1,"background-color-dark","mb-24","box-message","cursor-pointer",3,"click"],[1,"box-message-img-wrapper"],[1,"box-message-img",3,"src"],[1,"box-message-content"],[1,"box-message-name-flex"],[1,"montserrat","box-message-name"],[1,"montserrat","color-light","box-message-text"],[4,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"img",4),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"img",5),e.NdJ("click",function(){return o.toggleMenu()}),e.qZA()(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(a){return o.searchTerm=a})("keyup",function(){return o.searchClients()}),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",7),e.YNc(13,B,11,9,"div",8),e.qZA()()(),e._UZ(14,"app-footer",9)),2&t&&(e.xp6(7),e.Oqu(e.lcZ(8,4,"clients")),e.xp6(3),e.s9C("placeholder",e.lcZ(11,6,"search_clients")),e.Q6J("ngModel",o.searchTerm),e.xp6(3),e.Q6J("ngForOf",o.filteredClients))},dependencies:[g.sg,g.O5,l.Fj,l.JJ,l.On,h.W2,z.c,b.X$],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-input-search[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px;background:#2b303b;color:#fff;border:none;outline:0;border-radius:40px}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.box-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:16px;border-radius:8px}.box-message-img-wrapper[_ngcontent-%COMP%]{width:44px;min-width:44px;height:44px;border-radius:44px;position:relative;background:#41454e}.box-message-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.box-message-img-none[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:26px}.box-message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;width:100%}.box-message-name-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.box-message-name-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-message-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.box-message-number[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:12px;background:var(--ion-color-primary);color:#fff;font-weight:600}.box-message-text[_ngcontent-%COMP%]{font-size:13px}.box-message-date[_ngcontent-%COMP%]{font-size:11px;width:100%;text-align:right}.filter-floating[_ngcontent-%COMP%]{width:54px;position:fixed;right:12px;bottom:102px;cursor:pointer}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}"]}),c})()}];let E=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(D),d.Bz]}),c})();var F=n(822);let J=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,l.u5,h.Pc,E,F.K,b.aw]}),c})()},4036:(y,m,n)=>{n.d(m,{z:()=>h});var g=n(6973),l=n(305);function h(d,p){const C="object"==typeof p;return new Promise((u,f)=>{const x=new l.Hp({next:e=>{u(e),x.unsubscribe()},error:f,complete:()=>{C?u(p.defaultValue):f(new g.K)}});d.subscribe(x)})}}}]);