"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1817],{1817:(N,w,u)=>{u.r(w),u.d(w,{CalendarPageModule:()=>Nt});var C=u(177),$=u(9417),T=u(8974),x=u(3314),M=u(467),R=u(4843),f=u(7586),t=u(6996),Y=u(4621),E=u(5663),W=u(918),X=u(4387),B=u(5794),z=u(8551),S=u(1547),H=u(7473),V=u(5473);const A=function(o){return{"menu-badge-hidden":o}};function U(o,c){if(1&o&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&o){const n=c.ngIf;t.Y8G("ngClass",t.eq3(2,A,n<=0)),t.R7$(1),t.SpI(" ",n>99?"99+":n," ")}}function L(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",15)(1,"div",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.previousMonth())}),t.nrm(2,"img",17),t.k0s(),t.j41(3,"div",18),t.EFF(4),t.k0s(),t.j41(5,"div",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.nextMonth())}),t.nrm(6,"img",19),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(4),t.Lme(" ",n.monthNames[n.currentMonth]," ",n.currentYear," ")}}function J(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",15)(1,"div",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.previousWeek())}),t.nrm(2,"img",17),t.k0s(),t.j41(3,"div",18),t.EFF(4),t.k0s(),t.j41(5,"div",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.nextWeek())}),t.nrm(6,"img",19),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(4),t.SpI(" ",n.getWeekRangeDisplay()," ")}}function K(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",15)(1,"div",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.previousDay())}),t.nrm(2,"img",17),t.k0s(),t.j41(3,"div",18),t.EFF(4),t.k0s(),t.j41(5,"div",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.nextDay())}),t.nrm(6,"img",19),t.k0s()()}if(2&o){const n=t.XpG();t.R7$(4),t.LHq(" ",n.getWeekdayName(n.selectedDate),", ",n.currentDay," ",n.monthNames[n.currentMonth]," ",n.currentYear," ")}}function Q(o,c){if(1&o&&(t.j41(0,"span",26),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.JRh(n)}}function Z(o,c){1&o&&t.nrm(0,"span",45)}function q(o,c){1&o&&t.nrm(0,"span",46)}function tt(o,c){1&o&&t.nrm(0,"span",47)}function et(o,c){1&o&&t.nrm(0,"span",48)}function nt(o,c){1&o&&t.nrm(0,"span",49)}function at(o,c){1&o&&t.nrm(0,"span",50)}function ot(o,c){1&o&&t.nrm(0,"span",49)}function st(o,c){1&o&&t.nrm(0,"span",51)}function rt(o,c){1&o&&t.nrm(0,"span",52)}function it(o,c){1&o&&t.nrm(0,"span",51)}function ct(o,c){1&o&&t.nrm(0,"span",53)}function lt(o,c){1&o&&t.nrm(0,"span",54)}function dt(o,c){1&o&&t.nrm(0,"span",55)}function pt(o,c){if(1&o&&t.nrm(0,"span",56),2&o){const n=t.XpG().$implicit;t.Y8G("ngClass",n.private||n.collective||n.other?"bottom-position-bar":"top-position-bar")}}function ht(o,c){if(1&o&&t.nrm(0,"span",57),2&o){const n=t.XpG().$implicit;t.Y8G("ngClass",n.private||n.collective||n.other?"bottom-position-bar":"top-position-bar")}}function gt(o,c){if(1&o&&t.nrm(0,"span",58),2&o){const n=t.XpG().$implicit;t.Y8G("ngClass",n.private||n.collective||n.other?"bottom-position-bar":"top-position-bar")}}function ut(o,c){if(1&o&&t.nrm(0,"span",59),2&o){const n=t.XpG().$implicit;t.Y8G("ngClass",n.private||n.collective||n.other?"bottom-position-bar":"top-position-bar")}}const _t=function(o){return{"very-light-opacity":o}};function ft(o,c){if(1&o){const n=t.RV6();t.qex(0),t.j41(1,"span",27),t.bIt("click",function(){const s=t.eBV(n).$implicit,i=t.XpG(2);return t.Njj(i.selectDay(s))}),t.j41(2,"span",28)(3,"span",29),t.EFF(4),t.k0s(),t.DNE(5,Z,1,0,"span",30),t.DNE(6,q,1,0,"span",31),t.DNE(7,tt,1,0,"span",32),t.DNE(8,et,1,0,"span",33),t.DNE(9,nt,1,0,"span",34),t.DNE(10,at,1,0,"span",35),t.DNE(11,ot,1,0,"span",34),t.DNE(12,st,1,0,"span",36),t.DNE(13,rt,1,0,"span",37),t.DNE(14,it,1,0,"span",36),t.DNE(15,ct,1,0,"span",38),t.DNE(16,lt,1,0,"span",39),t.DNE(17,dt,1,0,"span",40),t.DNE(18,pt,1,1,"span",41),t.DNE(19,ht,1,1,"span",42),t.DNE(20,gt,1,1,"span",43),t.DNE(21,ut,1,1,"span",44),t.k0s()(),t.bVm()}if(2&o){const n=c.$implicit;t.R7$(1),t.Y8G("ngClass",t.eq3(19,_t,n.past)),t.R7$(3),t.JRh(n.number),t.R7$(1),t.Y8G("ngIf",n.today),t.R7$(1),t.Y8G("ngIf",n.private&&!n.collective&&!n.other),t.R7$(1),t.Y8G("ngIf",!n.private&&n.collective&&!n.other),t.R7$(1),t.Y8G("ngIf",!n.private&&!n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",n.private&&n.collective&&!n.other),t.R7$(1),t.Y8G("ngIf",n.private&&n.collective&&!n.other),t.R7$(1),t.Y8G("ngIf",n.private&&!n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",n.private&&!n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",!n.private&&n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",!n.private&&n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",n.private&&n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",n.private&&n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",n.private&&n.collective&&n.other),t.R7$(1),t.Y8G("ngIf",n.block&&!n.blockPayed),t.R7$(1),t.Y8G("ngIf",!n.block&&n.blockPayed),t.R7$(1),t.Y8G("ngIf",n.block&&n.blockPayed),t.R7$(1),t.Y8G("ngIf",n.block&&n.blockPayed)}}function vt(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",20),t.bIt("touchstart",function(a){t.eBV(n);const s=t.XpG();return t.Njj(s.onTouchStart(a))})("touchend",function(a){t.eBV(n);const s=t.XpG();return t.Njj(s.onTouchEnd(a))}),t.j41(1,"div",21)(2,"div",22),t.DNE(3,Q,2,1,"span",23),t.k0s(),t.j41(4,"div",24),t.DNE(5,ft,22,21,"ng-container",25),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(3),t.Y8G("ngForOf",n.weekdays),t.R7$(2),t.Y8G("ngForOf",n.days)}}function mt(o,c){if(1&o&&(t.j41(0,"div",69),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.JRh(n)}}function yt(o,c){if(1&o&&(t.j41(0,"div",70),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.SpI(" ",n," ")}}function bt(o,c){1&o&&t.nrm(0,"div",71)}const kt=function(o,c,n,e,a){return{"collective-icon-only":o,"private-icon-only":c,"other-icon-only":n,"block-icon-only":e,"block-payed-icon-only":a}};function Ct(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",72),t.bIt("click",function(){const s=t.eBV(n).$implicit,i=t.XpG(2);return t.Njj("block"===s.type?i.openAvailables(s.block_id,s.date):"block_payed"===s.type||"other"===s.type?null:i.goTo("course-detail",s.booking_id,s.date))}),t.nrm(1,"img",73),t.k0s()}if(2&o){const n=c.$implicit,e=t.XpG(2);t.Y8G("ngClass",t.s1E(3,kt,"collective"===n.type,"private"===n.type,"other"===n.type,"block"===n.type,"block_payed"===n.type))("ngStyle",e.getTaskStyle(n,!0)),t.R7$(1),t.Y8G("src",e.getIconForTaskType(n.type),t.B4B)}}function Mt(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",20),t.bIt("touchstart",function(a){t.eBV(n);const s=t.XpG();return t.Njj(s.onTouchStart(a))})("touchend",function(a){t.eBV(n);const s=t.XpG();return t.Njj(s.onTouchEnd(a))}),t.j41(1,"div",60)(2,"div",61),t.DNE(3,mt,2,1,"div",62),t.k0s(),t.j41(4,"div",63)(5,"div",64),t.DNE(6,yt,2,1,"div",65),t.k0s(),t.j41(7,"div",66),t.DNE(8,bt,1,0,"div",67),t.DNE(9,Ct,2,9,"div",68),t.k0s()()()()}if(2&o){const n=t.XpG();t.R7$(3),t.Y8G("ngForOf",n.weekdaysShort),t.R7$(3),t.Y8G("ngForOf",n.hoursRange),t.R7$(2),t.Y8G("ngForOf",n.hoursRange),t.R7$(1),t.Y8G("ngForOf",n.filteredTasksWeek)}}function xt(o,c){if(1&o&&(t.j41(0,"div",70),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.SpI(" ",n," ")}}function Pt(o,c){1&o&&t.nrm(0,"div",71)}function Dt(o,c){if(1&o&&(t.qex(0),t.EFF(1),t.bVm()),2&o){const n=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",n.sport_name," ")}}function Ot(o,c){if(1&o&&(t.j41(0,"div",77),t.nrm(1,"img",78),t.j41(2,"div",79)(3,"div",80),t.EFF(4),t.k0s(),t.j41(5,"span",81),t.EFF(6),t.nI1(7,"translate"),t.DNE(8,Dt,2,1,"ng-container",82),t.k0s()(),t.j41(9,"div",83)(10,"div",84),t.nrm(11,"img",85),t.j41(12,"span"),t.EFF(13),t.k0s()(),t.j41(14,"div",84),t.nrm(15,"img",86),t.j41(16,"span"),t.EFF(17),t.k0s()()()()),2&o){const n=t.XpG().$implicit,e=t.XpG(2);t.R7$(4),t.JRh(n.name),t.R7$(2),t.SpI(" ",t.bMT(7,7,"collective")," "),t.R7$(2),t.Y8G("ngIf",n.sport_name&&e.sports.length),t.R7$(5),t.Lme("",n.clients,"/",n.max_participants,""),t.R7$(4),t.Lme("",n.date_index,"/",n.date_total,"")}}function wt(o,c){if(1&o&&(t.qex(0),t.EFF(1),t.bVm()),2&o){const n=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",n.sport_name," ")}}function Tt(o,c){if(1&o&&(t.j41(0,"div",77),t.nrm(1,"img",87),t.j41(2,"div",79)(3,"div",80),t.EFF(4),t.k0s(),t.j41(5,"span",81),t.EFF(6),t.nI1(7,"translate"),t.DNE(8,wt,2,1,"ng-container",82),t.k0s()()()),2&o){const n=t.XpG().$implicit,e=t.XpG(2);t.R7$(4),t.JRh(n.name),t.R7$(2),t.SpI(" ",t.bMT(7,3,"private")," "),t.R7$(2),t.Y8G("ngIf",n.sport_name&&e.sports.length)}}function Yt(o,c){1&o&&(t.j41(0,"div",77),t.nrm(1,"img",88),t.j41(2,"div",79)(3,"div",80),t.EFF(4,"Activit\xe9"),t.k0s()()())}function $t(o,c){if(1&o&&(t.j41(0,"div",89),t.EFF(1),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(1),t.SpI(" ",n.name," ")}}function Rt(o,c){if(1&o&&(t.j41(0,"div",89),t.EFF(1),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(1),t.SpI(" ",n.name," ")}}const Et=function(o,c,n,e,a,s,i){return{"collective-icon-full":o,"private-icon-full":c,"other-icon-full":n,"block-icon-full":e,"block-payed-icon-full":a,overlapped:s,"very-narrow":i}};function St(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",72),t.bIt("click",function(){const s=t.eBV(n).$implicit,i=t.XpG(2);return t.Njj("block"===s.type?i.openAvailables(s.block_id,s.date):"block_payed"===s.type||"other"===s.type?null:i.goTo("course-detail",s.booking_id,s.date))}),t.DNE(1,Ot,18,9,"div",75),t.DNE(2,Tt,9,5,"div",75),t.DNE(3,Yt,5,0,"div",75),t.DNE(4,$t,2,1,"div",76),t.DNE(5,Rt,2,1,"div",76),t.k0s()}if(2&o){const n=c.$implicit,e=t.XpG(2);t.Y8G("ngClass",t.sGs(7,Et,"collective"===n.type,"private"===n.type,"other"===n.type,"block"===n.type,"block_payed"===n.type,2===n.overlapCount,n.overlapCount>=3))("ngStyle",e.getTaskStyle(n)),t.R7$(1),t.Y8G("ngIf","collective"===n.type),t.R7$(1),t.Y8G("ngIf","private"===n.type),t.R7$(1),t.Y8G("ngIf","other"===n.type),t.R7$(1),t.Y8G("ngIf","block"===n.type),t.R7$(1),t.Y8G("ngIf","block_payed"===n.type)}}function It(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",20),t.bIt("touchstart",function(a){t.eBV(n);const s=t.XpG();return t.Njj(s.onTouchStart(a))})("touchend",function(a){t.eBV(n);const s=t.XpG();return t.Njj(s.onTouchEnd(a))}),t.j41(1,"div",74)(2,"div",64),t.DNE(3,xt,2,1,"div",65),t.k0s(),t.j41(4,"div",66),t.DNE(5,Pt,1,0,"div",67),t.DNE(6,St,6,15,"div",68),t.k0s()()()}if(2&o){const n=t.XpG();t.R7$(3),t.Y8G("ngForOf",n.hoursRange),t.R7$(2),t.Y8G("ngForOf",n.hoursRange),t.R7$(1),t.Y8G("ngForOf",n.filteredTasks)}}const I=function(o,c){return{"btn-back-primary":o,"btn-back-grey":c}},jt=[{path:"",component:(()=>{var o;class c{constructor(e,a,s,i,d,p,r,l,h,_){this.router=e,this.route=a,this.menuService=s,this.monitorDataService=i,this.sharedDataService=d,this.teachService=p,this.toastr=r,this.spinnerService=l,this.translate=h,this.notificationService=_,this.showMonth=!0,this.showWeek=!1,this.showDay=!1,this.today=new Date,this.touchStartX=0,this.touchStartY=0,this.SWIPE_THRESHOLD=50,this.monthNames=[],this.weekdays=[],this.weekdaysShort=[],this.weekdayNames=[],this.days=[],this.filteredTasksWeek=[],this.tasksCalendar=[],this.unreadCount$=this.notificationService.unreadCount$,this.hoursRange=[],this.bookingsCurrent=[],this.nwdsCurrent=[],this.subgroupsCurrent=[],this.degrees=[],this.sports=[],this.canRestart=!1,this.pendingDate=null,this.translate.onLangChange.subscribe(()=>{this.loadWeekdays()}),this.loadWeekdays()}ngOnInit(){var e=this;return(0,M.A)(function*(){e.route.queryParams.subscribe(a=>{e.pendingDate=(null==a?void 0:a.date)||localStorage.getItem("calendarTargetDate"),e.monitorData&&e.applyPendingDate()}),e.subscription=e.monitorDataService.getMonitorData().subscribe(function(){var a=(0,M.A)(function*(s){if(s){e.spinnerService.show(),e.monitorData=s;try{e.sports=yield(0,R._)(e.sharedDataService.fetchSports(e.monitorData.active_school))}catch(p){console.error("Error fetching data:",p),e.toastr.error(e.translate.instant("toast.error_loading_data"))}yield e.loadSeason(),e.selectedDate=new Date,e.currentMonth=e.selectedDate.getMonth(),e.currentYear=e.selectedDate.getFullYear(),e.currentDay=e.selectedDate.getDate();const{firstDay:i,lastDay:d}=e.getMonthBoundaries(e.currentYear,e.currentMonth);yield e.generateHoursRange(),e.loadBookings(i,d),e.applyPendingDate()}});return function(s){return a.apply(this,arguments)}}())})()}loadSeason(){var e=this;return(0,M.A)(function*(){e.spinnerService.show();const a={numPage:1,perPage:1e3,order:"asc",orderColumn:"id",school_id:e.monitorData.active_school,is_active:1,exclude:"",user:null,filter:""};try{const s=yield e.teachService.getData("seasons",null,a).toPromise();let i="08:00",d="18:00";s.data.length>0&&(e.vacationDays=JSON.parse(s.data[0].vacation_days),i=s.data[0].hour_start?s.data[0].hour_start.substring(0,5):"08:00",d=s.data[0].hour_end?s.data[0].hour_end.substring(0,5):"18:00"),e.hourStartDay=i,e.hourEndDay=d}catch(s){console.error("There was an error!",s)}finally{e.spinnerService.hide()}})()}loadWeekdays(){this.weekdays=[this.translate.instant("days_abbrev.monday"),this.translate.instant("days_abbrev.tuesday"),this.translate.instant("days_abbrev.wednesday"),this.translate.instant("days_abbrev.thursday"),this.translate.instant("days_abbrev.friday"),this.translate.instant("days_abbrev.saturday"),this.translate.instant("days_abbrev.sunday")],this.weekdaysShort=[this.translate.instant("days_abbrev_short.monday"),this.translate.instant("days_abbrev_short.tuesday"),this.translate.instant("days_abbrev_short.wednesday"),this.translate.instant("days_abbrev_short.thursday"),this.translate.instant("days_abbrev_short.friday"),this.translate.instant("days_abbrev_short.saturday"),this.translate.instant("days_abbrev_short.sunday")],this.weekdayNames=[this.translate.instant("days.sunday"),this.translate.instant("days.monday"),this.translate.instant("days.tuesday"),this.translate.instant("days.wednesday"),this.translate.instant("days.thursday"),this.translate.instant("days.friday"),this.translate.instant("days.saturday")],this.monthNames=[this.translate.instant("months.january"),this.translate.instant("months.february"),this.translate.instant("months.march"),this.translate.instant("months.april"),this.translate.instant("months.may"),this.translate.instant("months.june"),this.translate.instant("months.july"),this.translate.instant("months.august"),this.translate.instant("months.september"),this.translate.instant("months.october"),this.translate.instant("months.november"),this.translate.instant("months.december")]}ionViewDidEnter(){this.restartTasksAgain()}getMonthBoundaries(e,a){return{firstDay:f(new Date(e,a,1)).format("YYYY-MM-DD"),lastDay:f(new Date(e,a+1,0)).format("YYYY-MM-DD")}}restartTasks(){const{firstDay:e,lastDay:a}=this.getMonthBoundaries(this.currentYear,this.currentMonth);this.loadBookings(e,a)}restartTasksRange(e,a){this.loadBookings(e,a)}restartTasksAgain(){if(this.canRestart){if(this.showMonth)this.restartTasks();else if(this.showWeek){const e=f(this.weekStart).format("YYYY-MM-DD"),a=f(this.weekEnd).format("YYYY-MM-DD");this.restartTasksRange(e,a)}else if(this.showDay){const e=f(this.selectedDate).format("YYYY-MM-DD");this.restartTasksRange(e,e)}}else this.canRestart=!0}loadBookings(e,a){this.spinnerService.show();const s={date_start:e,date_end:a};this.monitorData.active_school&&(s.school_id=this.monitorData.active_school),this.teachService.getData("teach/getAgenda",null,s).subscribe(i=>{this.processBookings(i.data.bookings,i.data.nwd,i.data.subgroups)},i=>{console.error("There was an error!",i),this.spinnerService.hide()})}processBookings(e,a,s){const i=new Map;let d,p;this.bookingsCurrent=[],this.nwdsCurrent=a,this.subgroupsCurrent=s,e.forEach(r=>{if(r.course){let l=`${r.course_id}-${r.course_date_id}`;1==r.course.course_type?l=`${r.course_id}-${r.course_date_id}-${r.course_subgroup_id}`:2==r.course.course_type&&(l=`${r.course_id}-${r.course_date_id}-${r.hour_start}-${r.hour_end}`),i.has(l)?i.get(l).all_clients.push(r.client):(i.set(l,{...r,all_clients:[r.client]}),this.bookingsCurrent.push(i.get(l)))}}),d=this.monitorData.active_school?this.nwdsCurrent.filter(r=>r.school_id===this.monitorData.active_school):this.nwdsCurrent,p=this.monitorData.active_school?this.subgroupsCurrent.filter(r=>r.course.school_id===this.monitorData.active_school):this.subgroupsCurrent,this.tasksCalendar=[...this.bookingsCurrent.map(r=>{var l;let h;switch(r.course.course_type){case 1:h="collective";break;case 2:h="private";break;default:h="unknown"}const _=2===r.course.course_type?{date_total:0,date_index:0}:{date_total:null!==(l=r.course.course_dates_total)&&void 0!==l?l:r.course.course_dates.length,date_index:this.getPositionDate(r.course.course_dates,r.course_date_id)},v=this.sports.find(b=>b.id===r.course.sport_id);return{booking_id:r.id,date:f(r.date).format("YYYY-MM-DD"),hour_start:r.hour_start.substring(0,5),hour_end:r.hour_end.substring(0,5),type:h,name:r.course.name,sport_id:r.course.sport_id,sport_name:v?v.name:"",clients:r.all_clients.length,max_participants:r.course.max_participants,..._}}),...d.map(r=>{const l=r.full_day?{hour_start:this.hourStartDay,hour_end:this.hourEndDay}:{hour_start:r.start_time.substring(0,5),hour_end:r.end_time.substring(0,5)};return{school_id:r.school_id,block_id:r.id,date:f(r.start_date).format("YYYY-MM-DD"),full_day:r.full_day,type:1==r.user_nwd_subtype_id?"block":"block_payed",color:2==r.user_nwd_subtype_id?r.color:"#89add1",name:r.description,...l}}),...p.map(r=>{var l;let h;switch(r.course.course_type){case 1:h="collective";break;case 2:h="private";break;default:h="unknown"}const _=2===r.course.course_type?{date_total:0,date_index:0}:{date_total:null!==(l=r.course.course_dates_total)&&void 0!==l?l:r.course.course_dates.length,date_index:this.getPositionDate(r.course.course_dates,r.course_date_id)},v=this.sports.find(b=>b.id===r.course.sport_id);return _.date_index>0?{booking_id:"s-"+r.id,date:f(r.course.course_dates[_.date_index-1].date).format("YYYY-MM-DD"),hour_start:r.course.course_dates[_.date_index-1].hour_start.substring(0,5),hour_end:r.course.course_dates[_.date_index-1].hour_end.substring(0,5),type:h,name:r.course.name,sport_id:r.course.sport_id,sport_name:v?v.name:"",clients:0,max_participants:r.course.max_participants,..._}:null}).filter(Boolean)],this.updateTasksWithStyles(),this.spinnerService.hide()}getPositionDate(e,a){const s=e.findIndex(i=>i.id===a);return s>=0?s+1:0}getTaskStyle(e,a=!1){let s=a?e.styleWeek:e.style;return"block"===e.type||"block_payed"===e.type?{...s,background:this.hexToRgbA(e.color,.6)}:s}hexToRgbA(e,a=1){const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?`rgba(${parseInt(s[1],16)},${parseInt(s[2],16)},${parseInt(s[3],16)},${a})`:null}toggleMenu(){this.menuService.toggleMenu()}generateHoursRange(){var e=this;return(0,M.A)(function*(){e.hoursRange=[];const{start:a,end:s}=e.getDisplayHourBounds();e.displayHourStart=e.formatTime(a),e.displayHourEnd=e.formatTime(s);let i=new Date(a);for(;i<=s;)e.hoursRange.push(e.formatTime(i)),i.setHours(i.getHours()+1)})()}parseTime(e){const[a,s]=e.split(":").map(Number),i=new Date;return i.setHours(a,s,0,0),i}formatTime(e){return e.toTimeString().substring(0,5)}getDisplayHourBounds(){const e=this.parseTime(this.hourStartDay),a=this.parseTime(this.hourEndDay);return 0!==e.getMinutes()&&e.setMinutes(0,0,0),0!==a.getMinutes()&&a.setHours(a.getHours()+1,0,0,0),a<e&&a.setTime(e.getTime()),{start:e,end:a}}previousMonth(){let e=f(this.selectedDate);e.subtract(1,"months"),this.selectedDate=e.toDate(),this.currentDay=this.selectedDate.getDate(),this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.restartTasks()}nextMonth(){let e=f(this.selectedDate);e.add(1,"months"),this.selectedDate=e.toDate(),this.currentDay=this.selectedDate.getDate(),this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.restartTasks()}calculateMonthRange(){this.restartTasks()}previousDay(){this.selectedDate.setDate(this.selectedDate.getDate()-1),this.currentMonth=this.selectedDate.getMonth(),this.currentYear=this.selectedDate.getFullYear(),this.currentDay=this.selectedDate.getDate();const e=f(this.selectedDate).format("YYYY-MM-DD");this.restartTasksRange(e,e)}nextDay(){this.selectedDate.setDate(this.selectedDate.getDate()+1),this.currentMonth=this.selectedDate.getMonth(),this.currentYear=this.selectedDate.getFullYear(),this.currentDay=this.selectedDate.getDate();const e=f(this.selectedDate).format("YYYY-MM-DD");this.restartTasksRange(e,e)}calculateDayRange(){const e=f(this.selectedDate).format("YYYY-MM-DD");this.currentMonth=this.selectedDate.getMonth(),this.currentYear=this.selectedDate.getFullYear(),this.restartTasksRange(e,e)}previousWeek(){this.selectedDate.setDate(this.selectedDate.getDate()-7),this.currentDay=this.selectedDate.getDate(),this.calculateWeekRange()}nextWeek(){this.selectedDate.setDate(this.selectedDate.getDate()+7),this.currentDay=this.selectedDate.getDate(),this.calculateWeekRange()}calculateWeekRange(){const e=this.selectedDate.getDay(),a=0===e?6:e-1;this.weekStart=new Date(this.selectedDate),this.weekStart.setDate(this.selectedDate.getDate()-a),this.weekStart.setHours(0,0,0,0),this.weekEnd=new Date(this.weekStart),this.weekEnd.setDate(this.weekStart.getDate()+6),this.weekEnd.setHours(0,0,0,0),this.currentMonth=this.weekEnd.getMonth(),this.currentYear=this.weekEnd.getFullYear();const s=f(this.weekStart).format("YYYY-MM-DD"),i=f(this.weekEnd).format("YYYY-MM-DD");this.restartTasksRange(s,i)}renderCalendar(){this.spinnerService.show();const e=new Date(this.currentYear,this.currentMonth,1).getDay(),a=new Date(this.currentYear,this.currentMonth+1,0).getDate();this.days=[];let s=e-1;s<0&&(s=6);for(let g=0;g<s;g++)this.days.push({number:"",active:!1});const i=new Date;i.setHours(0,0,0,0);const d=i.getDate(),p=i.getMonth(),r=i.getFullYear();for(let g=1;g<=a;g++){const y=new Date(this.currentYear,this.currentMonth,g);y.setHours(0,0,0,0);const P=y<i,j=`${this.currentMonth+1}`.padStart(2,"0"),G=`${g}`.padStart(2,"0"),O=`${this.currentYear}-${j}-${G}`,F=g===d&&this.currentMonth===p&&this.currentYear===r,D=this.tasksCalendar.reduce((m,k)=>(k.date===O&&(m.isPrivate=m.isPrivate||"private"===k.type,m.isCollective=m.isCollective||"collective"===k.type,m.isOther=m.isOther||"other"===k.type,m.isBlock=m.isBlock||"block"===k.type,m.isBlockPayed=m.isBlockPayed||"block_payed"===k.type),m),{isPrivate:!1,isCollective:!1,isOther:!1,isBlock:!1,isBlockPayed:!1});this.days.push({number:g,selected:!1,past:P,today:F,private:D.isPrivate,collective:D.isCollective,other:D.isOther,block:D.isBlock,blockPayed:D.isBlockPayed})}let h=new Date(this.currentYear,this.currentMonth,a).getDay()-1;h<0&&(h=6);for(let g=h;g<6;g++)this.days.push({number:"",active:!1,selected:!1,today:!1});const _=`${this.currentMonth+1}`.padStart(2,"0"),v=`${this.currentDay}`.padStart(2,"0"),b=`${this.currentYear}-${_}-${v}`;this.filteredTasks=this.tasksCalendar.filter(g=>g.date===b),this.filteredTasksWeek=this.tasksCalendar.filter(g=>{const y=new Date(g.date);return y.setHours(0,0,0,0),y>=this.weekStart&&y<=this.weekEnd}),this.spinnerService.hide()}selectDay(e){if(e.number){this.selectedDate=new Date(this.currentYear,this.currentMonth,e.number),this.currentDay=e.number,this.calculateDayRange(),this.showDay=!0,this.showMonth=!1,this.showWeek=!1;const a=`${this.currentMonth+1}`.padStart(2,"0"),s=`${this.currentDay}`.padStart(2,"0"),i=`${this.currentYear}-${a}-${s}`;this.filteredTasks=this.tasksCalendar.filter(d=>d.date===i)}}applyPendingDate(){if(!this.pendingDate)return;const e=this.normalizeDateString(this.pendingDate),a=f(e,"YYYY-MM-DD",!0);if(!a.isValid())return;const s=a.toDate();this.selectedDate=s,this.currentMonth=s.getMonth(),this.currentYear=s.getFullYear(),this.currentDay=s.getDate(),this.showDay=!0,this.showMonth=!1,this.showWeek=!1,this.calculateDayRange(),localStorage.removeItem("calendarTargetDate")}normalizeDateString(e){if(!e)return"";const a=String(e);return a.includes("T")||a.includes(" ")?a.slice(0,10):a}getWeekdayName(e){return this.weekdayNames[e.getDay()]}getWeekRangeDisplay(){const e=this.monthNames[this.weekEnd.getMonth()];return`${this.weekStart.getDate()}-${this.weekEnd.getDate()} ${e} ${this.weekEnd.getFullYear()}`}updateTasksWithStyles(){var e=this;return(0,M.A)(function*(){const{start:d,end:p}=e.getDisplayHourBounds(),r=new Date(d),l=60*r.getHours()+r.getMinutes(),h={0:"85.5%",1:"0%",2:"14.25%",3:"28.5%",4:"42.75%",5:"57%",6:"71.25%"};e.tasksCalendar=e.tasksCalendar.map(_=>{const v=e.getDayOfWeek(_.date),b=new Date(d),g=e.parseTime(_.hour_start);g<b&&g.setHours(b.getHours(),b.getMinutes(),0,0);const y=new Date(p),P=e.parseTime(_.hour_end);P>y&&P.setHours(y.getHours(),y.getMinutes(),0,0);const O=(60*g.getHours()+g.getMinutes()-l)/60*57,m=(P.getTime()-g.getTime())/6e4/60*57,k=h[v.toString()];return{..._,startTimeMs:g.getTime(),endTimeMs:P.getTime(),topPx:O,heightPx:m,dayOfWeek:v,leftValue:k,style:{top:`${O}px`,height:`${m}px`},styleWeek:{top:`${O}px`,height:`${m}px`,left:k}}}),e.adjustOverlappingTasks(),e.renderCalendar()})()}adjustOverlappingTasks(){const e={};this.tasksCalendar.forEach(s=>{e[s.date]||(e[s.date]=[]),e[s.date].push(s),s.overlapCount=1}),Object.keys(e).forEach(s=>{this.findOverlappingGroups(e[s]).forEach(p=>{const r=p.length;r>1&&(p.sort((l,h)=>l.startTimeMs-h.startTimeMs),p.forEach((l,h)=>{const _=100/r,v=100/r*h;l.overlapCount=r,l.style={...l.style,width:`${_}%`,left:`${v}%`,"z-index":h+1}}))})});const a={};this.tasksCalendar.forEach(s=>{const i=`${s.date}_${s.dayOfWeek}`;a[i]||(a[i]=[]),a[i].push(s)}),Object.keys(a).forEach(s=>{this.findOverlappingGroups(a[s]).forEach(p=>{const r=p.length;if(r>1){p.sort((_,v)=>_.startTimeMs-v.startTimeMs);const h=14.25/r;p.forEach((_,v)=>{const b=parseFloat(_.leftValue);_.styleWeek={..._.styleWeek,width:`calc(${h}% - 2px)`,left:`${b+h*v}%`,"z-index":v+1}})}})})}findOverlappingGroups(e){if(0===e.length)return[];const a=[...e].sort((d,p)=>d.startTimeMs-p.startTimeMs),s=[];let i=[a[0]];for(let d=1;d<a.length;d++){const p=a[d];i.some(l=>this.tasksOverlap(l,p))?i.push(p):(i.length>0&&s.push(i),i=[p])}return i.length>0&&s.push(i),s}tasksOverlap(e,a){return e.startTimeMs<a.endTimeMs&&a.startTimeMs<e.endTimeMs}getDayOfWeek(e){return new Date(e).getDay()}getIconForTaskType(e){switch(e){case"collective":return"assets/icon/course-collective-icon.png";case"private":return"assets/icon/course-private-icon.png";case"other":return"assets/icon/course-other-icon.png"}}openAvailables(e,a){e&&a?this.goTo("calendar-available","day",a,e):this.showDay?this.goTo("calendar-available","day",f(this.selectedDate).format("YYYY-MM-DD")):this.goTo("calendar-available")}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY}onTouchEnd(e){const i=e.changedTouches[0].screenX-this.touchStartX,d=e.changedTouches[0].screenY-this.touchStartY;Math.abs(i)>Math.abs(d)&&Math.abs(i)>this.SWIPE_THRESHOLD&&(i>0?this.showMonth?this.previousMonth():this.showWeek?this.previousWeek():this.showDay&&this.previousDay():this.showMonth?this.nextMonth():this.showWeek?this.nextWeek():this.showDay&&this.nextDay())}goTo(...e){this.router.navigate(e)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(o=c).\u0275fac=function(e){return new(e||o)(t.rXU(x.Ix),t.rXU(x.nX),t.rXU(Y.$),t.rXU(E.O),t.rXU(W.H),t.rXU(X.R),t.rXU(B.tw),t.rXU(z.D),t.rXU(S.c$),t.rXU(H.J))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-calendar"]],decls:33,vars:36,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-12"],[1,"header-section-title"],["src","assets/icon/icons-outline-calendar-1-blue.svg"],[1,"header-section-menu","header-menu-wrapper","cursor-pointer",3,"click"],["src","assets/icon/icon-menu.png"],["class","menu-badge",3,"ngClass",4,"ngIf"],[1,"mt-24","mb-32","flex-buttons"],[1,"montserrat","flex-buttons-button","cursor-pointer",3,"ngClass","click"],["class","flex-members",4,"ngIf"],["class","padding-wrapper",3,"touchstart","touchend",4,"ngIf"],[1,"montserrat","button-floating","btn-back-primary","uppercase",3,"click"],["section","calendar"],[1,"menu-badge",3,"ngClass"],[1,"flex-members"],[1,"box-arrow","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg"],[1,"montserrat","month-title"],["src","assets/icon/icons-outline-arrow-right-3-white.svg"],[1,"padding-wrapper",3,"touchstart","touchend"],[1,"calendar","mb-24","background-color-dark"],[1,"weekdays"],["class","montserrat uppercase",4,"ngFor","ngForOf"],[1,"days"],[4,"ngFor","ngForOf"],[1,"montserrat","uppercase"],[1,"montserrat","day-span-a",3,"ngClass","click"],[1,"day-span-b","cursor-pointer","position-relative"],[1,"day-on-top"],["class","active-today",4,"ngIf"],["class","top-position-bar private-calendar full-position",4,"ngIf"],["class","top-position-bar collective-calendar full-position",4,"ngIf"],["class","top-position-bar other-calendar full-position",4,"ngIf"],["class","top-position-bar private-calendar half-position left-border left-half",4,"ngIf"],["class","top-position-bar collective-calendar half-position right-border right-half",4,"ngIf"],["class","top-position-bar other-calendar half-position right-border right-half",4,"ngIf"],["class","top-position-bar collective-calendar half-position left-border left-half",4,"ngIf"],["class","top-position-bar private-calendar third-position left-border left-third",4,"ngIf"],["class","top-position-bar collective-calendar third-position middle-border middle-third",4,"ngIf"],["class","top-position-bar other-calendar third-position right-border right-third",4,"ngIf"],["class","block-calendar full-position",3,"ngClass",4,"ngIf"],["class","block-payed-calendar full-position",3,"ngClass",4,"ngIf"],["class","block-calendar half-position left-border left-half",3,"ngClass",4,"ngIf"],["class","block-payed-calendar half-position right-border right-half",3,"ngClass",4,"ngIf"],[1,"active-today"],[1,"top-position-bar","private-calendar","full-position"],[1,"top-position-bar","collective-calendar","full-position"],[1,"top-position-bar","other-calendar","full-position"],[1,"top-position-bar","private-calendar","half-position","left-border","left-half"],[1,"top-position-bar","collective-calendar","half-position","right-border","right-half"],[1,"top-position-bar","other-calendar","half-position","right-border","right-half"],[1,"top-position-bar","collective-calendar","half-position","left-border","left-half"],[1,"top-position-bar","private-calendar","third-position","left-border","left-third"],[1,"top-position-bar","collective-calendar","third-position","middle-border","middle-third"],[1,"top-position-bar","other-calendar","third-position","right-border","right-third"],[1,"block-calendar","full-position",3,"ngClass"],[1,"block-payed-calendar","full-position",3,"ngClass"],[1,"block-calendar","half-position","left-border","left-half",3,"ngClass"],[1,"block-payed-calendar","half-position","right-border","right-half",3,"ngClass"],[1,"background-color-dark","week-calendar-wrapper","mt-24"],[1,"week-calendar-days"],["class","color-light",4,"ngFor","ngForOf"],[1,"week-calendar-b"],[1,"hour-section"],["class","montserrat color-light hour-data",4,"ngFor","ngForOf"],[1,"task-section"],["class","task-data",4,"ngFor","ngForOf"],[3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"color-light"],[1,"montserrat","color-light","hour-data"],[1,"task-data"],[3,"ngClass","ngStyle","click"],[1,"task-icon-only",3,"src"],[1,"background-color-dark","week-calendar","mt-24"],["class","task-content",4,"ngIf"],["class","task-content-block",4,"ngIf"],[1,"task-content"],["src","assets/icon/course-collective-icon.png",1,"task-content-img"],[1,"task-content-text"],[1,"montserrat"],[1,"montserrat","color-light"],[4,"ngIf"],[1,"task-content-icon-list"],[1,"task-content-icon"],["src","assets/icon/icon-user-tick.png"],["src","assets/icon/icon-calendar-tick.png"],["src","assets/icon/course-private-icon.png",1,"task-content-img"],["src","assets/icon/course-other-icon.png",1,"task-content-img"],[1,"task-content-block"]],template:function(e,a){1&e&&(t.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),t.nrm(5,"img",4),t.j41(6,"div"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"div",5),t.bIt("click",function(){return a.toggleMenu()}),t.nrm(10,"img",6),t.DNE(11,U,2,4,"div",7),t.nI1(12,"async"),t.k0s()(),t.j41(13,"div",8)(14,"div",9),t.bIt("click",function(){return a.calculateMonthRange(),a.showMonth=!0,a.showWeek=!1,a.showDay=!1}),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"div",9),t.bIt("click",function(){return a.calculateWeekRange(),a.showMonth=!1,a.showWeek=!0,a.showDay=!1}),t.EFF(18),t.nI1(19,"translate"),t.k0s(),t.j41(20,"div",9),t.bIt("click",function(){return a.calculateDayRange(),a.showMonth=!1,a.showWeek=!1,a.showDay=!0}),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.DNE(23,L,7,2,"div",10),t.DNE(24,J,7,1,"div",10),t.DNE(25,K,7,4,"div",10),t.k0s(),t.DNE(26,vt,6,2,"div",11),t.DNE(27,Mt,10,4,"div",11),t.DNE(28,It,7,3,"div",11),t.k0s(),t.j41(29,"div",12),t.bIt("click",function(){return a.openAvailables()}),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.nrm(32,"app-footer",13)),2&e&&(t.R7$(7),t.JRh(t.bMT(8,15,"diary")),t.R7$(4),t.Y8G("ngIf",t.bMT(12,17,a.unreadCount$)),t.R7$(3),t.Y8G("ngClass",t.l_i(27,I,a.showMonth,!a.showMonth)),t.R7$(1),t.SpI(" ",t.bMT(16,19,"month")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(30,I,a.showWeek,!a.showWeek)),t.R7$(1),t.SpI(" ",t.bMT(19,21,"week")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(33,I,a.showDay,!a.showDay)),t.R7$(1),t.SpI(" ",t.bMT(22,23,"day")," "),t.R7$(2),t.Y8G("ngIf",a.showMonth),t.R7$(1),t.Y8G("ngIf",a.showWeek),t.R7$(1),t.Y8G("ngIf",a.showDay),t.R7$(1),t.Y8G("ngIf",a.showMonth),t.R7$(1),t.Y8G("ngIf",a.showWeek),t.R7$(1),t.Y8G("ngIf",a.showDay),t.R7$(2),t.SpI(" ",t.bMT(31,25,"availability")," "))},dependencies:[C.YU,C.Sq,C.bT,C.B3,T.W9,V.n,C.Jj,S.D9],styles:['.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-section-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.menu-badge[_ngcontent-%COMP%]{min-width:16px;height:16px;padding:0 4px;border-radius:8px;background:var(--ion-color-primary);color:#fff;font-size:10px;line-height:16px;text-align:center;position:absolute;top:-8px;right:-10px}.menu-badge-hidden[_ngcontent-%COMP%]{display:none}.month-title[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:500}.flex-members[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.box-arrow[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#2b303b}.box-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.filter-floating[_ngcontent-%COMP%]{width:54px;position:fixed;right:12px;bottom:calc(140px + var(--teach-footer-extra-padding, 0px));cursor:pointer}.button-floating[_ngcontent-%COMP%]{position:fixed;right:12px;bottom:calc(140px + var(--teach-footer-extra-padding, 0px));cursor:pointer;display:flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:40px;width:-moz-fit-content;width:fit-content;font-weight:600;font-size:14px}.flex-buttons[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;gap:4px}.flex-buttons-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:14px;width:100%;padding:6px 0;border-radius:4px}.calendar[_ngcontent-%COMP%]{color:#fff;width:100%;box-sizing:border-box;padding:16px;border-radius:8px}.header-calendar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.header-calendar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.header-calendar-arrows[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.header-calendar-arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:24px}.weekdays[_ngcontent-%COMP%], .days[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.weekdays[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1 0 calc(14.28% - 6px);height:40px;line-height:4px;text-align:center;margin:3px;font-size:11px;box-sizing:border-box}.days[_ngcontent-%COMP%]   .day-span-a[_ngcontent-%COMP%]{flex:1 0 calc(14.28% - 6px);height:40px;line-height:40px;text-align:center;margin:3px;font-size:16px!important;font-weight:500;box-sizing:border-box}.days[_ngcontent-%COMP%]   .day-span-b[_ngcontent-%COMP%]{display:flex;justify-content:center;width:32px;height:32px;align-items:center}.light-opacity[_ngcontent-%COMP%]{opacity:.6}.very-light-opacity[_ngcontent-%COMP%]{opacity:.4}.day-on-top[_ngcontent-%COMP%]{z-index:2}.active-calendar[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:8px;background:var(--ion-color-primary);position:absolute;bottom:-7px;left:50%;transform:translate(-50%)}.top-position-bar[_ngcontent-%COMP%]{height:5px;border-radius:8px;position:absolute;bottom:2px;left:50%;transform:translate(-50%)}.bottom-position-bar[_ngcontent-%COMP%]{height:5px;border-radius:8px;position:absolute;bottom:-5px;left:50%;transform:translate(-50%)}.full-position[_ngcontent-%COMP%]{width:30px}.half-position[_ngcontent-%COMP%]{width:15px}.third-position[_ngcontent-%COMP%]{width:10px}.block-calendar[_ngcontent-%COMP%]{background:#89add1}.block-payed-calendar[_ngcontent-%COMP%]{background:#945db3}.private-calendar[_ngcontent-%COMP%]{background:rgb(42,201,64)}.collective-calendar[_ngcontent-%COMP%]{background:rgb(251,153,23)}.other-calendar[_ngcontent-%COMP%]{background:rgb(241,36,120)}.left-border[_ngcontent-%COMP%]{border-radius:8px 0 0 8px!important}.right-border[_ngcontent-%COMP%]{border-radius:0 8px 8px 0!important}.middle-border[_ngcontent-%COMP%]{border-radius:0!important}.left-half[_ngcontent-%COMP%]{transform:translate(-100%)}.right-half[_ngcontent-%COMP%]{transform:translate(0)}.left-third[_ngcontent-%COMP%]{transform:translate(-150%)}.right-third[_ngcontent-%COMP%]{transform:translate(50%)}.block-half[_ngcontent-%COMP%]{width:16px;transform:translate(-100%);border-radius:8px 0 0 8px}.block-payed-half[_ngcontent-%COMP%]{width:16px;transform:translate(0);border-radius:0 8px 8px 0}.active-today[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:28px;background:var(--ion-color-primary);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.active-collective[_ngcontent-%COMP%]{opacity:1;background-color:#d9b12099;border-radius:50%;cursor:pointer;transition:all .2s ease-in-out}.active-collective-selected[_ngcontent-%COMP%]{opacity:1;background-color:#d9b120;border-radius:50%;cursor:pointer;transition:all .2s ease-in-out}.active-private[_ngcontent-%COMP%]{opacity:1;background-color:#c2d94599;border-radius:50%;cursor:pointer;transition:all .2s ease-in-out}.active-private-selected[_ngcontent-%COMP%]{opacity:1;background-color:#c2d945;border-radius:50%;cursor:pointer;transition:all .2s ease-in-out}.week-calendar[_ngcontent-%COMP%]{width:100%;border-radius:8px;padding:16px;display:flex;align-items:flex-start}.week-calendar-wrapper[_ngcontent-%COMP%]{width:100%;border-radius:8px;padding:16px}.week-calendar-b[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start}.week-calendar[_ngcontent-%COMP%], .week-calendar-wrapper[_ngcontent-%COMP%]{--calendar-hour-height: 54px;--calendar-hour-gap: 3px;--calendar-hour-block: calc(var(--calendar-hour-height) + var(--calendar-hour-gap));--calendar-hour-offset: 0px}.week-calendar-days[_ngcontent-%COMP%]{width:100%;padding-left:58px;display:block;text-align:center}.week-calendar-days[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;width:14.25%;font-size:14px;text-align:center;height:40px;line-height:40px}.hour-section[_ngcontent-%COMP%]{width:58px;min-width:58px;padding-top:var(--calendar-hour-offset)}.hour-data[_ngcontent-%COMP%]{font-size:14px;text-align:left;height:var(--calendar-hour-block);line-height:1;display:flex;align-items:flex-start;margin:0;position:relative;top:-6px}.task-section[_ngcontent-%COMP%]{width:100%;position:relative;padding-top:var(--calendar-hour-offset)}.task-data[_ngcontent-%COMP%]{width:100%;height:var(--calendar-hour-block);margin:0;position:relative}.task-data[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;right:0;top:0;height:1px;background:#444953}.collective-icon-only[_ngcontent-%COMP%]{position:absolute;width:calc(14.25% - 4px);background:rgba(251,153,23,.3);border:1px solid rgba(251,153,23,.6);border-radius:8px;cursor:pointer;box-sizing:border-box}.private-icon-only[_ngcontent-%COMP%]{position:absolute;width:calc(14.25% - 4px);background:rgba(42,201,64,.3);border:1px solid rgba(42,201,64,.6);border-radius:8px;cursor:pointer;box-sizing:border-box}.other-icon-only[_ngcontent-%COMP%]{position:absolute;width:calc(14.25% - 4px);background:rgba(241,36,120,.3);border:1px solid rgba(241,36,120,.6);border-radius:8px;cursor:pointer;box-sizing:border-box}.block-icon-only[_ngcontent-%COMP%], .block-payed-icon-only[_ngcontent-%COMP%]{position:absolute;width:calc(14.25% - 4px);border-radius:8px;cursor:pointer;box-sizing:border-box}.collective-icon-full[_ngcontent-%COMP%]{position:absolute;width:100%;background:rgba(251,153,23,.3);border:1px solid rgba(251,153,23,.6);border-radius:8px;cursor:pointer;box-sizing:border-box}.private-icon-full[_ngcontent-%COMP%]{position:absolute;width:100%;background:rgba(42,201,64,.3);border:1px solid rgba(42,201,64,.6);border-radius:8px;cursor:pointer;box-sizing:border-box}.other-icon-full[_ngcontent-%COMP%]{position:absolute;width:100%;background:rgba(241,36,120,.3);border:1px solid rgba(241,36,120,.6);border-radius:8px;cursor:pointer;box-sizing:border-box}.block-icon-full[_ngcontent-%COMP%], .block-payed-icon-full[_ngcontent-%COMP%]{position:absolute;width:100%;border-radius:8px;cursor:pointer;box-sizing:border-box}.task-content-block[_ngcontent-%COMP%]{background:rgba(7,10,14,.7);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:13px;color:#fff;font-weight:500;text-align:center;padding:8px 16px;border-radius:8px;max-width:220px;width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box}.task-icon-only[_ngcontent-%COMP%]{height:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.task-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;position:absolute;top:50%;padding:0 14px 0 12px;transform:translateY(-50%);width:100%;box-sizing:border-box;overflow:hidden}.task-content-img[_ngcontent-%COMP%]{height:20px;flex-shrink:0}.task-content-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px;min-width:0;flex:1}.task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.task-content-icon-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex-shrink:0}.task-content-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;white-space:nowrap}.task-content-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;flex-shrink:0}.task-content-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.collective-icon-full.overlapped[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .private-icon-full.overlapped[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .other-icon-full.overlapped[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .block-icon-full.overlapped[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .block-payed-icon-full.overlapped[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%]{padding:0 6px;gap:4px}.collective-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .private-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .other-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .block-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .block-payed-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}.collective-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .private-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .other-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .block-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .block-payed-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.collective-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-icon-list[_ngcontent-%COMP%], .private-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-icon-list[_ngcontent-%COMP%], .other-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-icon-list[_ngcontent-%COMP%], .block-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-icon-list[_ngcontent-%COMP%], .block-payed-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-icon-list[_ngcontent-%COMP%]{display:none}.collective-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-img[_ngcontent-%COMP%], .private-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-img[_ngcontent-%COMP%], .other-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-img[_ngcontent-%COMP%], .block-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-img[_ngcontent-%COMP%], .block-payed-icon-full.overlapped[_ngcontent-%COMP%]   .task-content-img[_ngcontent-%COMP%]{height:16px}.collective-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .private-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .other-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .block-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%], .block-payed-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content[_ngcontent-%COMP%]{flex-direction:column;padding:4px;gap:2px;justify-content:center}.collective-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%], .private-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%], .other-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%], .block-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%], .block-payed-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]{align-items:center;text-align:center}.collective-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .private-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .other-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .block-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .block-payed-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:11px}.collective-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .private-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .other-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .block-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .block-payed-icon-full.very-narrow[_ngcontent-%COMP%]   .task-content-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:9px}']}),c})()}];let Gt=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[x.iI.forChild(jt),x.iI]}),c})();var Ft=u(5553);let Nt=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[C.MD,$.YN,T.bv,Gt,Ft.h,S.h]}),c})()},4843:(N,w,u)=>{u.d(w,{_:()=>T});var C=u(9350),$=u(7707);function T(x,M){const R="object"==typeof M;return new Promise((f,t)=>{const Y=new $.Ms({next:E=>{f(E),Y.unsubscribe()},error:t,complete:()=>{R?f(M.defaultValue):t(new C.G)}});x.subscribe(Y)})}}}]);