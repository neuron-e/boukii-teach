"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6012],{6012:(W,_,g)=>{g.r(_),g.d(_,{CourseGroupPageModule:()=>H});var d=g(6814),v=g(6223),x=g(3582),l=g(5367),m=g(5861),h=g(4036),u=g(6676),t=g(6689),P=g(2234),C=g(5693),O=g(3271),M=g(2425),Z=g(7364);function y(e,i){if(1&e&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.courseBookings.name," ")}}function T(e,i){1&e&&(t.ynx(0),t._uU(1," Collectif "),t.BQk())}function S(e,i){1&e&&(t.ynx(0),t._uU(1," Private "),t.BQk())}function w(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.courseSport.name," ")}}function I(e,i){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,T,2,0,"ng-container",15),t.YNc(2,S,2,0,"ng-container",15),t.YNc(3,w,2,1,"ng-container",15),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",1==o.courseBookings.course_type),t.xp6(1),t.Q6J("ngIf",2==o.courseBookings.course_type),t.xp6(1),t.Q6J("ngIf",o.courseSport&&o.sports.length)}}function k(e,i){1&e&&t._UZ(0,"img",32)}function A(e,i){if(1&e&&t._UZ(0,"img",33),2&e){const o=t.oxw(2);t.Q6J("src",o.monitorSubgroup.monitor.image?o.monitorSubgroup.monitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH)}}function G(e,i){if(1&e&&(t.TgZ(0,"div",34),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.AsE("",o.monitorSubgroup.monitor.first_name," ",o.monitorSubgroup.monitor.last_name,"")}}function Y(e,i){1&e&&(t.TgZ(0,"div",34),t._uU(1,"Pas moniteur"),t.qZA())}const b=function(e){return{background:e}};function U(e,i){if(1&e&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.Q6J("ngStyle",t.VKq(2,b,o.monitorSubgroup.degree_data.color)),t.xp6(1),t.hij(" ",o.monitorSubgroup.degree_data.annotation," ")}}function B(e,i){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.AsE(" ",o.monitorSubgroup.degree_data.annotation,"-",o.monitorSubgroup.subgroup_order," ")}}function J(e,i){if(1&e&&(t.TgZ(0,"div",16)(1,"div",17),t.YNc(2,k,1,0,"img",18),t.YNc(3,A,1,1,"img",19),t.qZA(),t.TgZ(4,"div",20)(5,"div",21)(6,"div",22),t.YNc(7,G,2,2,"div",23),t.YNc(8,Y,2,0,"div",23),t.YNc(9,U,2,4,"div",24),t.qZA(),t.TgZ(10,"div",25)(11,"span",26),t._uU(12),t.qZA(),t.YNc(13,B,2,2,"div",27),t.qZA(),t.TgZ(14,"div",28)(15,"div",29),t._UZ(16,"img",30),t.TgZ(17,"span",26),t._uU(18),t.qZA()(),t.TgZ(19,"div",29),t._UZ(20,"img",31),t.TgZ(21,"span",26),t._uU(22),t.qZA()()()()()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",!o.monitorSubgroup.monitor),t.xp6(1),t.Q6J("ngIf",o.monitorSubgroup.monitor),t.xp6(4),t.Q6J("ngIf",o.monitorSubgroup.monitor),t.xp6(1),t.Q6J("ngIf",!o.monitorSubgroup.monitor),t.xp6(1),t.Q6J("ngIf",o.monitorSubgroup.degree_data&&o.degrees.length),t.xp6(3),t.Oqu(o.monitorSubgroup.monitor_id==o.monitorData.id?"Vous":"Professeur"),t.xp6(1),t.Q6J("ngIf",o.monitorSubgroup.degree_data&&o.degrees.length),t.xp6(5),t.AsE("",o.monitorSubgroup.bookings_number,"/",o.monitorSubgroup.max_participants,""),t.xp6(4),t.AsE("",o.courseDateIndex+1,"/",o.courseBookings.course_dates.length,"")}}function Q(e,i){1&e&&t._UZ(0,"img",32)}function z(e,i){if(1&e&&t._UZ(0,"img",33),2&e){const o=t.oxw().$implicit;t.Q6J("src",o.monitor.image?o.monitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH)}}function D(e,i){if(1&e&&(t.TgZ(0,"div",34),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.AsE("",o.monitor.first_name," ",o.monitor.last_name,"")}}function N(e,i){1&e&&(t.TgZ(0,"div",34),t._uU(1,"Pas moniteur"),t.qZA())}function q(e,i){if(1&e&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.Q6J("ngStyle",t.VKq(2,b,o.degree_data.color)),t.xp6(1),t.hij(" ",o.degree_data.annotation," ")}}function E(e,i){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.AsE(" ",o.degree_data.annotation,"-",o.subgroup_order," ")}}function j(e,i){if(1&e&&(t.TgZ(0,"div",38)(1,"div",17),t.YNc(2,Q,1,0,"img",18),t.YNc(3,z,1,1,"img",19),t.qZA(),t.TgZ(4,"div",20)(5,"div",21)(6,"div",22),t.YNc(7,D,2,2,"div",23),t.YNc(8,N,2,0,"div",23),t.YNc(9,q,2,4,"div",24),t.qZA(),t.TgZ(10,"div",25)(11,"span",26),t._uU(12),t.qZA(),t.YNc(13,E,2,2,"div",27),t.qZA(),t.TgZ(14,"div",28)(15,"div",29),t._UZ(16,"img",30),t.TgZ(17,"span",26),t._uU(18),t.qZA()(),t.TgZ(19,"div",29),t._UZ(20,"img",31),t.TgZ(21,"span",26),t._uU(22),t.qZA()()()()()()),2&e){const o=i.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!o.monitor),t.xp6(1),t.Q6J("ngIf",o.monitor),t.xp6(4),t.Q6J("ngIf",o.monitor),t.xp6(1),t.Q6J("ngIf",!o.monitor),t.xp6(1),t.Q6J("ngIf",o.degree_data&&n.degrees.length),t.xp6(3),t.Oqu(o.monitor_id==n.monitorData.id?"Vous":"Professeur"),t.xp6(1),t.Q6J("ngIf",o.degree_data&&n.degrees.length),t.xp6(5),t.AsE("",o.bookings_number,"/",o.max_participants,""),t.xp6(4),t.AsE("",n.courseDateIndex+1,"/",n.courseBookings.course_dates.length,"")}}function F(e,i){if(1&e&&(t.TgZ(0,"div",10),t.YNc(1,j,23,11,"div",37),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.restSubgroups)}}const R=[{path:"",component:(()=>{var e;class i{constructor(n,s,r,c,a,p,f){this.router=n,this.activatedRoute=s,this.monitorDataService=r,this.sharedDataService=c,this.teachService=a,this.toastr=p,this.spinnerService=f,this.degrees=[],this.sports=[]}ngOnInit(){var n=this;return(0,m.Z)(function*(){n.subscription=n.monitorDataService.getMonitorData().subscribe(function(){var s=(0,m.Z)(function*(r){if(r){n.monitorData=r;try{n.degrees=yield(0,h.z)(n.sharedDataService.fetchDegrees(n.monitorData.active_school)),n.sports=yield(0,h.z)(n.sharedDataService.fetchSports(n.monitorData.active_school))}catch(c){console.error("Error fetching data:",c),n.toastr.error("Erreur lors du chargement des donn\xe9es")}n.activatedRoute.params.subscribe(function(){var c=(0,m.Z)(function*(a){n.bookingId=+a.id,n.dateBooking=a.date,n.courseId=+a.course,n.hourStart=a.hour,n.groupId=+a.group,n.subgroupId=+a.subgroup,n.bookingId&&n.dateBooking&&n.courseId&&n.hourStart&&n.groupId&&n.subgroupId?(n.spinnerService.show(),n.loadBookings()):n.goTo("home")});return function(a){return c.apply(this,arguments)}}())}});return function(r){return s.apply(this,arguments)}}())})()}loadBookings(){this.teachService.getData("teach/courses",this.courseId).subscribe(n=>{console.log(n),this.courseBookings=n.data,this.courseBookings.course_dates.sort((r,c)=>new Date(r.date).getTime()-new Date(c.date).getTime()),this.courseSport=this.sports.find(r=>r.id===this.courseBookings.sport_id)||this.sports[0],this.subgroupBookings=this.courseBookings.booking_users.reduce((r,c)=>(r[c.course_subgroup_id]?r[c.course_subgroup_id]+=1:r[c.course_subgroup_id]=1,r),{});const s=this.courseBookings.course_dates.find((r,c)=>r.date.split("T")[0]===this.dateBooking&&r.hour_start===this.hourStart&&(this.courseDateIndex=c,!0));if(s){console.log("Matching course date:",s);const r=[];s.course_groups.forEach(c=>{c.course_subgroups.forEach((a,p)=>{const f=this.degrees.find(L=>L.id===a.degree_id)||this.degrees[0],K=this.subgroupBookings[a.id]||0;r.push({...a,subgroup_order:p+1,degree_data:f,bookings_number:K})})}),this.monitorSubgroup=r.find(c=>c.id===this.subgroupId),this.restSubgroups=r.filter(c=>c.id!==this.subgroupId),console.log("Specified Subgroup:",this.monitorSubgroup),console.log("Remaining Subgroups:",this.restSubgroups)}else console.log("No matching course date found");this.spinnerService.hide()},n=>{console.error("There was an error!",n),this.spinnerService.hide()})}getBirthYears(n){const s=u(n);return u().diff(s,"years")}getDateFormat(n){return u(n).format("DD-MM-YYYY")}isDateBeforeOrEqualToToday(n){const s=u(n).startOf("day"),r=u().startOf("day");return s.isSameOrBefore(r)}goTo(...n){this.router.navigate(n)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(e=i).\u0275fac=function(n){return new(n||e)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(P.q),t.Y36(C.g),t.Y36(O.b),t.Y36(M._W),t.Y36(Z.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-course-group"]],decls:20,vars:4,consts:[[1,"content-size","dark-background","status-bar-overlap"],[1,"padding-wrapper"],[1,"header-content","mb-8"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],["class","header-top-title",4,"ngIf"],["class","montserrat color-light header-top-subtitle",4,"ngIf"],[1,"menu-section-content","mb-24"],[1,"menu-section-title"],[1,"menu-section-content","mt-24","mb-12"],[1,"menu-section-title-b","color-light"],[1,"member-list"],["class","pb-8 mb-8 member-list-item no-border",4,"ngIf"],["class","member-list",4,"ngIf"],[1,"header-top-title"],[1,"montserrat","color-light","header-top-subtitle"],[4,"ngIf"],[1,"pb-8","mb-8","member-list-item","no-border"],[1,"member-list-item-img"],["src","assets/icon/icons-outline-default-avatar.svg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"member-item-flex"],[1,"member-item-content"],[1,"member-item-title"],["class","montserrat",4,"ngIf"],["class","box-selector-level color-light",3,"ngStyle",4,"ngIf"],[1,"member-item-subtitle"],[1,"montserrat","color-light"],["class","box-selector-subgroup",4,"ngIf"],[1,"member-item-data"],[1,"task-content-icon"],["src","assets/icon/icon-user-tick.png"],["src","assets/icon/icon-calendar-tick.png"],["src","assets/icon/icons-outline-default-avatar.svg"],[3,"src"],[1,"montserrat"],[1,"box-selector-level","color-light",3,"ngStyle"],[1,"box-selector-subgroup"],["class","pb-8 mb-8 member-list-item",4,"ngFor","ngForOf"],[1,"pb-8","mb-8","member-list-item"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),t.NdJ("click",function(){return s.goTo("course-detail",s.bookingId,s.dateBooking)}),t.qZA(),t.YNc(5,y,2,1,"div",4),t.qZA(),t.YNc(6,I,4,3,"div",5),t.qZA(),t.TgZ(7,"div",1)(8,"div",6)(9,"div",7),t._uU(10,"Groupes"),t.qZA()(),t.TgZ(11,"div",8)(12,"div",9),t._uU(13,"MON GROUPE"),t.qZA()(),t.TgZ(14,"div",10),t.YNc(15,J,23,11,"div",11),t.qZA(),t.TgZ(16,"div",8)(17,"div",9),t._uU(18,"AUTRES GROUPES"),t.qZA()(),t.YNc(19,F,2,1,"div",12),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngIf",s.courseBookings),t.xp6(1),t.Q6J("ngIf",s.courseBookings),t.xp6(9),t.Q6J("ngIf",s.monitorSubgroup),t.xp6(4),t.Q6J("ngIf",s.restSubgroups&&s.restSubgroups.length))},dependencies:[d.sg,d.O5,d.PC,x.W2],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-top-subtitle[_ngcontent-%COMP%]{font-size:14px;display:block;text-align:center}.opacity-light[_ngcontent-%COMP%]{opacity:.6}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}.box-radius[_ngcontent-%COMP%]{border-radius:8px}.content-flex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.content-flex-top-img[_ngcontent-%COMP%]{width:44px}.content-flex-top-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.content-flex-top-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:22px;font-weight:600}.content-flex-top-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.menu-section-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.menu-section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.menu-section-title-b[_ngcontent-%COMP%]{font-size:13px}.menu-section-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;background-color:var(--ion-color-primary);padding:5px 8px;border-radius:40px;font-size:12px;font-weight:500;display:flex;align-items:center;justify-content:center}.menu-section-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.menu-section-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.menu-section-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.list-box-selector-b[_ngcontent-%COMP%]{width:100%;display:flex;padding:8px 0;gap:12px;justify-content:space-between}.background-grey-translucent[_ngcontent-%COMP%]{background:rgba(65,69,78,.4)}.box-selector-type[_ngcontent-%COMP%]{display:flex;padding:12px 6px;flex-direction:column;gap:8px;align-items:center;border-radius:8px;justify-content:flex-start;text-align:center}.box-selector-type-red[_ngcontent-%COMP%]{color:#faafaf;background:#613136}.box-selector-type[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-selector-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.box-selector-type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.member-list[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:column}.member-list-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;width:100%;border-bottom:1px solid #444953}.member-list-item-img[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;border-radius:48px;position:relative}.member-list-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.member-item-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.member-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;width:100%}.member-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.member-item-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.member-item-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.member-item-subtitle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;display:flex;align-items:center;gap:2px}.member-item-bullet[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:6px;background:#e9484a}.member-item-icon[_ngcontent-%COMP%]{width:20px}.no-border[_ngcontent-%COMP%]{border:none!important}.box-selector-level[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px;border-radius:20px}.box-selector-subgroup[_ngcontent-%COMP%]{font-size:12px;color:#fff}.member-item-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task-content-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.task-content-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.task-content-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}"]}),i})()}];let V=(()=>{var e;class i{}return(e=i).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(R),l.Bz]}),i})();var $=g(822);let H=(()=>{var e;class i{}return(e=i).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,v.u5,x.Pc,V,$.K]}),i})()}}]);