"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6812],{2726:(le,_,g)=>{g.d(_,{Uw:()=>H,fo:()=>R,ur:()=>O,xz:()=>M});var u=g(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var O=function(r){return r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",r}(O||{});class M extends Error{constructor(e,n,o){super(e),this.message=e,this.code=n,this.data=o}}const A=r=>{var e,n,o,a,i;const l=r.CapacitorCustomPlatform||null,s=r.Capacitor||{},h=s.Plugins=s.Plugins||{},d=r.CapacitorPlatforms,j=(null===(e=null==d?void 0:d.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==l?l.name:(r=>{var e,n;return null!=r&&r.androidBridge?"android":null!==(n=null===(e=null==r?void 0:r.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(r)),de=(null===(n=null==d?void 0:d.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==j()),fe=(null===(o=null==d?void 0:d.currentPlatform)||void 0===o?void 0:o.isPluginAvailable)||(p=>{const m=B.get(p);return!!(null!=m&&m.platforms.has(j())||se(p))}),se=(null===(a=null==d?void 0:d.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||(p=>{var m;return null===(m=s.PluginHeaders)||void 0===m?void 0:m.find($=>$.name===p)}),B=new Map,ve=(null===(i=null==d?void 0:d.currentPlatform)||void 0===i?void 0:i.registerPlugin)||((p,m={})=>{const $=B.get(p);if($)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),$.proxy;const k=j(),T=se(p);let L;const Pe=function(){var v=(0,u.Z)(function*(){return!L&&k in m?L=L="function"==typeof m[k]?yield m[k]():m[k]:null!==l&&!L&&"web"in m&&(L=L="function"==typeof m.web?yield m.web():m.web),L});return function(){return v.apply(this,arguments)}}(),ee=v=>{let P;const E=(...U)=>{const D=Pe().then(w=>{const N=((v,P)=>{var E,U;if(!T){if(v)return null===(U=v[P])||void 0===U?void 0:U.bind(v);throw new M(`"${p}" plugin is not implemented on ${k}`,O.Unimplemented)}{const D=null==T?void 0:T.methods.find(w=>P===w.name);if(D)return"promise"===D.rtype?w=>s.nativePromise(p,P.toString(),w):(w,N)=>s.nativeCallback(p,P.toString(),w,N);if(v)return null===(E=v[P])||void 0===E?void 0:E.bind(v)}})(w,v);if(N){const Q=N(...U);return P=null==Q?void 0:Q.remove,Q}throw new M(`"${p}.${v}()" is not implemented on ${k}`,O.Unimplemented)});return"addListener"===v&&(D.remove=(0,u.Z)(function*(){return P()})),D};return E.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:v,writable:!1,configurable:!1}),E},ae=ee("addListener"),ce=ee("removeListener"),we=(v,P)=>{const E=ae({eventName:v},P),U=function(){var w=(0,u.Z)(function*(){const N=yield E;ce({eventName:v,callbackId:N},P)});return function(){return w.apply(this,arguments)}}(),D=new Promise(w=>E.then(()=>w({remove:U})));return D.remove=(0,u.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield U()}),D},te=new Proxy({},{get(v,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?we:ae;case"removeListener":return ce;default:return ee(P)}}});return h[p]=te,B.set(p,{name:p,proxy:te,platforms:new Set([...Object.keys(m),...T?[k]:[]])}),te});return s.convertFileSrc||(s.convertFileSrc=p=>p),s.getPlatform=j,s.handleError=p=>r.console.error(p),s.isNativePlatform=de,s.isPluginAvailable=fe,s.pluginMethodNoop=(p,m,$)=>Promise.reject(`${$} does not have an implementation of "${m}".`),s.registerPlugin=ve,s.Exception=M,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},Z=(r=>r.Capacitor=A(r))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),R=Z.registerPlugin;class H{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){var o=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const l=function(){var h=(0,u.Z)(function*(){return o.removeListener(e,n)});return function(){return h.apply(this,arguments)}}(),s=Promise.resolve({remove:l});return Object.defineProperty(s,"remove",{value:(h=(0,u.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield l()}),function(){return h.apply(this,arguments)})}),s;var h}removeAllListeners(){var e=this;return(0,u.Z)(function*(){e.listeners={};for(const n in e.windowListeners)e.removeWindowListener(e.windowListeners[n]);e.windowListeners={}})()}notifyListeners(e,n){const o=this.listeners[e];o&&o.forEach(a=>a(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:o=>{this.notifyListeners(n,o)}}}unimplemented(e="not implemented"){return new Z.Exception(e,O.Unimplemented)}unavailable(e="not available"){return new Z.Exception(e,O.Unavailable)}removeListener(e,n){var o=this;return(0,u.Z)(function*(){const a=o.listeners[e];if(!a)return;const i=a.indexOf(n);o.listeners[e].splice(i,1),o.listeners[e].length||o.removeWindowListener(o.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const K=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),q=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class X extends H{getCookies(){return(0,u.Z)(function*(){const e=document.cookie,n={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[a,i]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=q(a).trim(),i=q(i).trim(),n[a]=i}),n})()}setCookie(e){return(0,u.Z)(function*(){try{const n=K(e.key),o=K(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),l=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${o||""}${a}; path=${i}; ${l};`}catch(n){return Promise.reject(n)}})()}deleteCookie(e){return(0,u.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,u.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,u.Z)(function*(){try{yield e.clearCookies()}catch(n){return Promise.reject(n)}})()}}R("CapacitorCookies",{web:()=>new X});const y=function(){var r=(0,u.Z)(function*(e){return new Promise((n,o)=>{const a=new FileReader;a.onload=()=>{const i=a.result;n(i.indexOf(",")>=0?i.split(",")[1]:i)},a.onerror=i=>o(i),a.readAsDataURL(e)})});return function(n){return r.apply(this,arguments)}}();class C extends H{request(e){return(0,u.Z)(function*(){const n=((r,e={})=>{const n=Object.assign({method:r.method||"GET",headers:r.headers},e),a=((r={})=>{const e=Object.keys(r);return Object.keys(r).map(a=>a.toLocaleLowerCase()).reduce((a,i,l)=>(a[i]=r[e[l]],a),{})})(r.headers)["content-type"]||"";if("string"==typeof r.data)n.body=r.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[l,s]of Object.entries(r.data||{}))i.set(l,s);n.body=i.toString()}else if(a.includes("multipart/form-data")){const i=new FormData;if(r.data instanceof FormData)r.data.forEach((s,h)=>{i.append(h,s)});else for(const s of Object.keys(r.data))i.append(s,r.data[s]);n.body=i;const l=new Headers(n.headers);l.delete("content-type"),n.headers=l}else(a.includes("application/json")||"object"==typeof r.data)&&(n.body=JSON.stringify(r.data));return n})(e,e.webFetchExtra),o=((r,e=!0)=>r?Object.entries(r).reduce((o,a)=>{const[i,l]=a;let s,h;return Array.isArray(l)?(h="",l.forEach(d=>{s=e?encodeURIComponent(d):d,h+=`${i}=${s}&`}),h.slice(0,-1)):(s=e?encodeURIComponent(l):l,h=`${i}=${s}`),`${o}&${h}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=o?`${e.url}?${o}`:e.url,i=yield fetch(a,n),l=i.headers.get("content-type")||"";let h,d,{responseType:s="text"}=i.ok?e:{};switch(l.includes("application/json")&&(s="json"),s){case"arraybuffer":case"blob":d=yield i.blob(),h=yield y(d);break;case"json":h=yield i.json();break;default:h=yield i.text()}const F={};return i.headers.forEach((j,V)=>{F[V]=j}),{data:h,headers:F,status:i.status,url:i.url}})()}get(e){var n=this;return(0,u.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var n=this;return(0,u.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var n=this;return(0,u.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var n=this;return(0,u.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var n=this;return(0,u.Z)(function*(){return n.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}R("CapacitorHttp",{web:()=>new C})},6812:(le,_,g)=>{g.r(_),g.d(_,{ScanPageModule:()=>X});var u=g(6814),J=g(6223),Y=g(3582),W=g(5367),I=g(5861),ne=g(2726),z=function(t){return t.Aztec="AZTEC",t.Codabar="CODABAR",t.Code39="CODE_39",t.Code93="CODE_93",t.Code128="CODE_128",t.DataMatrix="DATA_MATRIX",t.Ean8="EAN_8",t.Ean13="EAN_13",t.Itf="ITF",t.Pdf417="PDF_417",t.QrCode="QR_CODE",t.UpcA="UPC_A",t.UpcE="UPC_E",t}(z||{});const A=(0,ne.fo)("BarcodeScanner",{web:()=>g.e(7338).then(g.bind(g,7338)).then(t=>new t.BarcodeScannerWeb)});var f=g(6689),Z=g(2042),R=g(2425),re=g(7364),oe=g(7913);const ie=[{path:"",component:(()=>{var t;class y{constructor(c,b,C,S){this.router=c,this.menuService=b,this.toastr=C,this.spinnerService=S}ionViewDidEnter(){this.initializeScanner()}initializeScanner(){var c=this;return(0,I.Z)(function*(){try{"granted"!==(yield A.checkPermissions()).camera&&(yield A.requestPermissions());const C=document.querySelector(".qr-scanner-wrapper"),S=document.querySelector(".qr-scanner-frame"),r=document.querySelector(".ion-content-scan"),e=document.body;C&&r&&S?(C.classList.add("barcode-scanner-active"),r.classList.add("ion-content-transparent"),e.style.background="transparent",S.classList.remove("display-none"),console.log("Class 'barcode-scanner-active' added to the element")):console.error("qr-scanner-wrapper element not found"),A.startScan({formats:[z.QrCode]}),A.addListener("barcodeScanned",function(){var n=(0,I.Z)(function*(o){o.barcode&&(console.log(o.barcode),console.log(o.barcode.rawValue),c.spinnerService.show(),setTimeout(()=>{c.spinnerService.hide(),c.toastr.success("QR scann\xe9 avec succ\xe8s"),c.router.navigate(["/scan-client",o.barcode.rawValue])},1e3)),yield c.stopScanner()});return function(o){return n.apply(this,arguments)}}())}catch(b){console.error("Error starting QR Code scanner:",b),c.toastr.success("Erreur de num\xe9risation QR"),yield c.stopScanner()}})()}stopScanner(){return(0,I.Z)(function*(){const c=document.querySelector(".qr-scanner-wrapper"),b=document.querySelector(".qr-scanner-frame"),C=document.querySelector(".ion-content-scan"),S=document.body;c&&C&&b?(c.classList.remove("barcode-scanner-active"),C.classList.remove("ion-content-transparent"),S.style.removeProperty("background"),b.classList.add("display-none"),console.log("Scanner stopped and styles reset")):console.error("qr-scanner-wrapper element not found"),yield A.stopScan(),yield A.removeAllListeners()})()}ionViewWillLeave(){this.stopScanner()}toggleMenu(){this.menuService.toggleMenu()}goTo(...c){this.router.navigate(c)}}return(t=y).\u0275fac=function(c){return new(c||t)(f.Y36(W.F0),f.Y36(Z.h),f.Y36(R._W),f.Y36(re.V))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-scan"]],decls:16,vars:0,consts:[[1,"ion-content-scan"],[1,"content-size"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper","header-index"],[1,"header-section-content"],[1,"header-section-title"],["src","assets/icon/icon-scan-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],[1,"qr-scanner-wrapper"],[1,"qr-scanner-frame","display-none"],[1,"corner","top-left"],[1,"corner","top-right"],[1,"corner","bottom-left"],[1,"corner","bottom-right"],["section","scan"]],template:function(c,b){1&c&&(f.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f._UZ(5,"img",5),f.TgZ(6,"div"),f._uU(7,"Analyse"),f.qZA()(),f.TgZ(8,"img",6),f.NdJ("click",function(){return b.toggleMenu()}),f.qZA()()(),f.TgZ(9,"div",7)(10,"div",8),f._UZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),f.qZA()()()(),f._UZ(15,"app-footer",13))},dependencies:[Y.W2,oe.c],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-index[_ngcontent-%COMP%]{z-index:10;position:relative}.qr-scanner-wrapper[_ngcontent-%COMP%]{width:100%;height:100vh;position:fixed;top:0;left:0}.qr-scanner-frame[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:210px;height:210px;border:1px solid transparent}.corner[_ngcontent-%COMP%]{position:absolute;width:32px;height:32px;background-color:transparent;border:4px solid var(--ion-color-primary)}.top-left[_ngcontent-%COMP%]{top:0;left:0;border-bottom:none;border-right:none}.top-right[_ngcontent-%COMP%]{top:0;right:0;border-bottom:none;border-left:none}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0;border-top:none;border-right:none}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0;border-top:none;border-left:none}"]}),y})()}];let K=(()=>{var t;class y{}return(t=y).\u0275fac=function(c){return new(c||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[W.Bz.forChild(ie),W.Bz]}),y})();var q=g(822);let X=(()=>{var t;class y{}return(t=y).\u0275fac=function(c){return new(c||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[u.ez,J.u5,Y.Pc,K,q.K]}),y})()}}]);