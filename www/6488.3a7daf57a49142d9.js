"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(P,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>T});var h=r(6814),l=r(6223),u=r(3582),g=r(8520),d=r(5861),c=r(4036),t=r(2029),m=r(3271),f=r(2234),v=r(5693),w=r(2425),M=r(7364),x=r(3911);function Z(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",7)(5,"div",8),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"img",10),t.TgZ(10,"input",11),t.NdJ("ngModelChange",function(n){t.CHM(i);const a=t.oxw();return t.KtG(a.email=n)}),t.qZA()(),t.TgZ(11,"div",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",9),t._UZ(15,"img",12),t.TgZ(16,"input",13),t.NdJ("ngModelChange",function(n){t.CHM(i);const a=t.oxw();return t.KtG(a.password=n)}),t.qZA(),t.TgZ(17,"img",14),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.togglePassword())}),t.qZA()()(),t.TgZ(18,"button",15),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onLogin())}),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",16),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.showLogin=!1)}),t._uU(22),t.ALo(23,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,9,"login")," "),t.xp6(4),t.hij(" ",t.lcZ(7,11,"email")," "),t.xp6(4),t.Q6J("ngModel",i.email),t.xp6(2),t.hij(" ",t.lcZ(13,13,"password")," "),t.xp6(4),t.Q6J("ngModel",i.password)("type",i.showPassword?"text":"password"),t.xp6(2),t.Q6J("disabled",!i.email||!i.password),t.xp6(1),t.hij(" ",t.lcZ(20,15,"login")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"forgot_password")," ")}}function L(o,s){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div")(5,"div",8),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"img",10),t.TgZ(10,"input",11),t.NdJ("ngModelChange",function(n){t.CHM(i);const a=t.oxw();return t.KtG(a.emailRecover=n)}),t.qZA()()(),t.TgZ(11,"button",15),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onRecover())}),t._uU(12),t.ALo(13,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"recover_password")," "),t.xp6(4),t.hij(" ",t.lcZ(7,7,"email")," "),t.xp6(4),t.Q6J("ngModel",i.emailRecover),t.xp6(1),t.Q6J("disabled",!i.emailRecover),t.xp6(1),t.hij(" ",t.lcZ(13,9,"reset_password")," ")}}const b=[{path:"",component:(()=>{var o;class s{constructor(e,n,a,_,y,A,S){this.router=e,this.teachService=n,this.monitorDataService=a,this.sharedDataService=_,this.toastr=y,this.spinnerService=A,this.translate=S,this.showLogin=!0,this.showPassword=!1}ngOnInit(){}togglePassword(){this.showPassword=!this.showPassword}onLogin(){var e=this;return(0,d.Z)(function*(){e.spinnerService.show(),e.teachService.login(e.email,e.password).subscribe(function(){var n=(0,d.Z)(function*(a){e.toastr.success(e.translate.instant("toast.connected_correctly")),localStorage.setItem("token",a.data.token),localStorage.setItem("monitorId",a.data.user.monitors[0].id),e.monitorDataService.fetchMonitorData(a.data.user.monitors[0].id);try{yield(0,c.z)(e.sharedDataService.fetchDegrees(a.data.user.monitors[0].active_school)),yield(0,c.z)(e.sharedDataService.fetchSports(a.data.user.monitors[0].active_school)),yield(0,c.z)(e.sharedDataService.fetchLanguages()),yield(0,c.z)(e.sharedDataService.fetchStations()),yield(0,c.z)(e.sharedDataService.fetchSchools())}catch(_){console.error("Error fetching data:",_),e.toastr.error(e.translate.instant("toast.error_loading_data"))}e.spinnerService.hide(),e.goTo("home"),e.email="",e.password=""});return function(a){return n.apply(this,arguments)}}(),n=>{e.spinnerService.hide(),console.error("Login failed",n),e.toastr.error(e.translate.instant("toast.identification_error"))})})()}onRecover(){this.emailRecover&&(this.spinnerService.show(),(0,c.z)(this.teachService.postData("forgot-password",{email:this.emailRecover,type:"monitor"})).then(n=>{this.spinnerService.hide(),this.toastr.success(this.translate.instant("toast.recover_correctly")),this.emailRecover="",this.showLogin=!0}).catch(n=>{console.error("Error during recover:",n),this.spinnerService.hide(),this.toastr.error(this.translate.instant("toast.error"))}))}goTo(...e){this.router.navigate(e)}}return(o=s).\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(m.b),t.Y36(f.q),t.Y36(v.g),t.Y36(w._W),t.Y36(M.V),t.Y36(x.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"content-wrapper","content-background-image","status-bar-overlap-wrapper"],[1,"header-content"],[1,"header-back","background-color-dark","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg",1,"header-back-icon"],["src","assets/images/boukii-logo.png",1,"header-logo"],[4,"ngIf"],[1,"content-title"],[1,"pb-24"],[1,"input-label","color-light","montserrat"],[1,"input-form-icon","background-color-dark"],["src","assets/icon/icon-mail.png"],["type","text",1,"montserrat",3,"ngModel","ngModelChange"],["src","assets/icon/icon-password.png"],[1,"montserrat",3,"ngModel","type","ngModelChange"],["src","assets/icon/icon-eye.png",1,"cursor-pointer",3,"click"],[1,"content-button","btn-back-primary","montserrat",3,"disabled","click"],[1,"content-footer","cursor-pointer","montserrat",3,"click"],[1,"content-title-b"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),t.NdJ("click",function(){return n.showLogin?n.goTo("start"):n.showLogin=!0}),t._UZ(4,"img",3),t.qZA(),t._UZ(5,"img",4),t.qZA(),t.YNc(6,Z,24,19,"div",5),t.YNc(7,L,14,11,"div",5),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngIf",n.showLogin),t.xp6(1),t.Q6J("ngIf",!n.showLogin))},dependencies:[h.O5,l.Fj,l.JJ,l.On,u.W2,x.X$],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-logo[_ngcontent-%COMP%]{width:100px}.header-back[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:34px;height:34px;border-radius:12px;display:flex;align-items:center;justify-content:center}.header-back-icon[_ngcontent-%COMP%]{width:22px}.content-title[_ngcontent-%COMP%]{color:#fff;text-align:left;font-size:24px;font-weight:600;line-height:1.2;margin-bottom:24px}.content-title-b[_ngcontent-%COMP%]{color:#fff;text-align:left;font-size:21px;font-weight:600;line-height:1.2;margin-bottom:12px}.content-subtitle[_ngcontent-%COMP%]{font-size:14px;margin-bottom:24px}.input-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.input-form-icon[_ngcontent-%COMP%]{width:100%;height:48px;border-radius:12px;color:#fff;padding:0 16px;display:flex;align-items:center;gap:9px;margin-bottom:24px}.input-form-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;position:relative;top:-1px}.input-form-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;font-size:15px;width:100%;border:none;background:transparent;outline:0}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.content-footer[_ngcontent-%COMP%]{text-align:center;margin-top:18px;font-size:15px}button[disabled][_ngcontent-%COMP%]{opacity:.4;pointer-events:none}"]}),s})()}];let C=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(b),g.Bz]}),s})(),T=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,l.u5,u.Pc,C,x.aw]}),s})()},4036:(P,p,r)=>{r.d(p,{z:()=>u});var h=r(6973),l=r(305);function u(g,d){const c="object"==typeof d;return new Promise((t,m)=>{const f=new l.Hp({next:v=>{t(v),f.unsubscribe()},error:m,complete:()=>{c?t(d.defaultValue):m(new h.K)}});g.subscribe(f)})}}}]);