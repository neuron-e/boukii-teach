"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3112],{3112:(G,f,s)=>{s.r(f),s.d(f,{CourseGroupPageModule:()=>Z});var d=s(177),v=s(9417),_=s(8974),p=s(3314),l=s(467),b=s(4843),u=s(7586),t=s(6996),h=s(5663),x=s(918),k=s(4387),y=s(5794),I=s(8551),C=s(1547);function R(e,i){if(1&e&&(t.j41(0,"div",13),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.SpI(" ",n.courseBookings.name," ")}}function S(e,i){1&e&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"collective")," "))}function E(e,i){1&e&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"private")," "))}function D(e,i){if(1&e&&(t.qex(0),t.EFF(1),t.bVm()),2&e){const n=t.XpG(2);t.R7$(1),t.SpI(" ",n.courseSport.name," ")}}function F(e,i){if(1&e&&(t.j41(0,"div",14),t.DNE(1,S,3,3,"ng-container",15),t.DNE(2,E,3,3,"ng-container",15),t.DNE(3,D,2,1,"ng-container",15),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.Y8G("ngIf",1==n.courseBookings.course_type),t.R7$(1),t.Y8G("ngIf",2==n.courseBookings.course_type),t.R7$(1),t.Y8G("ngIf",n.courseSport&&n.sports.length)}}function $(e,i){1&e&&t.nrm(0,"img",32)}function T(e,i){if(1&e&&t.nrm(0,"img",33),2&e){const n=t.XpG(2);t.Y8G("src",n.monitorSubgroup.monitor.image?n.monitorSubgroup.monitor.image:"assets/icon/icons-outline-default-avatar.svg",t.B4B)}}function j(e,i){if(1&e&&(t.j41(0,"div",34),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(1),t.Lme("",n.monitorSubgroup.monitor.first_name," ",n.monitorSubgroup.monitor.last_name,"")}}function w(e,i){1&e&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.JRh(t.bMT(2,1,"no_monitor")))}const O=function(e){return{background:e}};function B(e,i){if(1&e&&(t.j41(0,"div",35),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.Y8G("ngStyle",t.eq3(2,O,n.monitorSubgroup.degree_data.color)),t.R7$(1),t.SpI(" ",n.monitorSubgroup.degree_data.annotation," ")}}function Y(e,i){if(1&e&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(1),t.Lme(" ",n.monitorSubgroup.degree_data.annotation,"-",n.monitorSubgroup.subgroup_order," ")}}function X(e,i){if(1&e&&(t.j41(0,"div",16)(1,"div",17),t.DNE(2,$,1,0,"img",18),t.DNE(3,T,1,1,"img",19),t.k0s(),t.j41(4,"div",20)(5,"div",21)(6,"div",22),t.DNE(7,j,2,2,"div",23),t.DNE(8,w,3,3,"div",23),t.DNE(9,B,2,4,"div",24),t.k0s(),t.j41(10,"div",25)(11,"span",26),t.EFF(12),t.nI1(13,"translate"),t.nI1(14,"translate"),t.k0s(),t.DNE(15,Y,2,2,"div",27),t.k0s(),t.j41(16,"div",28)(17,"div",29),t.nrm(18,"img",30),t.j41(19,"span",26),t.EFF(20),t.k0s()(),t.j41(21,"div",29),t.nrm(22,"img",31),t.j41(23,"span",26),t.EFF(24),t.k0s()()()()()()),2&e){const n=t.XpG();t.R7$(2),t.Y8G("ngIf",!n.monitorSubgroup.monitor),t.R7$(1),t.Y8G("ngIf",n.monitorSubgroup.monitor),t.R7$(4),t.Y8G("ngIf",n.monitorSubgroup.monitor),t.R7$(1),t.Y8G("ngIf",!n.monitorSubgroup.monitor),t.R7$(1),t.Y8G("ngIf",n.monitorSubgroup.degree_data&&n.degrees.length),t.R7$(3),t.JRh(n.monitorSubgroup.monitor_id==n.monitorData.id?t.bMT(13,11,"you"):t.bMT(14,13,"teacher")),t.R7$(3),t.Y8G("ngIf",n.monitorSubgroup.degree_data&&n.degrees.length),t.R7$(5),t.Lme("",n.monitorSubgroup.bookings_number,"/",n.monitorSubgroup.max_participants,""),t.R7$(4),t.Lme("",n.courseDateIndex+1,"/",n.courseBookings.course_dates.length,"")}}function N(e,i){1&e&&t.nrm(0,"img",32)}function z(e,i){if(1&e&&t.nrm(0,"img",33),2&e){const n=t.XpG().$implicit;t.Y8G("src",n.monitor.image?n.monitor.image:"assets/icon/icons-outline-default-avatar.svg",t.B4B)}}function U(e,i){if(1&e&&(t.j41(0,"div",34),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(1),t.Lme("",n.monitor.first_name," ",n.monitor.last_name,"")}}function L(e,i){1&e&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.JRh(t.bMT(2,1,"no_monitor")))}function J(e,i){if(1&e&&(t.j41(0,"div",35),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.Y8G("ngStyle",t.eq3(2,O,n.degree_data.color)),t.R7$(1),t.SpI(" ",n.degree_data.annotation," ")}}function V(e,i){if(1&e&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(1),t.Lme(" ",n.degree_data.annotation,"-",n.subgroup_order," ")}}function A(e,i){if(1&e&&(t.j41(0,"div",38)(1,"div",17),t.DNE(2,N,1,0,"img",18),t.DNE(3,z,1,1,"img",19),t.k0s(),t.j41(4,"div",20)(5,"div",21)(6,"div",22),t.DNE(7,U,2,2,"div",23),t.DNE(8,L,3,3,"div",23),t.DNE(9,J,2,4,"div",24),t.k0s(),t.j41(10,"div",25)(11,"span",26),t.EFF(12),t.nI1(13,"translate"),t.nI1(14,"translate"),t.k0s(),t.DNE(15,V,2,2,"div",27),t.k0s(),t.j41(16,"div",28)(17,"div",29),t.nrm(18,"img",30),t.j41(19,"span",26),t.EFF(20),t.k0s()(),t.j41(21,"div",29),t.nrm(22,"img",31),t.j41(23,"span",26),t.EFF(24),t.k0s()()()()()()),2&e){const n=i.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("ngIf",!n.monitor),t.R7$(1),t.Y8G("ngIf",n.monitor),t.R7$(4),t.Y8G("ngIf",n.monitor),t.R7$(1),t.Y8G("ngIf",!n.monitor),t.R7$(1),t.Y8G("ngIf",n.degree_data&&o.degrees.length),t.R7$(3),t.JRh(n.monitor_id==o.monitorData.id?t.bMT(13,11,"you"):t.bMT(14,13,"teacher")),t.R7$(3),t.Y8G("ngIf",n.degree_data&&o.degrees.length),t.R7$(5),t.Lme("",n.bookings_number,"/",n.max_participants,""),t.R7$(4),t.Lme("",o.courseDateIndex+1,"/",o.courseBookings.course_dates.length,"")}}function W(e,i){if(1&e&&(t.j41(0,"div",10),t.DNE(1,A,25,15,"div",37),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.Y8G("ngForOf",n.restSubgroups)}}const H=[{path:"",component:(()=>{var e;class i{constructor(o,a,r,c,g,m,P,M){this.router=o,this.activatedRoute=a,this.monitorDataService=r,this.sharedDataService=c,this.teachService=g,this.toastr=m,this.spinnerService=P,this.translate=M,this.degrees=[],this.sports=[]}ngOnInit(){var o=this;return(0,l.A)(function*(){o.subscription=o.monitorDataService.getMonitorData().subscribe(function(){var a=(0,l.A)(function*(r){if(r){o.monitorData=r;try{o.degrees=yield(0,b._)(o.sharedDataService.fetchDegrees(o.monitorData.active_school)),o.sports=yield(0,b._)(o.sharedDataService.fetchSports(o.monitorData.active_school))}catch(c){console.error("Error fetching data:",c),o.toastr.error(o.translate.instant("toast.error_loading_data"))}o.activatedRoute.params.subscribe(function(){var c=(0,l.A)(function*(g){o.bookingId=g.id,o.dateBooking=g.date,o.courseId=+g.course,o.hourStart=g.hour,o.groupId=+g.group,o.subgroupId=+g.subgroup,o.bookingId&&o.dateBooking&&o.courseId&&o.hourStart&&o.groupId&&o.subgroupId?(o.spinnerService.show(),o.loadBookings()):o.goTo("home")});return function(g){return c.apply(this,arguments)}}())}});return function(r){return a.apply(this,arguments)}}())})()}loadBookings(){this.teachService.getData("teach/courses",this.courseId).subscribe(o=>{this.courseBookings=o.data,this.courseBookings.course_dates.sort((r,c)=>new Date(r.date).getTime()-new Date(c.date).getTime()),this.courseSport=this.sports.find(r=>r.id===this.courseBookings.sport_id)||this.sports[0],this.subgroupBookings=this.courseBookings.booking_users.reduce((r,c)=>(r[c.course_subgroup_id]?r[c.course_subgroup_id]+=1:r[c.course_subgroup_id]=1,r),{});const a=this.courseBookings.course_dates.find((r,c)=>r.date.split("T")[0]===this.dateBooking&&r.hour_start===this.hourStart&&(this.courseDateIndex=c,!0));if(a){const r=[];a.course_groups.forEach(c=>{c.course_subgroups.forEach((g,m)=>{const P=this.degrees.find(q=>q.id===g.degree_id)||this.degrees[0],M=this.subgroupBookings[g.id]||0;r.push({...g,subgroup_order:m+1,degree_data:P,bookings_number:M})})}),this.monitorSubgroup=r.find(c=>c.id===this.subgroupId),this.restSubgroups=r.filter(c=>c.id!==this.subgroupId)}this.spinnerService.hide()},o=>{console.error("There was an error!",o),this.spinnerService.hide()})}getBirthYears(o){const a=u(o);return u().diff(a,"years")}getDateFormat(o){return u(o).format("DD-MM-YYYY")}isDateBeforeOrEqualToToday(o){const a=u(o).startOf("day"),r=u().startOf("day");return a.isSameOrBefore(r)}goTo(...o){this.router.navigate(o)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(e=i).\u0275fac=function(o){return new(o||e)(t.rXU(p.Ix),t.rXU(p.nX),t.rXU(h.O),t.rXU(x.H),t.rXU(k.R),t.rXU(y.tw),t.rXU(I.D),t.rXU(C.c$))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-course-group"]],decls:23,vars:13,consts:[[1,"content-size","dark-background","status-bar-overlap"],[1,"padding-wrapper"],[1,"header-content","mb-8"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],["class","header-top-title",4,"ngIf"],["class","montserrat color-light header-top-subtitle",4,"ngIf"],[1,"menu-section-content","mb-24"],[1,"menu-section-title"],[1,"menu-section-content","mt-24","mb-12"],[1,"menu-section-title-b","color-light","uppercase"],[1,"member-list"],["class","pb-8 mb-8 member-list-item no-border",4,"ngIf"],["class","member-list",4,"ngIf"],[1,"header-top-title"],[1,"montserrat","color-light","header-top-subtitle"],[4,"ngIf"],[1,"pb-8","mb-8","member-list-item","no-border"],[1,"member-list-item-img"],["src","assets/icon/icons-outline-default-avatar.svg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"member-item-flex"],[1,"member-item-content"],[1,"member-item-title"],["class","montserrat",4,"ngIf"],["class","box-selector-level color-light",3,"ngStyle",4,"ngIf"],[1,"member-item-subtitle"],[1,"montserrat","color-light"],["class","box-selector-subgroup",4,"ngIf"],[1,"member-item-data"],[1,"task-content-icon"],["src","assets/icon/icon-user-tick.png"],["src","assets/icon/icon-calendar-tick.png"],["src","assets/icon/icons-outline-default-avatar.svg"],[3,"src"],[1,"montserrat"],[1,"box-selector-level","color-light",3,"ngStyle"],[1,"box-selector-subgroup"],["class","pb-8 mb-8 member-list-item",4,"ngFor","ngForOf"],[1,"pb-8","mb-8","member-list-item"]],template:function(o,a){1&o&&(t.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),t.bIt("click",function(){return a.goTo("course-detail",a.bookingId,a.dateBooking)}),t.k0s(),t.DNE(5,R,2,1,"div",4),t.k0s(),t.DNE(6,F,4,3,"div",5),t.k0s(),t.j41(7,"div",1)(8,"div",6)(9,"div",7),t.EFF(10),t.nI1(11,"translate"),t.k0s()(),t.j41(12,"div",8)(13,"div",9),t.EFF(14),t.nI1(15,"translate"),t.k0s()(),t.j41(16,"div",10),t.DNE(17,X,25,15,"div",11),t.k0s(),t.j41(18,"div",8)(19,"div",9),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.DNE(22,W,2,1,"div",12),t.k0s()()()),2&o&&(t.R7$(5),t.Y8G("ngIf",a.courseBookings),t.R7$(1),t.Y8G("ngIf",a.courseBookings),t.R7$(4),t.JRh(t.bMT(11,7,"groups")),t.R7$(4),t.JRh(t.bMT(15,9,"my_group")),t.R7$(3),t.Y8G("ngIf",a.monitorSubgroup),t.R7$(3),t.JRh(t.bMT(21,11,"other_groups")),t.R7$(2),t.Y8G("ngIf",a.restSubgroups&&a.restSubgroups.length))},dependencies:[d.Sq,d.bT,d.B3,_.W9,C.D9],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-top-subtitle[_ngcontent-%COMP%]{font-size:14px;display:block;text-align:center}.opacity-light[_ngcontent-%COMP%]{opacity:.6}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}.box-radius[_ngcontent-%COMP%]{border-radius:8px}.content-flex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.content-flex-top-img[_ngcontent-%COMP%]{width:44px}.content-flex-top-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.content-flex-top-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:22px;font-weight:600}.content-flex-top-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.menu-section-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.menu-section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.menu-section-title-b[_ngcontent-%COMP%]{font-size:13px}.menu-section-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;background-color:var(--ion-color-primary);padding:5px 8px;border-radius:40px;font-size:12px;font-weight:500;display:flex;align-items:center;justify-content:center}.menu-section-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.menu-section-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.menu-section-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.list-box-selector-b[_ngcontent-%COMP%]{width:100%;display:flex;padding:8px 0;gap:12px;justify-content:space-between}.background-grey-translucent[_ngcontent-%COMP%]{background:rgba(65,69,78,.4)}.box-selector-type[_ngcontent-%COMP%]{display:flex;padding:12px 6px;flex-direction:column;gap:8px;align-items:center;border-radius:8px;justify-content:flex-start;text-align:center}.box-selector-type-red[_ngcontent-%COMP%]{color:#faafaf;background:#613136}.box-selector-type[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-selector-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.box-selector-type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.member-list[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:column}.member-list-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;width:100%;border-bottom:1px solid #444953}.member-list-item-img[_ngcontent-%COMP%]{width:48px;min-width:48px;height:48px;border-radius:48px;position:relative}.member-list-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.member-item-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.member-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;width:100%}.member-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.member-item-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.member-item-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.member-item-subtitle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;display:flex;align-items:center;gap:2px}.member-item-bullet[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:6px;background:#e9484a}.member-item-icon[_ngcontent-%COMP%]{width:20px}.no-border[_ngcontent-%COMP%]{border:none!important}.box-selector-level[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px;border-radius:20px}.box-selector-subgroup[_ngcontent-%COMP%]{font-size:12px;color:#fff}.member-item-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task-content-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.task-content-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.task-content-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}"]}),i})()}];let K=(()=>{var e;class i{}return(e=i).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[p.iI.forChild(H),p.iI]}),i})();var Q=s(5553);let Z=(()=>{var e;class i{}return(e=i).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[d.MD,v.YN,_.bv,K,Q.h,C.h]}),i})()},4843:(G,f,s)=>{s.d(f,{_:()=>_});var d=s(9350),v=s(7707);function _(p,l){const b="object"==typeof l;return new Promise((u,t)=>{const h=new v.Ms({next:x=>{u(x),h.unsubscribe()},error:t,complete:()=>{b?u(l.defaultValue):t(new d.G)}});p.subscribe(h)})}}}]);