"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[154],{154:(P,m,s)=>{s.r(m),s.d(m,{ScanClientPageModule:()=>Ce});var p=s(6814),b=s(6223),x=s(3582),u=s(8520),d=s(5861),_=s(4036),l=s(6676),h=s(3659),v=s(8187),e=s(2029),y=s(2042),T=s(2234),S=s(5693),w=s(3271),A=s(2425),O=s(7364),C=s(3911),k=s(7913);function U(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.getLanguageById(n.clientMonitor.main.language1_id)," \xb7 ")}}function Q(t,a){if(1&t&&(e.TgZ(0,"div",15)(1,"div",16),e._UZ(2,"img",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19)(5,"div",20),e.YNc(6,U,2,1,"ng-container",21),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",22)(10,"div"),e._uU(11),e.qZA(),e._UZ(12,"img",23),e.qZA(),e.TgZ(13,"div",24)(14,"a",25),e._UZ(15,"img",26),e.qZA(),e.TgZ(16,"a",25),e._UZ(17,"img",27),e.qZA()()()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src",n.clientMonitor.main.image?n.clientMonitor.main.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(4),e.Q6J("ngIf",n.clientMonitor.main.language1_id),e.xp6(1),e.lnq(" ",n.getCountryById(n.clientMonitor.main.country)," \xb7 ",n.getBirthYears(n.clientMonitor.main.birth_date)," ",e.lcZ(8,9,"years")," "),e.xp6(4),e.AsE("",n.clientMonitor.main.first_name," ",n.clientMonitor.main.last_name,""),e.xp6(3),e.Q6J("href","tel:"+n.clientMonitor.main.phone,e.LSH),e.xp6(2),e.Q6J("href","mailto:"+n.clientMonitor.main.email,e.LSH)}}function I(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.getLanguageById(n.clientMonitor.language1_id)," \xb7 ")}}function B(t,a){if(1&t&&(e.TgZ(0,"div",15)(1,"div",16),e._UZ(2,"img",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19)(5,"div",20),e.YNc(6,I,2,1,"ng-container",21),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",22)(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"div",24)(13,"a",25),e._UZ(14,"img",26),e.qZA(),e.TgZ(15,"a",25),e._UZ(16,"img",27),e.qZA()()()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src",n.clientMonitor.image?n.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(4),e.Q6J("ngIf",n.clientMonitor.language1_id),e.xp6(1),e.lnq(" ",n.getCountryById(n.clientMonitor.country)," \xb7 ",n.clientMonitor.birth_years," ",e.lcZ(8,9,"years")," "),e.xp6(4),e.AsE("",n.clientMonitor.first_name," ",n.clientMonitor.last_name,""),e.xp6(2),e.Q6J("href","tel:"+n.clientMonitor.phone,e.LSH),e.xp6(2),e.Q6J("href","mailto:"+n.clientMonitor.email,e.LSH)}}function D(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.hij(" ",n.getLanguageById(n.clientMonitor.language1_id)," \xb7 ")}}function Y(t,a){if(1&t&&(e.TgZ(0,"div",28)(1,"div",16),e._UZ(2,"img",17),e.qZA(),e.TgZ(3,"div",18)(4,"div",19)(5,"div",20),e.YNc(6,D,2,1,"ng-container",21),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",22)(10,"div"),e._uU(11),e.qZA()()()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("src",n.clientMonitor.image?n.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(4),e.Q6J("ngIf",n.clientMonitor.language1_id),e.xp6(1),e.lnq(" ",n.getCountryById(n.clientMonitor.country)," \xb7 ",n.clientMonitor.birth_years," ",e.lcZ(8,7,"years")," "),e.xp6(4),e.AsE("",n.clientMonitor.first_name," ",n.clientMonitor.last_name,"")}}function L(t,a){if(1&t&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.todayDateFull," ")}}function J(t,a){1&t&&(e.TgZ(0,"div",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"no_reservations_today")," "))}function j(t,a){1&t&&e._UZ(0,"div",45)}function N(t,a){1&t&&e._UZ(0,"img",46)}function q(t,a){1&t&&e._UZ(0,"img",47)}function E(t,a){1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"collective")," "))}function z(t,a){1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"private")," "))}function F(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.sport_data.name," ")}}const M=function(t){return{background:t}};function R(t,a){if(1&t&&(e.TgZ(0,"div",48),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.Q6J("ngStyle",e.VKq(2,M,n.degree_data.color)),e.xp6(1),e.hij(" ",n.degree_data.annotation," ")}}function V(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(" - ",n.school_data.name,"")}}function $(t,a){if(1&t&&(e.TgZ(0,"div",49),e._UZ(1,"img",50),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.YNc(4,V,2,1,"span",21),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.station_data.name),e.xp6(1),e.Q6J("ngIf",n.station_data)}}function H(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.getLanguageById(n.monitor_data.language1_id)," ")}}function G(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" \xb7 ",i.getLanguageById(n.monitor_data.language2_id)," ")}}function K(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" \xb7 ",i.getLanguageById(n.monitor_data.language3_id)," ")}}function W(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"div",51),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",52)(5,"div",53),e._UZ(6,"img",17),e.qZA(),e.TgZ(7,"div",54)(8,"div",55),e.YNc(9,H,2,1,"ng-container",21),e.YNc(10,G,2,1,"ng-container",21),e.YNc(11,K,2,1,"ng-container",21),e.qZA(),e.TgZ(12,"div",56)(13,"div",57),e._uU(14),e.qZA()(),e.TgZ(15,"div",24)(16,"a",25),e._UZ(17,"img",26),e.qZA(),e.TgZ(18,"a",25),e._UZ(19,"img",27),e.qZA()()()(),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,9,"teacher")," "),e.xp6(4),e.Q6J("src",n.monitor_data.image?n.monitor_data.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(3),e.Q6J("ngIf",n.monitor_data.language1_id),e.xp6(1),e.Q6J("ngIf",n.monitor_data.language2_id),e.xp6(1),e.Q6J("ngIf",n.monitor_data.language3_id),e.xp6(3),e.AsE("",n.monitor_data.first_name," ",n.monitor_data.last_name,""),e.xp6(2),e.Q6J("href","tel:"+n.monitor_data.phone,e.LSH),e.xp6(2),e.Q6J("href","mailto:"+n.monitor_data.email,e.LSH)}}function X(t,a){1&t&&(e.ynx(0),e.TgZ(1,"div",58),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"no_monitor_assigned")," "))}function ee(t,a){if(1&t&&(e.ynx(0),e.YNc(1,j,1,0,"div",31),e.TgZ(2,"div",32)(3,"div",33)(4,"div",34),e._uU(5),e.qZA()(),e.TgZ(6,"div",35)(7,"div",36)(8,"div",37),e.YNc(9,N,1,0,"img",38),e.YNc(10,q,1,0,"img",39),e.qZA(),e.TgZ(11,"div",40)(12,"div",41),e._uU(13),e.qZA(),e.TgZ(14,"div",42)(15,"span"),e.YNc(16,E,3,3,"ng-container",21),e.YNc(17,z,3,3,"ng-container",21),e.YNc(18,F,2,1,"ng-container",21),e.qZA()()()(),e.YNc(19,R,2,4,"div",43),e.qZA(),e.YNc(20,$,5,2,"div",44),e.qZA(),e.YNc(21,W,20,11,"ng-container",21),e.YNc(22,X,4,3,"ng-container",21),e.BQk()),2&t){const n=a.$implicit,i=a.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==i),e.xp6(4),e.hij(" ",o.formatTimeRange(n.hour_start,n.hour_end)," "),e.xp6(4),e.Q6J("ngIf",1==n.course.course_type),e.xp6(1),e.Q6J("ngIf",2==n.course.course_type),e.xp6(3),e.hij(" ",n.course.name," "),e.xp6(3),e.Q6J("ngIf",1==n.course.course_type),e.xp6(1),e.Q6J("ngIf",2==n.course.course_type),e.xp6(1),e.Q6J("ngIf",n.sport_data&&o.sports.length),e.xp6(1),e.Q6J("ngIf",1==n.course.course_type&&n.degree_data&&o.degrees.length),e.xp6(1),e.Q6J("ngIf",n.station_data),e.xp6(1),e.Q6J("ngIf",n.monitor_data),e.xp6(1),e.Q6J("ngIf",!n.monitor_data)}}function te(t,a){if(1&t&&(e.TgZ(0,"div",59),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.tomorrowDateFull," ")}}function ne(t,a){1&t&&(e.TgZ(0,"div",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"no_reservations_tomorrow")," "))}function ie(t,a){1&t&&e._UZ(0,"div",45)}function oe(t,a){1&t&&e._UZ(0,"img",46)}function ae(t,a){1&t&&e._UZ(0,"img",47)}function re(t,a){1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"collective")," "))}function se(t,a){1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"private")," "))}function ce(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.sport_data.name," ")}}function le(t,a){if(1&t&&(e.TgZ(0,"div",48),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.Q6J("ngStyle",e.VKq(2,M,n.degree_data.color)),e.xp6(1),e.hij(" ",n.degree_data.annotation," ")}}function ge(t,a){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(" - ",n.school_data.name,"")}}function de(t,a){if(1&t&&(e.TgZ(0,"div",49),e._UZ(1,"img",50),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.YNc(4,ge,2,1,"span",21),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.station_data.name),e.xp6(1),e.Q6J("ngIf",n.station_data)}}function _e(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.getLanguageById(n.monitor_data.language1_id)," ")}}function pe(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" \xb7 ",i.getLanguageById(n.monitor_data.language2_id)," ")}}function ue(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" \xb7 ",i.getLanguageById(n.monitor_data.language3_id)," ")}}function fe(t,a){if(1&t&&(e.ynx(0),e.TgZ(1,"div",51),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",52)(5,"div",53),e._UZ(6,"img",17),e.qZA(),e.TgZ(7,"div",54)(8,"div",55),e.YNc(9,_e,2,1,"ng-container",21),e.YNc(10,pe,2,1,"ng-container",21),e.YNc(11,ue,2,1,"ng-container",21),e.qZA(),e.TgZ(12,"div",56)(13,"div",57),e._uU(14),e.qZA()(),e.TgZ(15,"div",24)(16,"a",25),e._UZ(17,"img",26),e.qZA(),e.TgZ(18,"a",25),e._UZ(19,"img",27),e.qZA()()()(),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,9,"teacher")," "),e.xp6(4),e.Q6J("src",n.monitor_data.image?n.monitor_data.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(3),e.Q6J("ngIf",n.monitor_data.language1_id),e.xp6(1),e.Q6J("ngIf",n.monitor_data.language2_id),e.xp6(1),e.Q6J("ngIf",n.monitor_data.language3_id),e.xp6(3),e.AsE("",n.monitor_data.first_name," ",n.monitor_data.last_name,""),e.xp6(2),e.Q6J("href","tel:"+n.monitor_data.phone,e.LSH),e.xp6(2),e.Q6J("href","mailto:"+n.monitor_data.email,e.LSH)}}function me(t,a){1&t&&(e.ynx(0),e.TgZ(1,"div",58),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"no_monitor_assigned")," "))}function xe(t,a){if(1&t&&(e.ynx(0),e.YNc(1,ie,1,0,"div",31),e.TgZ(2,"div",32)(3,"div",33)(4,"div",34),e._uU(5),e.qZA()(),e.TgZ(6,"div",35)(7,"div",36)(8,"div",37),e.YNc(9,oe,1,0,"img",38),e.YNc(10,ae,1,0,"img",39),e.qZA(),e.TgZ(11,"div",40)(12,"div",41),e._uU(13),e.qZA(),e.TgZ(14,"div",42)(15,"span"),e.YNc(16,re,3,3,"ng-container",21),e.YNc(17,se,3,3,"ng-container",21),e.YNc(18,ce,2,1,"ng-container",21),e.qZA()()()(),e.YNc(19,le,2,4,"div",43),e.qZA(),e.YNc(20,de,5,2,"div",44),e.qZA(),e.YNc(21,fe,20,11,"ng-container",21),e.YNc(22,me,4,3,"ng-container",21),e.BQk()),2&t){const n=a.$implicit,i=a.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",0!==i),e.xp6(4),e.hij(" ",o.formatTimeRange(n.hour_start,n.hour_end)," "),e.xp6(4),e.Q6J("ngIf",1==n.course.course_type),e.xp6(1),e.Q6J("ngIf",2==n.course.course_type),e.xp6(3),e.hij(" ",n.course.name," "),e.xp6(3),e.Q6J("ngIf",1==n.course.course_type),e.xp6(1),e.Q6J("ngIf",2==n.course.course_type),e.xp6(1),e.Q6J("ngIf",n.sport_data&&o.sports.length),e.xp6(1),e.Q6J("ngIf",1==n.course.course_type&&n.degree_data&&o.degrees.length),e.xp6(1),e.Q6J("ngIf",n.station_data),e.xp6(1),e.Q6J("ngIf",n.monitor_data),e.xp6(1),e.Q6J("ngIf",!n.monitor_data)}}const he=[{path:"",component:(()=>{var t;class a{constructor(i,o,r,c,g,Z,f,Ze,Me,Pe){this.router=i,this.activatedRoute=o,this.changeDetectorRef=r,this.menuService=c,this.monitorDataService=g,this.sharedDataService=Z,this.teachService=f,this.toastr=Ze,this.spinnerService=Me,this.translate=Pe,this.starterLevel={id:0,name:"D\xe9butante",level:"STARTER LEAGUE",percentage:0,color:"#c8c8c8",objectives:["Je n'ai jamais fait de ski."]},this.dataLevels=[{id:1,name:"Prince Bleu",level:"BLUE LEAGUE",percentage:30,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:2,name:"Roi Bleu",level:"BLUE LEAGUE",percentage:60,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:3,name:"Star Bleu",level:"BLUE LEAGUE",percentage:100,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:4,name:"Prince Red",level:"RED LEAGUE",percentage:30,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:5,name:"Roi Red",level:"RED LEAGUE",percentage:60,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:6,name:"Star Red",level:"RED LEAGUE",percentage:100,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:7,name:"Prince Noir",level:"BLACK LEAGUE",percentage:30,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:8,name:"Roi Noir",level:"BLACK LEAGUE",percentage:60,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:9,name:"Star Noir",level:"BLACK LEAGUE",percentage:100,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]}],this.allLevels=[this.starterLevel,...this.dataLevels],this.monitors=[],this.stations=[],this.schools=[],this.degrees=[],this.sports=[],this.languages=[],this.todayDateFormatted=l().format("YYYY-MM-DD"),this.tomorrowDateFormatted=l().add(1,"days").format("YYYY-MM-DD"),this.translate.onLangChange.subscribe(ye=>{this.updateDate(ye.lang)}),this.updateDate(this.translate.currentLang)}updateDate(i){l.locale(i),this.todayDateFull=l().format("dddd, D MMMM"),this.tomorrowDateFull=l().add(1,"days").format("dddd, D MMMM")}ngOnInit(){var i=this;return(0,d.Z)(function*(){i.subscription=i.monitorDataService.getMonitorData().subscribe(function(){var o=(0,d.Z)(function*(r){if(r){i.monitorData=r;try{i.degrees=yield(0,_.z)(i.sharedDataService.fetchDegrees(i.monitorData.active_school)),i.sports=yield(0,_.z)(i.sharedDataService.fetchSports(i.monitorData.active_school)),i.languages=yield(0,_.z)(i.sharedDataService.fetchLanguages()),i.stations=yield(0,_.z)(i.sharedDataService.fetchStations()),i.schools=yield(0,_.z)(i.sharedDataService.fetchSchools())}catch(c){console.error("Error fetching data:",c),i.toastr.error(i.translate.instant("toast.error_loading_data"))}i.activatedRoute.params.subscribe(function(){var c=(0,d.Z)(function*(g){i.clientId=+g.client,i.clientId?(i.spinnerService.show(),yield i.getMonitors(),i.getClient(i.clientId),i.loadBookings(i.clientId)):(i.toastr.error(i.translate.instant("toast.no_client_found")),i.goTo("home"))});return function(g){return c.apply(this,arguments)}}())}});return function(r){return o.apply(this,arguments)}}())})()}getLanguageById(i){const o=this.languages.find(r=>r.id===i);return o?o.code.toUpperCase():""}getCountryById(i){const o=h.M.find(r=>r.id===i);return o?o.iso:"Aucun"}getProvinceById(i){const o=v.J.find(r=>r.id===i);return o?o.name:"Aucune"}getMonitors(){var i=this;return(0,d.Z)(function*(){try{const o=yield i.teachService.getData("monitors").toPromise();i.monitors=o.data}catch(o){console.error("There was an error!",o)}})()}getClient(i){this.spinnerService.show(),this.teachService.getData(`clients/${i}`,null,{"with[]":"main"}).subscribe(o=>{const r=o.data;this.spinnerService.hide(),r?(r.birth_years=this.getBirthYears(r.birth_date),this.clientMonitor=r,this.changeDetectorRef.detectChanges()):(this.toastr.error(this.translate.instant("toast.no_client_found")),this.goTo("home"))},o=>{console.error("There was an error fetching clients!",o),this.spinnerService.hide()})}loadBookings(i){this.spinnerService.show(),this.teachService.getData("teach/clients/"+i+"/bookings",null,{date_start:this.todayDateFormatted,date_end:this.tomorrowDateFormatted}).subscribe(o=>{const r=new Date,c=new Date;c.setDate(r.getDate()+1);const g=o.data.filter(f=>this.isSameDay(new Date(f.date),r)),Z=o.data.filter(f=>this.isSameDay(new Date(f.date),c));this.bookingsToday=this.addFieldsBookings(g),this.bookingsTomorrow=this.addFieldsBookings(Z),this.changeDetectorRef.detectChanges(),this.spinnerService.hide()},o=>{console.error("There was an error!",o),this.spinnerService.hide()})}isSameDay(i,o){return i.getDate()===o.getDate()&&i.getMonth()===o.getMonth()&&i.getFullYear()===o.getFullYear()}addFieldsBookings(i){return i.map(o=>({...o,monitor_data:this.monitors.find(r=>r.id===o.monitor_id),school_data:this.schools.find(r=>r.id===o.course.school_id),station_data:this.stations.find(r=>r.id===o.course.station_id),degree_data:this.degrees.find(r=>r.id===o.degree_id),sport_data:this.sports.find(r=>r.id===o.course.sport_id)}))}getBirthYears(i){const o=l(i);return l().diff(o,"years")}formatTimeRange(i,o){let r=o;r||(r="18:00");const c=g=>g.substring(0,5);return`${c(i)}-${c(r)}`}toggleMenu(){this.menuService.toggleMenu()}goTo(...i){this.router.navigate(i)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(t=a).\u0275fac=function(i){return new(i||t)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(e.sBO),e.Y36(y.h),e.Y36(T.q),e.Y36(S.g),e.Y36(w.b),e.Y36(A._W),e.Y36(O.V),e.Y36(C.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-scan-client"]],decls:22,vars:12,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-24"],[1,"header-section-title"],["src","assets/icon/icon-scan-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],["class","header-user-data-b mt-24",4,"ngIf"],[1,"padding-wrapper"],[1,"background-color-dark","box-radius","padding-wrapper"],["class","header-user-data-b mb-32",4,"ngIf"],["class","mb-24 content-title-separator",4,"ngIf"],["class","content-title-c",4,"ngIf"],[4,"ngFor","ngForOf"],["class","pt-12 mt-32 mb-24 content-title-separator",4,"ngIf"],["section","scan"],[1,"header-user-data-b","mt-24"],[1,"header-user-data-img"],[3,"src"],[1,"header-user-data-text"],[1,"header-user-data-text-top"],[1,"color-light"],[4,"ngIf"],[1,"header-user-data-text-title"],["src","assets/icon/icon-crown.png"],[1,"header-user-data-text-icons"],[3,"href"],["src","assets/icon/icon-phone-box.png",1,"cursor-pointer"],["src","assets/icon/icon-mail-box.png",1,"cursor-pointer"],[1,"header-user-data-b","mb-32"],[1,"mb-24","content-title-separator"],[1,"content-title-c"],["class","border-separator mt-24 mb-24",4,"ngIf"],[1,"box-selector-full"],[1,"box-selector-top"],[1,"box-selector-date"],[1,"box-selector-middle"],[1,"box-selector-middle-interior"],[1,"box-selector-image-wrapper"],["src","assets/icon/course-collective-box.png","class","box-selector-image",4,"ngIf"],["src","assets/icon/course-private-box.png","class","box-selector-image",4,"ngIf"],[1,"box-selector-text"],[1,"montserrat","box-selector-title"],[1,"montserrat","color-light","box-selector-subtitle"],["class","box-selector-level color-light",3,"ngStyle",4,"ngIf"],["class","montserrat color-light box-selector-bottom",4,"ngIf"],[1,"border-separator","mt-24","mb-24"],["src","assets/icon/course-collective-box.png",1,"box-selector-image"],["src","assets/icon/course-private-box.png",1,"box-selector-image"],[1,"box-selector-level","color-light",3,"ngStyle"],[1,"montserrat","color-light","box-selector-bottom"],["src","assets/icon/icon-location-grey.png",1,"box-selector-location"],[1,"mt-24","mb-12","content-title-c","uppercase"],[1,"montserrat","mt-12","mb-24","pt-8","pb-8","user-booking"],[1,"user-booking-img"],[1,"user-booking-content"],[1,"color-light","user-booking-subheader"],[1,"user-booking-header"],[1,"user-booking-title"],[1,"mt-24","mb-12","content-title-c"],[1,"pt-12","mt-32","mb-24","content-title-separator"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"img",4),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"img",5),e.NdJ("click",function(){return o.toggleMenu()}),e.qZA()(),e.YNc(10,Q,18,11,"div",6),e.YNc(11,B,17,11,"div",6),e.qZA(),e.TgZ(12,"div",7)(13,"div",8),e.YNc(14,Y,12,9,"div",9),e.YNc(15,L,2,1,"div",10),e.YNc(16,J,3,3,"div",11),e.YNc(17,ee,23,12,"ng-container",12),e.YNc(18,te,2,1,"div",13),e.YNc(19,ne,3,3,"div",11),e.YNc(20,xe,23,12,"ng-container",12),e.qZA()()()(),e._UZ(21,"app-footer",14)),2&i&&(e.xp6(7),e.Oqu(e.lcZ(8,10,"scan")),e.xp6(3),e.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),e.xp6(1),e.Q6J("ngIf",o.clientMonitor&&!o.clientMonitor.main),e.xp6(3),e.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),e.xp6(1),e.Q6J("ngIf",o.bookingsToday),e.xp6(1),e.Q6J("ngIf",o.bookingsToday&&!o.bookingsToday.length),e.xp6(1),e.Q6J("ngForOf",o.bookingsToday),e.xp6(1),e.Q6J("ngIf",o.bookingsTomorrow),e.xp6(1),e.Q6J("ngIf",o.bookingsTomorrow&&!o.bookingsTomorrow.length),e.xp6(1),e.Q6J("ngForOf",o.bookingsTomorrow))},dependencies:[p.sg,p.O5,p.PC,x.W2,k.c,C.X$],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-user-data[_ngcontent-%COMP%]{display:flex;width:100%;align-items:flex-start;gap:16px}.header-user-data-b[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;gap:16px}.header-user-data-img[_ngcontent-%COMP%]{width:54px;min-width:54px;height:54px;position:relative;border-radius:54px}.header-user-data-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.header-user-data-text[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:4px}.header-user-data-text-top[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.header-user-data-text-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:11px}.header-user-data-text-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.header-user-data-text-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:17px;color:#fff;font-weight:500}.header-user-data-text-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-user-data-text-subtitle[_ngcontent-%COMP%]{font-size:13px}.header-user-data-text-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-user-data-text-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px}.content-title-separator[_ngcontent-%COMP%]{font-size:17px;color:#fff;font-weight:500;text-transform:capitalize}.content-title-c[_ngcontent-%COMP%]{font-size:12px;color:#fff}.user-booking[_ngcontent-%COMP%]{display:flex;width:100%;gap:12px;align-items:center}.user-booking-content[_ngcontent-%COMP%]{width:100%;display:flex;gap:4px;flex-direction:column}.user-booking-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.user-booking-title[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.user-booking-img[_ngcontent-%COMP%]{width:50px;min-width:50px;height:50px;border-radius:50px;position:relative}.user-booking-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.user-booking-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.user-booking-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.user-booking-subheader[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:11px}.user-booking-subheader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.user-booking-level[_ngcontent-%COMP%]{color:#80adff}.box-radius[_ngcontent-%COMP%]{width:100%;border-radius:8px}.box-selector-full[_ngcontent-%COMP%]{display:flex;white-space:normal;width:100%;flex-direction:column;gap:14px;align-items:flex-start;border-radius:8px}.box-selector-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.box-selector-middle[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;width:100%}.box-selector-bottom-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.box-selector-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px}.box-selector-bottom-left[_ngcontent-%COMP%], .box-selector-bottom-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.box-selector-bottom-number[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:16px;background:#e9484a;color:#fff;font-size:11px;display:flex;align-items:center;justify-content:center}.box-selector-bottom-users[_ngcontent-%COMP%]{display:block;position:relative;width:40px;height:40px}.box-selector-bottom-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute;border-radius:40px;border:1px solid var(--ion-back-color-dark)}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){right:0}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){right:6px}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){right:12px}.box-selector-date[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.box-selector-price[_ngcontent-%COMP%]{font-size:13px}.box-selector-middle-interior[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.box-selector-image-wrapper[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:8px;position:relative}.box-selector-image[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:8px}.box-selector-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.box-selector-title[_ngcontent-%COMP%]{color:#fff;font-size:14px}.box-selector-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px}.box-selector-subtitle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.box-selector-level[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px;border-radius:20px}.box-selector-location[_ngcontent-%COMP%]{width:13px}.border-separator[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #444953;height:1px}"]}),a})()}];let ve=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(he),u.Bz]}),a})();var be=s(822);let Ce=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,b.u5,x.Pc,ve,be.K,C.aw]}),a})()},4036:(P,m,s)=>{s.d(m,{z:()=>x});var p=s(6973),b=s(305);function x(u,d){const _="object"==typeof d;return new Promise((l,h)=>{const v=new b.Hp({next:e=>{l(e),v.unsubscribe()},error:h,complete:()=>{_?l(d.defaultValue):h(new p.K)}});u.subscribe(v)})}}}]);