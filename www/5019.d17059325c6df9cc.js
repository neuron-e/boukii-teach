"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5019],{5019:(H,v,a)=>{a.r(v),a.d(v,{ClientDetailPageModule:()=>F});var d=a(6814),_=a(6223),m=a(3582),p=a(5367),u=a(5861),x=a(4036),f=a(6676),M=a(3659),C=a(8187),t=a(6689),b=a(2234),P=a(5693),Z=a(3271),y=a(2425),O=a(7364),w=a(9844);function T(i,s){1&i&&(t.TgZ(0,"div",25),t._uU(1," Groupe "),t.qZA())}function D(i,s){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.getLanguageById(n.clientMonitor.main.language1_id)," \xb7 ")}}function A(i,s){if(1&i&&(t.TgZ(0,"div",26)(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t.YNc(6,D,2,1,"ng-container",22),t._uU(7),t.qZA()(),t.TgZ(8,"div",32)(9,"div"),t._uU(10),t.qZA(),t._UZ(11,"img",33),t.qZA(),t.TgZ(12,"div",34),t._UZ(13,"img",35)(14,"img",36)(15,"img",37)(16,"img",38),t.qZA()()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("src",n.clientMonitor.main.image?n.clientMonitor.main.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH),t.xp6(4),t.Q6J("ngIf",n.clientMonitor.main.language1_id),t.xp6(1),t.AsE(" ",n.getCountryById(n.clientMonitor.main.country)," \xb7 ",n.getBirthYears(n.clientMonitor.main.birth_date)," ans "),t.xp6(3),t.AsE("",n.clientMonitor.main.first_name," ",n.clientMonitor.main.last_name,"")}}function S(i,s){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.getLanguageById(n.clientMonitor.language1_id)," \xb7 ")}}function I(i,s){if(1&i&&(t.TgZ(0,"div",26)(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t.YNc(6,S,2,1,"ng-container",22),t._uU(7),t.qZA()(),t.TgZ(8,"div",32)(9,"div"),t._uU(10),t.qZA()(),t.TgZ(11,"div",34),t._UZ(12,"img",35)(13,"img",36)(14,"img",37)(15,"img",38),t.qZA()()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("src",n.clientMonitor.image?n.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH),t.xp6(4),t.Q6J("ngIf",n.clientMonitor.language1_id),t.xp6(1),t.AsE(" ",n.getCountryById(n.clientMonitor.country)," \xb7 ",n.clientMonitor.birth_years," ans "),t.xp6(3),t.AsE("",n.clientMonitor.first_name," ",n.clientMonitor.last_name,"")}}function k(i,s){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.getLanguageById(n.clientMonitor.language1_id)," \xb7 ")}}function U(i,s){if(1&i&&(t.TgZ(0,"div",39)(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t.YNc(6,k,2,1,"ng-container",22),t._uU(7),t.qZA()(),t.TgZ(8,"div",32)(9,"div"),t._uU(10),t.qZA()(),t.TgZ(11,"div",34),t._UZ(12,"img",35)(13,"img",36)(14,"img",37)(15,"img",38),t.qZA()()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("src",n.clientMonitor.image?n.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH),t.xp6(4),t.Q6J("ngIf",n.clientMonitor.language1_id),t.xp6(1),t.AsE(" ",n.getCountryById(n.clientMonitor.country)," \xb7 ",n.clientMonitor.birth_years," ans "),t.xp6(3),t.AsE("",n.clientMonitor.first_name," ",n.clientMonitor.last_name,"")}}const J=function(i){return{"opacity-light":i}};function L(i,s){if(1&i){const n=t.EpF();t.TgZ(0,"div",42),t.NdJ("click",function(){const r=t.CHM(n).index,c=t.oxw(2);return t.KtG(c.changeSport(r))}),t._UZ(1,"img",28),t.TgZ(2,"div",43),t._uU(3),t.qZA()()}if(2&i){const n=s.$implicit;t.Q6J("ngClass",t.VKq(3,J,!n.selected)),t.xp6(1),t.Q6J("src",n.selected?n.icon_selected:n.icon_unselected,t.LSH),t.xp6(2),t.Oqu(n.name)}}function B(i,s){if(1&i&&(t.TgZ(0,"div",40),t.YNc(1,L,4,5,"div",41),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.clientMonitor.sports)}}function z(i,s){if(1&i){const n=t.EpF();t.TgZ(0,"app-level-full",44),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.goTo("client-level","client","1","1",o.clientId,o.sportSelected))}),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("allLevels",n.sportDegrees)("selectLevel",n.clientMonitor.degree_sport)("size",280)}}function Q(i,s){if(1&i&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.clientMonitor.observations.general," ")}}function Y(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div",46),t._uU(2,"Notes de l'\xe9cole"),t.qZA(),t.TgZ(3,"div",45),t._uU(4),t.qZA(),t.BQk()),2&i){const n=t.oxw();t.xp6(4),t.hij(" ",n.clientMonitor.observations.notes," ")}}function j(i,s){if(1&i&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.hij(" ",n.clientMonitor.observations.historical," ")}}const q=[{path:"",component:(()=>{var i;class s{constructor(e,o,r,c,l,g,h){this.router=e,this.activatedRoute=o,this.monitorDataService=r,this.sharedDataService=c,this.teachService=l,this.toastr=g,this.spinnerService=h,this.showGeneral=!0,this.showSports=!1,this.showWinter=!0,this.showSummer=!1,this.showOther=!1,this.showLevel=!1,this.dataSports=[{id:1,name:"Ski",image:"assets/icon/icons-outline-disciplinas-1.svg",checked:!1},{id:2,name:"Snowboard",image:"assets/icon/icons-outline-disciplinas-2.svg",checked:!1},{id:3,name:"Telemark",image:"assets/icon/icons-outline-disciplinas-3.svg",checked:!1},{id:4,name:"S.Rando",image:"assets/icon/icons-outline-disciplinas-4.svg",checked:!1}],this.currentLevel=0,this.degrees=[],this.sportDegrees=[],this.sports=[],this.languages=[]}ngOnInit(){var e=this;return(0,u.Z)(function*(){e.subscription=e.monitorDataService.getMonitorData().subscribe(function(){var o=(0,u.Z)(function*(r){if(r){e.monitorData=r;try{e.degrees=yield(0,x.z)(e.sharedDataService.fetchDegrees(e.monitorData.active_school)),e.sports=yield(0,x.z)(e.sharedDataService.fetchSports(e.monitorData.active_school)),e.languages=yield(0,x.z)(e.sharedDataService.fetchLanguages())}catch(c){console.error("Error fetching data:",c),e.toastr.error("Erreur lors du chargement des donn\xe9es")}e.activatedRoute.params.subscribe(function(){var c=(0,u.Z)(function*(l){e.clientId=+l.id,e.clientId?(e.spinnerService.show(),yield e.getClient(),e.spinnerService.hide()):e.goTo("clients")});return function(l){return c.apply(this,arguments)}}())}});return function(r){return o.apply(this,arguments)}}())})()}getLanguageById(e){const o=this.languages.find(r=>r.id===e);return o?o.code.toUpperCase():""}getCountryById(e){const o=M.M.find(r=>r.id===e);return o?o.iso:"Aucun"}getProvinceById(e){const o=C.J.find(r=>r.id===e);return o?o.name:"Aucune"}getClient(){var e=this;return(0,u.Z)(function*(){try{const r=(yield e.teachService.getData(`teach/clients/${e.clientId}`).toPromise()).data;if(r){const c=f(r.birth_date),l=f().diff(c,"years");r.birth_years=l,r.degree_sport=0,r.sports&&r.sports.length&&r.sports[0]&&(r.sports[0].selected=!0,r.sports[0].pivot.degree_id&&(r.degree_sport=r.sports[0].pivot.degree_id)),e.clientMonitor=r;let g=1;e.clientMonitor&&e.clientMonitor.sports&&e.clientMonitor.sports.length&&e.clientMonitor.sports[0].id&&(g=e.clientMonitor.sports[0].id),e.sportSelected=g,e.sportDegrees=e.degrees.filter(h=>h.sport_id===g),console.log(e.clientMonitor)}else e.goTo("clients")}catch(o){console.error("There was an error fetching clients!",o)}})()}changeSport(e){let o=0;this.clientMonitor.sports[e]&&(this.clientMonitor.sports.forEach(r=>{r.selected=!1}),this.clientMonitor.sports[e].selected=!0,this.clientMonitor.sports[e].pivot.degree_id&&(o=this.clientMonitor.sports[e].pivot.degree_id),this.sportSelected=this.clientMonitor.sports[e].id),this.clientMonitor.degree_sport=o,this.sportDegrees=this.degrees.filter(r=>r.sport_id===this.clientMonitor.sports[e].id),console.log("Sport Degrees:",this.sportDegrees)}getBirthYears(e){const o=f(e);return f().diff(o,"years")}doShowLevel(e){this.selectedSport=e,this.currentLevel=e.level?e.level:0,this.showLevel=!0}updateLevel(){this.selectedSport.level=this.currentLevel,this.currentLevel=0,this.showLevel=!1}goTo(...e){this.router.navigate(e)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(i=s).\u0275fac=function(e){return new(e||i)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(b.q),t.Y36(P.g),t.Y36(Z.b),t.Y36(y._W),t.Y36(O.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-client-detail"]],decls:35,vars:9,consts:[[1,"content-size","content-background-image","status-bar-overlap"],[1,"background-color-dark","padding-wrapper"],[1,"header-content","mb-12"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],["class","header-top-title",4,"ngIf"],["class","header-user-data mt-24",4,"ngIf"],[1,"padding-wrapper"],[1,"background-color-dark","box-radius"],["class","header-user-data padding-wrapper",4,"ngIf"],[1,"box-top"],["class","box-top-left",4,"ngIf"],[1,"pt-24"],["class","cursor-pointer",3,"allLevels","selectLevel","size","click",4,"ngIf"],[1,"padding-wrapper","mt-8"],[1,"content-button","btn-back-primary","montserrat",3,"click"],[1,"flex-title-selector","mt-32","mb-8","cursor-pointer"],[1,"flex-title-selector-interior"],[1,"background-color-dark","flex-title-selector-icon"],["src","assets/icon/icon-observations.png"],[1,"flex-title-selector-text"],[1,"background-color-dark","box-radius","box-observations"],["class","montserrat color-light text-observations",4,"ngIf"],[4,"ngIf"],["src","assets/icon/icon-historic.png"],[1,"background-color-dark","box-radius","box-observations","mb-24"],[1,"header-top-title"],[1,"header-user-data","mt-24"],[1,"header-user-data-img"],[3,"src"],[1,"header-user-data-text"],[1,"header-user-data-text-top"],[1,"color-light"],[1,"header-user-data-text-title"],["src","assets/icon/icon-crown.png"],[1,"header-user-data-text-icons"],["src","assets/icon/icon-message-box.png",1,"cursor-pointer"],["src","assets/icon/icon-phone-box.png",1,"cursor-pointer"],["src","assets/icon/icon-mail-box.png",1,"cursor-pointer"],["src","assets/icon/icon-ticket-box.png",1,"cursor-pointer"],[1,"header-user-data","padding-wrapper"],[1,"box-top-left"],["class","box-top-icon cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"box-top-icon","cursor-pointer",3,"ngClass","click"],[1,"montserrat"],[1,"cursor-pointer",3,"allLevels","selectLevel","size","click"],[1,"montserrat","color-light","text-observations"],[1,"montserrat","mt-12","pt-8","pb-8","title-observations"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),t.NdJ("click",function(){return o.goTo("clients")}),t.qZA(),t.YNc(5,T,2,0,"div",4),t.qZA(),t.YNc(6,A,17,6,"div",5),t.YNc(7,I,16,6,"div",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7),t.YNc(10,U,16,6,"div",8),t.TgZ(11,"div",9),t.YNc(12,B,2,1,"div",10),t.qZA(),t.TgZ(13,"div",11),t.YNc(14,z,1,3,"app-level-full",12),t.TgZ(15,"div",13)(16,"button",14),t.NdJ("click",function(){return o.goTo("client-level","client","1","1",o.clientId,o.sportSelected)}),t._uU(17," \xc9valuer les progr\xe8s "),t.qZA()()()(),t.TgZ(18,"div",15)(19,"div",16)(20,"div",17),t._UZ(21,"img",18),t.qZA(),t.TgZ(22,"div",19),t._uU(23," Observations "),t.qZA()()(),t.TgZ(24,"div",20),t.YNc(25,Q,2,1,"div",21),t.YNc(26,Y,5,1,"ng-container",22),t.qZA(),t.TgZ(27,"div",15)(28,"div",16)(29,"div",17),t._UZ(30,"img",23),t.qZA(),t.TgZ(31,"div",19),t._uU(32," Historique "),t.qZA()()(),t.TgZ(33,"div",24),t.YNc(34,j,2,1,"div",21),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),t.xp6(1),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),t.xp6(1),t.Q6J("ngIf",o.clientMonitor&&!o.clientMonitor.main),t.xp6(3),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),t.xp6(2),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.sports),t.xp6(2),t.Q6J("ngIf",o.clientMonitor&&o.sportDegrees&&o.sportDegrees.length),t.xp6(11),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.observations.general),t.xp6(1),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.observations.notes),t.xp6(8),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.observations.historical))},dependencies:[d.mk,d.sg,d.O5,m.W2,w.L],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-user-data[_ngcontent-%COMP%]{display:flex;width:100%;align-items:flex-start;gap:16px}.header-user-data-img[_ngcontent-%COMP%]{width:60px;min-width:60px;height:60px;position:relative;border-radius:60px}.header-user-data-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.header-user-data-text[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:4px}.header-user-data-text-top[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.header-user-data-text-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:11px}.header-user-data-text-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.header-user-data-text-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:17px;color:#fff;font-weight:500}.header-user-data-text-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-user-data-text-subtitle[_ngcontent-%COMP%]{font-size:13px}.header-user-data-text-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-user-data-text-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px}.box-sport[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;padding:18px 12px;border-radius:8px}.box-sport[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.box-sport[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.box-sport[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.box-school[_ngcontent-%COMP%]{display:block;width:300px;min-width:300px;padding:18px 12px;border-radius:8px}.box-school-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.flex-title-selector[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.flex-title-selector-interior[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.flex-title-selector-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px;display:flex;align-items:center;justify-content:center}.flex-title-selector-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.flex-title-selector-text[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:500}.flex-title-selector-arrow[_ngcontent-%COMP%]{width:24px}.box-radius[_ngcontent-%COMP%]{width:100%;border-radius:8px}.box-top[_ngcontent-%COMP%]{padding:10px 20px;border-bottom:1px solid #43494f;display:flex;width:100%;align-items:center;justify-content:space-between}.box-top-left[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.box-top-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center}.box-top-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.box-top-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.box-observations[_ngcontent-%COMP%]{padding:12px 16px}.text-observations[_ngcontent-%COMP%]{font-size:13px}.title-observations[_ngcontent-%COMP%]{font-size:15px;border-top:1px solid #444953}.list-box-selector-users[_ngcontent-%COMP%]{width:100%;overflow-x:auto;white-space:nowrap;display:flex;gap:16px;padding:8px 0;margin-bottom:-16px;justify-content:space-around}.box-selector-user-section[_ngcontent-%COMP%]{display:flex;white-space:normal;width:80px;min-width:80px;max-width:80px;padding:8px;flex-direction:column;gap:12px;align-items:center;border-radius:8px;justify-content:flex-start}.box-selector-user-section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#fff;font-size:14px;line-height:1.3;text-align:center}.box-selector-user-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.opacity-light[_ngcontent-%COMP%]{opacity:.6}"]}),s})()}];let N=(()=>{var i;class s{}return(i=s).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(q),p.Bz]}),s})();var E=a(822);let F=(()=>{var i;class s{}return(i=s).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,_.u5,m.Pc,N,E.K]}),s})()}}]);