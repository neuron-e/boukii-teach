"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8334],{3822:(A,h,e)=>{e.d(h,{Gi:()=>N,Nn:()=>d,gH:()=>p});var N=function(n){return n.Aztec="AZTEC",n.Codabar="CODABAR",n.Code39="CODE_39",n.Code93="CODE_93",n.Code128="CODE_128",n.DataMatrix="DATA_MATRIX",n.Ean8="EAN_8",n.Ean13="EAN_13",n.Itf="ITF",n.Pdf417="PDF_417",n.QrCode="QR_CODE",n.UpcA="UPC_A",n.UpcE="UPC_E",n}(N||{}),p=function(n){return n.CalendarEvent="CALENDAR_EVENT",n.ContactInfo="CONTACT_INFO",n.DriversLicense="DRIVERS_LICENSE",n.Email="EMAIL",n.Geo="GEO",n.Isbn="ISBN",n.Phone="PHONE",n.Product="PRODUCT",n.Sms="SMS",n.Text="TEXT",n.Url="URL",n.Wifi="WIFI",n.Unknown="UNKNOWN",n}(p||{}),d=function(n){return n.Front="FRONT",n.Back="BACK",n}(d||{})},8334:(A,h,e)=>{e.r(h),e.d(h,{ScanPageModule:()=>K});var N=e(177),p=e(9417),C=e(8974),d=e(3314),l=e(467),P=e(7464),E=e(3822);const o=(0,P.F3)("BarcodeScanner",{web:()=>e.e(870).then(e.bind(e,870)).then(i=>new i.BarcodeScannerWeb)});var r=e(6996),n=e(4621),M=e(5794),L=e(8551),D=e(1547),U=e(5473);const S=[{path:"",component:(()=>{var i;class c{constructor(t,s,a,u,m){this.router=t,this.menuService=s,this.toastr=a,this.spinnerService=u,this.translate=m,this.handling=!1}ionViewDidEnter(){this.initializeScanner()}initializeScanner(){var t=this;return(0,l.A)(function*(){try{if("granted"!==(yield o.checkPermissions()).camera&&"granted"!==(yield o.requestPermissions()).camera)return void t.toastr.error(t.translate.instant("toast.scan_error"));const a=document.querySelector(".qr-scanner-wrapper"),u=document.querySelector(".qr-scanner-frame"),m=document.querySelector(".ion-content-scan"),R=document.body;a&&m&&u?(a.classList.add("barcode-scanner-active"),m.classList.add("ion-content-transparent"),R.style.background="transparent",u.classList.remove("display-none")):console.error("qr-scanner-wrapper element not found"),yield o.startScan({formats:[E.Gi.QrCode]}),t.scanSub=yield o.addListener("barcodesScanned",function(){var g=(0,l.A)(function*(f){var O;if(t.handling)return;const x=null===(O=f.barcodes)||void 0===O||null===(O=O[0])||void 0===O?void 0:O.rawValue;if(x){t.handling=!0,t.spinnerService.show();try{var b;yield t.stopScanner(),yield null===(b=t.scanSub)||void 0===b?void 0:b.remove(),t.toastr.success(t.translate.instant("toast.scanned_successfully")),t.router.navigate(["/scan-client",x])}finally{t.spinnerService.hide(),t.handling=!1}}});return function(f){return g.apply(this,arguments)}}()),yield o.addListener("scanError",g=>{var f;t.toastr.error(null!==(f=null==g?void 0:g.message)&&void 0!==f?f:t.translate.instant("toast.scan_error"))})}catch(s){console.error("Error starting QR Code scanner:",s),t.toastr.error(t.translate.instant("toast.scan_error")),yield t.stopScanner()}})()}stopScanner(){return(0,l.A)(function*(){const t=document.querySelector(".qr-scanner-wrapper"),s=document.querySelector(".qr-scanner-frame"),a=document.querySelector(".ion-content-scan"),u=document.body;t&&a&&s&&(t.classList.remove("barcode-scanner-active"),a.classList.remove("ion-content-transparent"),u.style.removeProperty("background"),s.classList.add("display-none")),yield o.stopScan()})()}ionViewWillLeave(){var t;this.stopScanner(),null===(t=this.scanSub)||void 0===t||t.remove()}ngOnDestroy(){var t;null===(t=this.scanSub)||void 0===t||t.remove()}toggleMenu(){this.menuService.toggleMenu()}goTo(...t){this.router.navigate(t)}}return(i=c).\u0275fac=function(t){return new(t||i)(r.rXU(d.Ix),r.rXU(n.$),r.rXU(M.tw),r.rXU(L.D),r.rXU(D.c$))},i.\u0275cmp=r.VBU({type:i,selectors:[["app-scan"]],decls:17,vars:3,consts:[[1,"ion-content-scan"],[1,"content-size"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper","header-index"],[1,"header-section-content"],[1,"header-section-title"],["src","assets/icon/icon-scan-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],[1,"qr-scanner-wrapper"],[1,"qr-scanner-frame","display-none"],[1,"corner","top-left"],[1,"corner","top-right"],[1,"corner","bottom-left"],[1,"corner","bottom-right"],["section","scan"]],template:function(t,s){1&t&&(r.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),r.nrm(5,"img",5),r.j41(6,"div"),r.EFF(7),r.nI1(8,"translate"),r.k0s()(),r.j41(9,"img",6),r.bIt("click",function(){return s.toggleMenu()}),r.k0s()()(),r.j41(10,"div",7)(11,"div",8),r.nrm(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),r.k0s()()()(),r.nrm(16,"app-footer",13)),2&t&&(r.R7$(7),r.JRh(r.bMT(8,1,"scan")))},dependencies:[C.W9,U.n,D.D9],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-index[_ngcontent-%COMP%]{z-index:10;position:relative}.qr-scanner-wrapper[_ngcontent-%COMP%]{width:100%;height:100vh;position:fixed;top:0;left:0}.qr-scanner-frame[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:210px;height:210px;border:1px solid transparent}.corner[_ngcontent-%COMP%]{position:absolute;width:32px;height:32px;background-color:transparent;border:4px solid var(--ion-color-primary)}.top-left[_ngcontent-%COMP%]{top:0;left:0;border-bottom:none;border-right:none}.top-right[_ngcontent-%COMP%]{top:0;right:0;border-bottom:none;border-left:none}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0;border-top:none;border-right:none}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0;border-top:none;border-left:none}"]}),c})()}];let W=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.$C({type:i}),i.\u0275inj=r.G2t({imports:[d.iI.forChild(S),d.iI]}),c})();var w=e(5553);let K=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.$C({type:i}),i.\u0275inj=r.G2t({imports:[N.MD,p.YN,C.bv,W,w.h,D.h]}),c})()}}]);