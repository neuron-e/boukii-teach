"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8478],{8478:(b,d,a)=>{a.r(d),a.d(d,{MeteoPageModule:()=>D});var g=a(6814),u=a(6223),p=a(3582),l=a(8520),s=a(5861),f=a(4036),m=a(6676),t=a(2029),h=a(2234),x=a(5693),y=a(3271),P=a(2425),_=a(7364),v=a(3911);function w(n,r){if(1&n&&t._UZ(0,"img",17),2&n){const i=t.oxw();t.Q6J("src",i.monitorStation.image,t.LSH)}}function O(n,r){if(1&n&&(t.TgZ(0,"div",18),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Oqu(i.monitorStation.name)}}function Z(n,r){if(1&n&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Oqu(i.monitorStation.city)}}function C(n,r){if(1&n&&(t.TgZ(0,"div",20)(1,"div",21),t._uU(2),t.qZA(),t._UZ(3,"img",22),t.TgZ(4,"div",19),t._uU(5),t.qZA()()),2&n){const i=r.$implicit;t.xp6(2),t.Oqu(i.time),t.xp6(1),t.Q6J("src","assets/icon/weather/"+i.icon+".png",t.LSH),t.xp6(2),t.hij("",i.temperature,"\xba")}}function T(n,r){if(1&n&&(t.TgZ(0,"div",25)(1,"div",21),t._uU(2),t.qZA(),t._UZ(3,"img",22),t.TgZ(4,"div",26)(5,"div",19),t._uU(6),t.qZA(),t.TgZ(7,"div",19),t._uU(8),t.qZA()()()),2&n){const i=r.$implicit,e=t.oxw(2);t.xp6(2),t.Oqu(e.weekdays[e.getDayIndex(i.day)]),t.xp6(1),t.Q6J("src","assets/icon/weather/"+i.icon+".png",t.LSH),t.xp6(3),t.hij("",i.temperature_min,"\xba"),t.xp6(2),t.hij("",i.temperature_max,"\xba")}}function S(n,r){if(1&n&&(t.TgZ(0,"div",23),t.YNc(1,T,9,4,"div",24),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.meteoWeek)}}const k=[{path:"",component:(()=>{var n;class r{constructor(e,o,c,M,U,Y,z){this.router=e,this.monitorDataService=o,this.sharedDataService=c,this.teachService=M,this.toastr=U,this.spinnerService=Y,this.translate=z,this.stations=[],this.meteo=[],this.meteoWeek=[],this.translate.onLangChange.subscribe(()=>{this.loadWeekdays()}),this.loadWeekdays()}loadWeekdays(){this.weekdays=[this.translate.instant("days_abbrev.sunday"),this.translate.instant("days_abbrev.monday"),this.translate.instant("days_abbrev.tuesday"),this.translate.instant("days_abbrev.wednesday"),this.translate.instant("days_abbrev.thursday"),this.translate.instant("days_abbrev.friday"),this.translate.instant("days_abbrev.saturday")]}ngOnInit(){var e=this;return(0,s.Z)(function*(){e.subscription=e.monitorDataService.getMonitorData().subscribe(function(){var o=(0,s.Z)(function*(c){if(c){e.spinnerService.show(),e.monitorData=c;try{e.stations=yield(0,f.z)(e.sharedDataService.fetchStations())}catch(M){console.error("Error fetching data:",M),e.toastr.error(e.translate.instant("toast.error_loading_data"))}yield e.getStation(),yield e.getMeteo(),yield e.getMeteoWeek(),e.spinnerService.hide()}});return function(c){return o.apply(this,arguments)}}())})()}getStation(){var e=this;return(0,s.Z)(function*(){e.monitorStation=e.stations.find(o=>o.id===e.monitorData.active_station)})()}getMeteo(){var e=this;return(0,s.Z)(function*(){try{const o=yield e.teachService.getData("teach/weather",null,{station_id:e.monitorData.active_station}).toPromise();e.meteo=o.data}catch(o){console.error("There was an error!",o)}})()}getMeteoWeek(){var e=this;return(0,s.Z)(function*(){try{const o=yield e.teachService.getData("teach/weather/week",null,{station_id:e.monitorData.active_station}).toPromise();e.meteoWeek=o.data}catch(o){console.error("There was an error!",o)}})()}getDayIndex(e){return m(e,"YYYY-MM-DD").day()}goTo(...e){this.router.navigate(e)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(n=r).\u0275fac=function(e){return new(e||n)(t.Y36(l.F0),t.Y36(h.q),t.Y36(x.g),t.Y36(y.b),t.Y36(P._W),t.Y36(_.V),t.Y36(v.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-meteo"]],decls:22,vars:11,consts:[[1,"content-size","dark-background"],[1,"content-img-wrapper"],[1,"wrapper-back"],["class","content-img-back",3,"src",4,"ngIf"],[1,"box-icon-left","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg"],[1,"content-img-text"],["class","content-img-title",4,"ngIf"],[1,"content-img-text-flex"],["src","assets/icon/icon-location-blue.png"],["class","montserrat",4,"ngIf"],[1,"padding-wrapper"],[1,"montserrat","mb-8","color-light","title-selector-small","uppercase"],[1,"background-color-dark","flex-weather","pt-24"],["class","flex-weather-item pb-24",4,"ngFor","ngForOf"],[1,"montserrat","mt-24","mb-8","color-light","title-selector-small","uppercase"],["class","background-color-dark flex-weather pt-24  pb-24",4,"ngIf"],[1,"content-img-back",3,"src"],[1,"content-img-title"],[1,"montserrat"],[1,"flex-weather-item","pb-24"],[1,"color-light","montserrat"],[3,"src"],[1,"background-color-dark","flex-weather","pt-24","pb-24"],["class","flex-weather-item",4,"ngFor","ngForOf"],[1,"flex-weather-item"],[2,"display","flex","align-items","center","gap","4px"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),t._UZ(3,"div",2),t.YNc(4,w,1,1,"img",3),t.TgZ(5,"div",4),t.NdJ("click",function(){return o.goTo("home")}),t._UZ(6,"img",5),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,O,2,1,"div",7),t.TgZ(9,"div",8),t._UZ(10,"img",9),t.YNc(11,Z,2,1,"div",10),t.qZA()()(),t.TgZ(12,"div",11)(13,"div",12),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",13),t.YNc(17,C,6,3,"div",14),t.qZA(),t.TgZ(18,"div",15),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,S,2,1,"div",16),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.monitorStation&&o.monitorStation.image),t.xp6(4),t.Q6J("ngIf",o.monitorStation&&o.monitorStation.name),t.xp6(3),t.Q6J("ngIf",o.monitorStation&&o.monitorStation.city),t.xp6(3),t.hij(" ",t.lcZ(15,7,"today")," "),t.xp6(3),t.Q6J("ngForOf",o.meteo),t.xp6(2),t.hij(" ",t.lcZ(20,9,"next_days")," "),t.xp6(2),t.Q6J("ngIf",o.meteoWeek&&o.meteoWeek.length))},dependencies:[g.sg,g.O5,p.W2,v.X$],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.content-img-wrapper[_ngcontent-%COMP%]{width:100%;height:calc(200px + env(safe-area-inset-top));position:relative}.content-img-back[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.content-img-text[_ngcontent-%COMP%]{position:absolute;bottom:16px;left:16px;display:flex;flex-direction:column;gap:4px}.content-img-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#fff}.content-img-text-flex[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center}.content-img-text-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.content-img-text-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#fff}.wrapper-back[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:70%;background:linear-gradient(to top,rgba(0,0,0,.9) 0%,rgba(0,0,0,.4) 70%,transparent 100%);z-index:0}.box-icon-left[_ngcontent-%COMP%]{position:absolute;top:calc(16px + env(safe-area-inset-top));left:16px;width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#2b303b}.box-icon-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.box-icon-right[_ngcontent-%COMP%]{position:absolute;top:calc(16px + env(safe-area-inset-top));right:16px;width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#2b303b}.box-icon-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.flex-weather[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between;padding:6px 2px;flex-wrap:wrap}.flex-weather-item[_ngcontent-%COMP%]{flex:0 0 16.6666666667%;display:flex;flex-direction:column;gap:4px;justify-content:center;align-items:center}.flex-weather-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.flex-weather-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.title-selector-small[_ngcontent-%COMP%]{font-size:12px}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.uppercase[_ngcontent-%COMP%]{text-transform:uppercase}"]}),r})()}];let A=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(k),l.Bz]}),r})(),D=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,u.u5,p.Pc,A,v.aw]}),r})()},4036:(b,d,a)=>{a.d(d,{z:()=>p});var g=a(6973),u=a(305);function p(l,s){const f="object"==typeof s;return new Promise((m,t)=>{const h=new u.Hp({next:x=>{m(x),h.unsubscribe()},error:t,complete:()=>{f?m(s.defaultValue):t(new g.K)}});l.subscribe(h)})}}}]);