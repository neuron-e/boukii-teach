"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{6488:(T,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>L});var u=r(6814),g=r(6223),h=r(3582),l=r(5367),m=r(5861),c=r(4036),t=r(6689),f=r(3271),v=r(2234),x=r(5693),_=r(2425),P=r(7364);function w(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"div",6),t._uU(2," Login "),t.qZA(),t.TgZ(3,"div",7)(4,"div",8),t._uU(5," Email "),t.qZA(),t.TgZ(6,"div",9),t._UZ(7,"img",10),t.TgZ(8,"input",11),t.NdJ("ngModelChange",function(o){t.CHM(i);const a=t.oxw();return t.KtG(a.email=o)}),t.qZA()(),t.TgZ(9,"div",8),t._uU(10," Password "),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"img",12),t.TgZ(13,"input",13),t.NdJ("ngModelChange",function(o){t.CHM(i);const a=t.oxw();return t.KtG(a.password=o)}),t.qZA(),t.TgZ(14,"img",14),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.togglePassword())}),t.qZA()()(),t.TgZ(15,"button",15),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onLogin())}),t._uU(16," Login "),t.qZA(),t.TgZ(17,"div",16),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.showLogin=!1)}),t._uU(18," Forgot your password? "),t.qZA()()}if(2&e){const i=t.oxw();t.xp6(8),t.Q6J("ngModel",i.email),t.xp6(5),t.Q6J("ngModel",i.password)("type",i.showPassword?"text":"password"),t.xp6(2),t.Q6J("disabled",!i.email||!i.password)}}function M(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"div",17),t._uU(2," Recover your password "),t.qZA(),t.TgZ(3,"div",18),t._uU(4," Lorem ipsum dolor sit amet, consectetur "),t.qZA(),t.TgZ(5,"div")(6,"div",8),t._uU(7," Email "),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"img",10)(10,"input",19),t.qZA()(),t.TgZ(11,"button",20),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.showLogin=!0)}),t._uU(12," Reset password "),t.qZA()()}}const Z=[{path:"",component:(()=>{var e;class s{constructor(n,o,a,d,C,y){this.router=n,this.teachService=o,this.monitorDataService=a,this.sharedDataService=d,this.toastr=C,this.spinnerService=y,this.showLogin=!0,this.showPassword=!1}ngOnInit(){}togglePassword(){this.showPassword=!this.showPassword}onLogin(){var n=this;return(0,m.Z)(function*(){n.spinnerService.show(),n.teachService.login(n.email,n.password).subscribe(function(){var o=(0,m.Z)(function*(a){n.toastr.success("Connect\xe9 correctement"),console.log("Login successful",a),localStorage.setItem("token",a.data.token),localStorage.setItem("monitorId",a.data.user.monitors[0].id),n.monitorDataService.setMonitorData(a.data.user.monitors[0]);try{yield(0,c.z)(n.sharedDataService.fetchDegrees(a.data.user.monitors[0].active_school)),yield(0,c.z)(n.sharedDataService.fetchSports(a.data.user.monitors[0].active_school)),yield(0,c.z)(n.sharedDataService.fetchLanguages()),yield(0,c.z)(n.sharedDataService.fetchStations()),yield(0,c.z)(n.sharedDataService.fetchSchools())}catch(d){console.error("Error fetching data:",d),n.toastr.error("Erreur lors du chargement des donn\xe9es")}n.spinnerService.hide(),n.goTo("home"),n.email="",n.password=""});return function(a){return o.apply(this,arguments)}}(),o=>{n.spinnerService.hide(),console.error("Login failed",o),n.toastr.error("Erreur d'identification")})})()}goTo(...n){this.router.navigate(n)}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(l.F0),t.Y36(f.b),t.Y36(v.q),t.Y36(x.g),t.Y36(_._W),t.Y36(P.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:8,vars:2,consts:[[1,"content-wrapper","content-background-image","status-bar-overlap-wrapper"],[1,"header-content"],[1,"header-back","background-color-dark","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg",1,"header-back-icon"],["src","assets/images/boukii-logo.png",1,"header-logo"],[4,"ngIf"],[1,"content-title"],[1,"pb-24"],[1,"input-label","color-light","montserrat"],[1,"input-form-icon","background-color-dark"],["src","assets/icon/icon-mail.png"],["type","text",1,"montserrat",3,"ngModel","ngModelChange"],["src","assets/icon/icon-password.png"],[1,"montserrat",3,"ngModel","type","ngModelChange"],["src","assets/icon/icon-eye.png",1,"cursor-pointer",3,"click"],[1,"content-button","btn-back-primary","montserrat",3,"disabled","click"],[1,"content-footer","cursor-pointer","montserrat",3,"click"],[1,"content-title-b"],[1,"content-subtitle","color-light","montserrat"],["type","text",1,"montserrat"],[1,"content-button","btn-back-primary","montserrat",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2),t.NdJ("click",function(){return o.showLogin?o.goTo("start"):o.showLogin=!0}),t._UZ(4,"img",3),t.qZA(),t._UZ(5,"img",4),t.qZA(),t.YNc(6,w,19,4,"div",5),t.YNc(7,M,13,0,"div",5),t.qZA()()),2&n&&(t.xp6(6),t.Q6J("ngIf",o.showLogin),t.xp6(1),t.Q6J("ngIf",!o.showLogin))},dependencies:[u.O5,g.Fj,g.JJ,g.On,h.W2],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-logo[_ngcontent-%COMP%]{width:100px}.header-back[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:34px;height:34px;border-radius:12px;display:flex;align-items:center;justify-content:center}.header-back-icon[_ngcontent-%COMP%]{width:22px}.content-title[_ngcontent-%COMP%]{color:#fff;text-align:left;font-size:24px;font-weight:600;line-height:1.2;margin-bottom:24px}.content-title-b[_ngcontent-%COMP%]{color:#fff;text-align:left;font-size:21px;font-weight:600;line-height:1.2;margin-bottom:12px}.content-subtitle[_ngcontent-%COMP%]{font-size:14px;margin-bottom:24px}.input-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.input-form-icon[_ngcontent-%COMP%]{width:100%;height:48px;border-radius:12px;color:#fff;padding:0 16px;display:flex;align-items:center;gap:9px;margin-bottom:24px}.input-form-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;position:relative;top:-1px}.input-form-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;font-size:15px;width:100%;border:none;background:transparent;outline:0}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.content-footer[_ngcontent-%COMP%]{text-align:center;margin-top:18px;font-size:15px}button[disabled][_ngcontent-%COMP%]{opacity:.4;pointer-events:none}"]}),s})()}];let b=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(Z),l.Bz]}),s})(),L=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,g.u5,h.Pc,b]}),s})()}}]);