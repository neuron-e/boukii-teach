"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5701],{5701:(O,h,a)=>{a.r(h),a.d(h,{CourseParticipationPageModule:()=>z});var m=a(6814),g=a(6223),x=a(3582),d=a(8520),u=a(5861),f=a(4036),b=a(9315),l=a(6676),v=a(3659),P=a(8187),e=a(2029),M=a(2234),y=a(5693),k=a(3271),w=a(2425),B=a(7364),_=a(3911);function E(i,r){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const s=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.hij(" ",t.getLanguageById(s.client.client.language1_id)," \xb7 ")}}function D(i,r){if(1&i){const s=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"label",24)(3,"input",25),e.NdJ("ngModelChange",function(n){e.CHM(s);const o=e.oxw().$implicit;return e.KtG(o.attended=n)}),e.qZA(),e._UZ(4,"div",26),e.qZA()(),e.TgZ(5,"div",27),e._uU(6),e.qZA()()}if(2&i){const s=e.oxw().$implicit,t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",s.attended),e.xp6(3),e.Oqu(t.getDateFormat(s.date))}}function T(i,r){if(1&i&&(e.ynx(0),e.YNc(1,D,7,2,"div",21),e.BQk()),2&i){const s=r.$implicit,t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.isDateBeforeOrEqualToToday(s.date))}}function A(i,r){if(1&i&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",11),e._UZ(3,"img",12),e.qZA(),e.TgZ(4,"div",13)(5,"div",14)(6,"div",15)(7,"div",16),e._uU(8),e.qZA()(),e.TgZ(9,"div",17)(10,"span",16),e.YNc(11,E,2,1,"ng-container",18),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()(),e.TgZ(14,"div",19),e.YNc(15,T,2,1,"ng-container",20),e.qZA()()),2&i){const s=r.$implicit,t=e.oxw(2);e.xp6(3),e.Q6J("src",s.client.client.image?s.client.client.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(5),e.AsE("",s.client.client.first_name," ",s.client.client.last_name,""),e.xp6(3),e.Q6J("ngIf",s.client.client.language1_id),e.xp6(1),e.lnq(" ",t.getCountryById(s.client.client.country)," \xb7 ",t.getBirthYears(s.client.client.birth_date)," ",e.lcZ(13,8,"years")," "),e.xp6(3),e.Q6J("ngForOf",s.bookings)}}function S(i,r){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,A,16,10,"div",8),e.qZA()),2&i){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.courseBookings.client_bookings)}}const L=[{path:"",component:(()=>{var i;class r{constructor(t,n,o,c,p,C,U,I){this.router=t,this.activatedRoute=n,this.monitorDataService=o,this.sharedDataService=c,this.teachService=p,this.toastr=C,this.spinnerService=U,this.translate=I,this.starterLevel={id:0,name:"D\xe9butante",level:"STARTER LEAGUE",percentage:0,color:"#c8c8c8",objectives:["Je n'ai jamais fait de ski."]},this.dataLevels=[{id:1,name:"Prince Bleu",level:"BLUE LEAGUE",percentage:30,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:2,name:"Roi Bleu",level:"BLUE LEAGUE",percentage:60,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:3,name:"Star Bleu",level:"BLUE LEAGUE",percentage:100,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:4,name:"Prince Red",level:"RED LEAGUE",percentage:30,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:5,name:"Roi Red",level:"RED LEAGUE",percentage:60,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:6,name:"Star Red",level:"RED LEAGUE",percentage:100,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:7,name:"Prince Noir",level:"BLACK LEAGUE",percentage:30,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:8,name:"Roi Noir",level:"BLACK LEAGUE",percentage:60,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:9,name:"Star Noir",level:"BLACK LEAGUE",percentage:100,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]}],this.allLevels=[this.starterLevel,...this.dataLevels],this.degrees=[],this.sports=[],this.languages=[]}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.subscription=t.monitorDataService.getMonitorData().subscribe(function(){var n=(0,u.Z)(function*(o){if(o){t.monitorData=o;try{t.degrees=yield(0,f.z)(t.sharedDataService.fetchDegrees(t.monitorData.active_school)),t.sports=yield(0,f.z)(t.sharedDataService.fetchSports(t.monitorData.active_school)),t.languages=yield(0,f.z)(t.sharedDataService.fetchLanguages())}catch(c){console.error("Error fetching data:",c),t.toastr.error(t.translate.instant("toast.error_loading_data"))}t.activatedRoute.params.subscribe(function(){var c=(0,u.Z)(function*(p){t.bookingId=+p.id,t.dateBooking=p.date,t.courseId=+p.course,t.bookingId&&t.dateBooking&&t.courseId?(t.spinnerService.show(),t.loadBookings()):t.goTo("home")});return function(p){return c.apply(this,arguments)}}())}});return function(o){return n.apply(this,arguments)}}())})()}getLanguageById(t){const n=this.languages.find(o=>o.id===t);return n?n.code.toUpperCase():""}getCountryById(t){const n=v.M.find(o=>o.id===t);return n?n.iso:"Aucun"}getProvinceById(t){const n=P.J.find(o=>o.id===t);return n?n.name:"Aucune"}loadBookings(){this.teachService.getData("teach/courses",this.courseId).subscribe(t=>{this.courseBookings=this.processBookings(t.data),this.spinnerService.hide()},t=>{console.error("There was an error!",t),this.spinnerService.hide()})}processBookings(t){t.booking_users.sort((o,c)=>{const p=l(o.date),C=l(c.date);return p.diff(C)});const n={};return t.booking_users.forEach(o=>{if(o.monitor_id===this.monitorData.id){const c=o.client_id;n[c]||(n[c]={client:o,bookings:[]}),n[c].bookings.push(o)}}),t.client_bookings=Object.values(n),t}getBirthYears(t){const n=l(t);return l().diff(n,"years")}getDateFormat(t){return l(t).format("DD-MM-YYYY")}isDateBeforeOrEqualToToday(t){const n=l(t).startOf("day"),o=l().startOf("day");return n.isSameOrBefore(o)}saveConfirm(){this.spinnerService.show();const t=[];this.courseBookings.booking_users.forEach(n=>{if(this.isDateBeforeOrEqualToToday(n.date)){let c=this.removeFieldsFromObject(n,["client","created_at","deleted_at","updated_at"]);const p=this.teachService.updateData("booking-users",n.id,c);t.push(p)}}),t.length>0?(0,b.D)(t).subscribe(n=>{this.spinnerService.hide(),this.toastr.success(this.translate.instant("toast.registered_correctly")),this.goTo("course-detail",this.bookingId,this.dateBooking)},n=>{console.error("Error occurred during updates:",n),this.spinnerService.hide(),this.toastr.error(this.translate.instant("toast.error"))}):(this.spinnerService.hide(),this.toastr.success(this.translate.instant("toast.registered_correctly")),this.goTo("course-detail",this.bookingId,this.dateBooking))}removeFieldsFromObject(t,n){return n.forEach(o=>{delete t[o]}),t}goTo(...t){this.router.navigate(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(M.q),e.Y36(y.g),e.Y36(k.b),e.Y36(w._W),e.Y36(B.V),e.Y36(_.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-participation"]],decls:13,vars:7,consts:[[1,"content-size","dark-background","status-bar-overlap"],[1,"padding-wrapper"],[1,"header-content","mb-8"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],[1,"header-top-title"],["class","member-list",4,"ngIf"],[1,"content-button","btn-back-primary","montserrat","mb-32","mt-32",3,"click"],[1,"member-list"],["class","pb-8 mb-8 member-list-item-b",4,"ngFor","ngForOf"],[1,"pb-8","mb-8","member-list-item-b"],[1,"member-list-item-inside"],[1,"member-item-img"],[3,"src"],[1,"member-item-flex"],[1,"member-item-content"],[1,"member-item-title"],[1,"montserrat"],[1,"member-item-subtitle"],[4,"ngIf"],[1,"list-check-small","pt-8"],[4,"ngFor","ngForOf"],["class","check-small-flex",4,"ngIf"],[1,"check-small-flex"],[1,"custom-radio-small","cursor-pointer"],[1,"simple-check-option-small"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"custom-check-small"],[1,"montserrat","color-light"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),e.NdJ("click",function(){return n.goTo("course-detail",n.bookingId,n.dateBooking)}),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"div",1),e.YNc(9,S,2,1,"div",5),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.saveConfirm()}),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,3,"confirm_participation")," "),e.xp6(3),e.Q6J("ngIf",n.courseBookings),e.xp6(2),e.hij(" ",e.lcZ(12,5,"confirm")," "))},dependencies:[m.sg,m.O5,g.Wl,g.JJ,g.On,x.W2,_.X$],styles:['.content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-top-subtitle[_ngcontent-%COMP%]{font-size:14px;display:block;text-align:center}.opacity-light[_ngcontent-%COMP%]{opacity:.6}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}.box-radius[_ngcontent-%COMP%]{border-radius:8px}.content-flex-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.content-flex-top-img[_ngcontent-%COMP%]{width:44px}.content-flex-top-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.content-flex-top-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:22px;font-weight:600}.content-flex-top-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.menu-section-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.menu-section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.menu-section-title-b[_ngcontent-%COMP%]{font-size:13px}.menu-section-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;background-color:var(--ion-color-primary);padding:5px 8px;border-radius:40px;font-size:12px;font-weight:500;display:flex;align-items:center;justify-content:center}.menu-section-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.menu-section-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.menu-section-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.list-box-selector-b[_ngcontent-%COMP%]{width:100%;display:flex;padding:8px 0;gap:12px;justify-content:space-between}.background-grey-translucent[_ngcontent-%COMP%]{background:rgba(65,69,78,.4)}.box-selector-type[_ngcontent-%COMP%]{display:flex;padding:12px 6px;flex-direction:column;gap:8px;align-items:center;border-radius:8px;justify-content:flex-start;text-align:center}.box-selector-type-red[_ngcontent-%COMP%]{color:#faafaf;background:#613136}.box-selector-type[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-selector-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.box-selector-type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.member-list[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:column}.member-list-item[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;width:100%;border-bottom:1px solid #444953}.member-list-item-b[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:column;width:100%;border-bottom:1px solid #444953}.member-list-item-inside[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;width:100%}.member-item-img[_ngcontent-%COMP%]{width:44px;min-width:44px;height:44px;border-radius:44px;position:relative}.member-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.member-item-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.member-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%}.member-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.member-item-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.member-item-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.member-item-subtitle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;display:flex;align-items:center;gap:2px}.member-item-bullet[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:6px;background:#e9484a}.member-item-icon[_ngcontent-%COMP%]{width:20px}.no-border[_ngcontent-%COMP%]{border:none!important}.box-selector-level[_ngcontent-%COMP%]{font-size:12px!important;color:#faafaf!important;background:#613136;padding:4px 8px;border-radius:20px}.member-item-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task-content-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.task-content-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.task-content-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.custom-radio[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.simple-check-option[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer;width:22px;height:22px}.simple-check-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.custom-check[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:22px;height:22px;background:transparent;border:1px solid #c8c8c8;border-radius:6px;display:block;align-items:center;justify-content:center}.custom-check[_ngcontent-%COMP%]:before{content:"";width:5px;height:10px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);position:absolute;top:4px;left:8px;display:none}.simple-check-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check[_ngcontent-%COMP%]{background:var(--ion-color-primary);border:none}.simple-check-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check[_ngcontent-%COMP%]:before{display:block}.list-check-small[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;gap:12px;flex-wrap:wrap}.check-small-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.check-small-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.custom-radio-small[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;position:relative;top:-1px}.simple-check-option-small[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer;width:16px;height:16px}.simple-check-option-small[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.custom-check-small[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:16px;height:16px;background:transparent;border:1px solid #c8c8c8;border-radius:6px;display:block;align-items:center;justify-content:center}.custom-check-small[_ngcontent-%COMP%]:before{content:"";width:3px;height:7px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);position:absolute;top:3px;left:6px;display:none}.simple-check-option-small[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check-small[_ngcontent-%COMP%]{background:var(--ion-color-primary);border:none}.simple-check-option-small[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check-small[_ngcontent-%COMP%]:before{display:block}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}']}),r})()}];let Z=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(L),d.Bz]}),r})();var j=a(822);let z=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,g.u5,x.Pc,Z,j.K,_.aw]}),r})()},4036:(O,h,a)=>{a.d(h,{z:()=>x});var m=a(6973),g=a(305);function x(d,u){const f="object"==typeof u;return new Promise((b,l)=>{const v=new g.Hp({next:P=>{b(P),v.unsubscribe()},error:l,complete:()=>{f?b(u.defaultValue):l(new m.K)}});d.subscribe(v)})}}}]);