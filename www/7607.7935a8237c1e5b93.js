"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7607],{7607:(Y,m,o)=>{o.r(m),o.d(m,{ClientsPageModule:()=>D});var d=o(6814),g=o(6223),f=o(3582),p=o(5367),x=o(5861),C=o(4036),v=o(6676),M=o(3659),P=o(8187),e=o(6689),b=o(2042),y=o(2234),O=o(5693),T=o(3271),w=o(2425),S=o(7364),Z=o(7913);function z(n,c){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const s=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.getLanguageById(s.language1_id)," \xb7 ")}}function A(n,c){if(1&n){const s=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const r=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.goTo("client-detail",r.id))}),e.TgZ(1,"div",11),e._UZ(2,"img",12),e.qZA(),e.TgZ(3,"div",13)(4,"div",14)(5,"div",15),e._uU(6),e.qZA()(),e.TgZ(7,"div",16),e.YNc(8,z,2,1,"ng-container",17),e._uU(9),e.qZA()()()}if(2&n){const s=c.$implicit,t=e.oxw();e.xp6(2),e.Q6J("src",s.image?s.image:"assets/icon/icons-outline-default-avatar.svg",e.LSH),e.xp6(4),e.AsE("",s.first_name," ",s.last_name,""),e.xp6(2),e.Q6J("ngIf",s.language1_id),e.xp6(1),e.AsE(" ",t.getCountryById(s.country)," \xb7 ",s.birth_years," ans ")}}const B=[{path:"",component:(()=>{var n;class c{constructor(t,i,r,a,l,u,h){this.router=t,this.menuService=i,this.monitorDataService=r,this.sharedDataService=a,this.teachService=l,this.toastr=u,this.spinnerService=h,this.searchTerm="",this.showClients=!0,this.showSchools=!1,this.languages=[]}ngOnInit(){var t=this;return(0,x.Z)(function*(){t.subscription=t.monitorDataService.getMonitorData().subscribe(function(){var i=(0,x.Z)(function*(r){if(r){t.spinnerService.show(),t.monitorData=r;try{t.languages=yield(0,C.z)(t.sharedDataService.fetchLanguages())}catch(a){console.error("Error fetching data:",a),t.toastr.error("Erreur lors du chargement des donn\xe9es")}t.teachService.getData("teach/clients").subscribe(a=>{a.forEach(l=>{const u=v(l.birth_date),h=v().diff(u,"years");l.birth_years=h}),t.clientsMonitor=a,t.filteredClients=a,console.log(t.clientsMonitor),t.spinnerService.hide()},a=>{t.spinnerService.hide(),console.error("There was an error!",a)})}});return function(r){return i.apply(this,arguments)}}())})()}getLanguageById(t){const i=this.languages.find(r=>r.id===t);return i?i.code.toUpperCase():""}getCountryById(t){const i=M.M.find(r=>r.id===t);return i?i.iso:"Aucun"}getProvinceById(t){const i=P.J.find(r=>r.id===t);return i?i.name:"Aucune"}searchClients(){if(this.searchTerm){const t=this.normalizeString(this.searchTerm);this.filteredClients=this.clientsMonitor.filter(i=>this.normalizeString(i.first_name).includes(t)||this.normalizeString(i.last_name).includes(t))}else this.filteredClients=this.clientsMonitor}normalizeString(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}toggleMenu(){this.menuService.toggleMenu()}goTo(...t){this.router.navigate(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(p.F0),e.Y36(b.h),e.Y36(y.q),e.Y36(O.g),e.Y36(T.b),e.Y36(w._W),e.Y36(S.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-clients"]],decls:13,vars:2,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-12"],[1,"header-section-title"],["src","assets/icon/icon-clients-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],["type","text","placeholder","Chercher clients...",1,"montserrat","mt-12","header-input-search",3,"ngModel","ngModelChange","keyup"],[1,"padding-wrapper"],["class","background-color-dark mb-24 box-message cursor-pointer",3,"click",4,"ngFor","ngForOf"],["section","clients"],[1,"background-color-dark","mb-24","box-message","cursor-pointer",3,"click"],[1,"box-message-img-wrapper"],[1,"box-message-img",3,"src"],[1,"box-message-content"],[1,"box-message-name-flex"],[1,"montserrat","box-message-name"],[1,"montserrat","color-light","box-message-text"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"img",4),e.TgZ(6,"div"),e._uU(7,"Clients"),e.qZA()(),e.TgZ(8,"img",5),e.NdJ("click",function(){return i.toggleMenu()}),e.qZA()(),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(a){return i.searchTerm=a})("keyup",function(){return i.searchClients()}),e.qZA()(),e.TgZ(10,"div",7),e.YNc(11,A,10,6,"div",8),e.qZA()()(),e._UZ(12,"app-footer",9)),2&t&&(e.xp6(9),e.Q6J("ngModel",i.searchTerm),e.xp6(2),e.Q6J("ngForOf",i.filteredClients))},dependencies:[d.sg,d.O5,g.Fj,g.JJ,g.On,f.W2,Z.c],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-input-search[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px;background:#2b303b;color:#fff;border:none;outline:0;border-radius:40px}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.box-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:16px;border-radius:8px}.box-message-img-wrapper[_ngcontent-%COMP%]{width:44px;min-width:44px;height:44px;border-radius:44px;position:relative;background:#41454e}.box-message-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.box-message-img-none[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:26px}.box-message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;width:100%}.box-message-name-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.box-message-name-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-message-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.box-message-number[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:12px;background:var(--ion-color-primary);color:#fff;font-weight:600}.box-message-text[_ngcontent-%COMP%]{font-size:13px}.box-message-date[_ngcontent-%COMP%]{font-size:11px;width:100%;text-align:right}.filter-floating[_ngcontent-%COMP%]{width:54px;position:fixed;right:12px;bottom:102px;cursor:pointer}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}"]}),c})()}];let J=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(B),p.Bz]}),c})();var F=o(822);let D=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,g.u5,f.Pc,J,F.K]}),c})()}}]);