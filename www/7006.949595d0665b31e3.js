"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7006],{7006:(le,m,c)=>{c.r(m),c.d(m,{CalendarAvailablePageModule:()=>oe});var u=c(6814),_=c(6223),v=c(3582),h=c(5367),p=c(5861),y=c(9315),f=c(6676),e=c(6689),D=c(2234),T=c(3271),A=c(2425),w=c(7364);function Z(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"Disponibilit\xe9"),e.qZA())}function P(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"Editer Disponibilit\xe9"),e.qZA())}const x=function(i,r){return{"btn-back-primary":i,"btn-back-grey":r}};function k(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.showMonthAvailable=!0,e.KtG(a.showDayAvailable=!1)}),e._uU(2," Mois "),e.qZA(),e.TgZ(3,"div",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.showMonthAvailable=!1,e.KtG(a.showDayAvailable=!0)}),e._uU(4," Jour "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(2,x,t.showMonthAvailable,!t.showMonthAvailable)),e.xp6(2),e.Q6J("ngClass",e.WLB(5,x,t.showDayAvailable,!t.showDayAvailable))}}function O(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.previousMonth())}),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.nextMonth())}),e._UZ(6,"img",16),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.AsE(" ",t.monthNames[t.currentMonth]," ",t.currentYear," ")}}function J(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.previousDay())}),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.nextDay())}),e._UZ(6,"img",16),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.HOy(" ",t.getWeekdayName(t.selectedDate),", ",t.currentDay," ",t.monthNames[t.currentMonth]," ",t.currentYear," ")}}function S(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.previousMonth())}),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15),e._uU(4),e.qZA(),e.TgZ(5,"div",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.nextMonth())}),e._UZ(6,"img",16),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(4),e.AsE(" ",t.monthNames[t.currentMonth]," ",t.currentYear," ")}}function N(i,r){1&i&&(e.TgZ(0,"div",20),e._uU(1,"Calendrier ouvert"),e.qZA())}function Y(i,r){1&i&&(e.TgZ(0,"div",20),e._uU(1,"Fermer le calendrier"),e.qZA())}function q(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,J,7,4,"div",8),e.YNc(2,S,7,2,"div",8),e.TgZ(3,"div",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showDayCalendar=!a.showDayCalendar)}),e._UZ(4,"img",18),e.YNc(5,N,2,0,"div",19),e.YNc(6,Y,2,0,"div",19),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.showDayCalendar),e.xp6(1),e.Q6J("ngIf",t.showDayCalendar),e.xp6(3),e.Q6J("ngIf",!t.showDayCalendar),e.xp6(1),e.Q6J("ngIf",t.showDayCalendar)}}function E(i,r){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Oqu(t)}}function B(i,r){1&i&&e._UZ(0,"span",48)}function H(i,r){1&i&&e._UZ(0,"span",49)}const b=function(i){return{"very-light-opacity":i}};function Q(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"span",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.selectDate(a))}),e.TgZ(1,"span",44)(2,"span",45),e._uU(3),e.qZA(),e.YNc(4,B,1,0,"span",46),e.YNc(5,H,1,0,"span",47),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(4,b,t.past)),e.xp6(3),e.Oqu(t.number),e.xp6(1),e.Q6J("ngIf",t.activeSelected),e.xp6(1),e.Q6J("ngIf",t.activeRange)}}function U(i,r){1&i&&e._UZ(0,"span",50)}function F(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Q,6,6,"span",41),e.YNc(2,U,1,0,"span",42),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",null!==t.number),e.xp6(1),e.Q6J("ngIf",null===t.number)}}function I(i,r){if(1&i&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function z(i,r){if(1&i&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function R(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",51),e._uU(2," Heure de d\xe9but "),e.qZA(),e.TgZ(3,"div",30)(4,"select",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.startTimeMonth=a)}),e.YNc(5,I,2,2,"option",53),e.qZA()(),e.TgZ(6,"div",29),e._uU(7," Heure de fin "),e.qZA(),e.TgZ(8,"div",30)(9,"select",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.endTimeMonth=a)}),e.YNc(10,z,2,2,"option",53),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.startTimeMonth),e.xp6(1),e.Q6J("ngForOf",t.hoursRange),e.xp6(4),e.Q6J("ngModel",t.endTimeMonth),e.xp6(1),e.Q6J("ngForOf",t.filteredEndHoursMonth)}}function K(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e._uU(2," Choisissez une plage de dates "),e.qZA(),e.TgZ(3,"div",23)(4,"div",24),e.YNc(5,E,2,1,"span",25),e.qZA(),e.TgZ(6,"div",26),e.YNc(7,F,3,2,"ng-container",27),e.qZA()(),e.TgZ(8,"div",28)(9,"div")(10,"div",29),e._uU(11," Date de d\xe9but "),e.qZA(),e.TgZ(12,"div",30),e._UZ(13,"img",18),e.TgZ(14,"input",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.firstDateSelectedFormat=a)}),e.qZA()()(),e.TgZ(15,"div")(16,"div",29),e._uU(17," Date de fin "),e.qZA(),e.TgZ(18,"div",30),e._UZ(19,"img",18),e.TgZ(20,"input",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.secondDateSelectedFormat=a)}),e.qZA()()()(),e.TgZ(21,"div",32)(22,"div",33)(23,"label",34)(24,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.allHoursMonth=a)}),e.qZA(),e._UZ(25,"div",36),e.qZA()(),e.TgZ(26,"div",37),e._uU(27," Toute la journ\xe9e "),e.qZA()(),e.YNc(28,R,11,4,"ng-container",5),e.TgZ(29,"div",38),e._uU(30," Titre "),e.qZA(),e.TgZ(31,"div",30)(32,"input",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.nameBlockMonth=a)}),e.qZA()(),e.TgZ(33,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveBlockMonth())}),e._uU(34," Sauvegarder "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.weekdays),e.xp6(2),e.Q6J("ngForOf",t.days),e.xp6(7),e.Q6J("ngModel",t.firstDateSelectedFormat),e.xp6(6),e.Q6J("ngModel",t.secondDateSelectedFormat),e.xp6(4),e.Q6J("ngModel",t.allHoursMonth),e.xp6(4),e.Q6J("ngIf",!t.allHoursMonth),e.xp6(4),e.Q6J("ngModel",t.nameBlockMonth),e.xp6(1),e.Q6J("disabled",!t.isButtonMonthEnabled())}}function G(i,r){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Oqu(t)}}function j(i,r){1&i&&e._UZ(0,"span",56)}function $(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",43),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.selectDay(o))}),e.TgZ(2,"span",44)(3,"span",45),e._uU(4),e.qZA(),e.YNc(5,j,1,0,"span",55),e.qZA()(),e.BQk()}if(2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(3,b,t.past)),e.xp6(3),e.Oqu(t.number),e.xp6(1),e.Q6J("ngIf",t.today)}}function V(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"div",22),e._uU(2," Choisissez un jour "),e.qZA(),e.TgZ(3,"div",23)(4,"div",24),e.YNc(5,G,2,1,"span",25),e.qZA(),e.TgZ(6,"div",26),e.YNc(7,$,6,5,"ng-container",27),e.qZA()(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",t.weekdays),e.xp6(2),e.Q6J("ngForOf",t.days)}}function W(i,r){if(1&i&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function L(i,r){if(1&i&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function X(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",51),e._uU(2," Heure de d\xe9but "),e.qZA(),e.TgZ(3,"div",30)(4,"select",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(3);return e.KtG(o.startTimeDay=a)}),e.YNc(5,W,2,2,"option",53),e.qZA()(),e.TgZ(6,"div",29),e._uU(7," Heure de fin "),e.qZA(),e.TgZ(8,"div",30)(9,"select",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(3);return e.KtG(o.endTimeDay=a)}),e.YNc(10,L,2,2,"option",53),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("ngModel",t.startTimeDay),e.xp6(1),e.Q6J("ngForOf",t.hoursRange),e.xp6(4),e.Q6J("ngModel",t.endTimeDay),e.xp6(1),e.Q6J("ngForOf",t.filteredEndHoursDay)}}function ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.deleteBlockDay())}),e._uU(1," \xc9liminer "),e.qZA()}}function te(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"div",33)(3,"label",34)(4,"input",35),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allHoursDay=a)}),e.qZA(),e._UZ(5,"div",36),e.qZA()(),e.TgZ(6,"div",37),e._uU(7," Toute la journ\xe9e "),e.qZA()(),e.YNc(8,X,11,4,"ng-container",5),e.TgZ(9,"div",38),e._uU(10," Titre "),e.qZA(),e.TgZ(11,"div",30)(12,"input",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.nameBlockDay=a)}),e.qZA()(),e.TgZ(13,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.saveBlockDay())}),e._uU(14," Sauvegarder "),e.qZA(),e.YNc(15,ee,2,0,"button",57),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.allHoursDay),e.xp6(4),e.Q6J("ngIf",!t.allHoursDay),e.xp6(4),e.Q6J("ngModel",t.nameBlockDay),e.xp6(1),e.Q6J("disabled",!t.isButtonDayEnabled()),e.xp6(2),e.Q6J("ngIf",t.idEditBlock)}}function ne(i,r){if(1&i&&(e.TgZ(0,"div",21),e.YNc(1,V,8,2,"ng-container",5),e.YNc(2,te,16,5,"ng-container",5),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showDayCalendar),e.xp6(1),e.Q6J("ngIf",!t.showDayCalendar)}}const ie=[{path:"",component:(()=>{var i;class r{constructor(n,a,o,s,l,g){this.router=n,this.activatedRoute=a,this.monitorDataService=o,this.teachService=s,this.toastr=l,this.spinnerService=g,this.showMonthAvailable=!0,this.showDayAvailable=!1,this.today=new Date,this.monthNames=[],this.weekdays=["LUN","MAR","MER","JEU","VEN","SAM","DIM"],this.weekdaysShort=["L","M","X","J","V","S","D"],this.weekdayNames=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],this.days=[],this.hourStartDay="08:00",this.hourEndDay="18:00",this.hoursRange=[],this.firstDateSelected=null,this.secondDateSelected=null,this.firstDateSelectedFormat=null,this.secondDateSelectedFormat=null,this.showDayCalendar=!1,this.allHoursMonth=!1,this.allHoursDay=!1}ngOnInit(){var n=this;return(0,p.Z)(function*(){n.subscription=n.monitorDataService.getMonitorData().subscribe(function(){var a=(0,p.Z)(function*(o){o&&(n.monitorData=o,n.activatedRoute.params.subscribe(function(){var s=(0,p.Z)(function*(l){n.spinnerService.show(),n.typeVisual=l.type,n.dateVisual=l.date,n.idEditBlock=+l.id_edit,n.selectedDate=n.dateVisual?new Date(n.dateVisual):new Date,n.typeVisual&&("day"==n.typeVisual?(n.showMonthAvailable=!1,n.showDayAvailable=!0):(n.showMonthAvailable=!0,n.showDayAvailable=!1)),n.idEditBlock&&n.getEditBlock(),yield n.generateHoursRange(),n.initializeMonthNames(),n.currentMonth=n.selectedDate.getMonth(),n.currentYear=n.selectedDate.getFullYear(),n.currentDay=n.selectedDate.getDate(),n.renderCalendar()});return function(l){return s.apply(this,arguments)}}()))});return function(o){return a.apply(this,arguments)}}())})()}getEditBlock(){this.teachService.getData("monitor-nwds",this.idEditBlock).subscribe(n=>{console.log(n),this.editBlock=n.data,this.allHoursDay=this.editBlock.full_day,this.editBlock.start_time&&(this.startTimeDay=this.editBlock.start_time.substring(0,5)),this.editBlock.end_time&&(this.endTimeDay=this.editBlock.end_time.substring(0,5)),this.nameBlockDay=this.editBlock.description,this.allHoursDay=this.editBlock.full_day},n=>{console.error("There was an error!",n),this.idEditBlock=null})}generateHoursRange(){var n=this;return(0,p.Z)(function*(){const a=n.parseTime(n.hourStartDay),o=n.parseTime(n.hourEndDay);let s=new Date(a);for(;s<=o;)n.hoursRange.push(n.formatTime(s)),s=new Date(s.getTime()+9e5)})()}parseTime(n){const[a,o]=n.split(":").map(Number),s=new Date;return s.setHours(a,o,0,0),s}formatTime(n){return n.toTimeString().substring(0,5)}get filteredEndHoursMonth(){const n=this.hoursRange.indexOf(this.startTimeMonth);return this.hoursRange.slice(n+1)}get filteredEndHoursDay(){const n=this.hoursRange.indexOf(this.startTimeDay);return this.hoursRange.slice(n+1)}initializeMonthNames(){this.monthNames=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"]}previousMonth(){this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.renderCalendar()}nextMonth(){this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.renderCalendar()}previousDay(){this.selectedDate.setDate(this.selectedDate.getDate()-1),this.currentMonth=this.selectedDate.getMonth(),this.currentYear=this.selectedDate.getFullYear(),this.currentDay=this.selectedDate.getDate(),this.renderCalendar()}nextDay(){this.selectedDate.setDate(this.selectedDate.getDate()+1),this.currentMonth=this.selectedDate.getMonth(),this.currentYear=this.selectedDate.getFullYear(),this.currentDay=this.selectedDate.getDate(),this.renderCalendar()}renderCalendar(){this.spinnerService.show();const n=new Date(this.currentYear,this.currentMonth,1).getDay(),a=new Date(this.currentYear,this.currentMonth+1,0).getDate();this.days=[];let o=n-1;o<0&&(o=6);for(let d=0;d<o;d++)this.days.push({number:null,active:!1});const s=new Date;s.setHours(0,0,0,0);const l=s.getDate(),g=s.getMonth(),re=s.getFullYear();for(let d=1;d<=a;d++){const C=new Date(this.currentYear,this.currentMonth,d);C.setHours(0,0,0,0),this.days.push({number:d,selected:!1,past:C<s,today:d===l&&this.currentMonth===g&&this.currentYear===re,activeSelected:!1,activeRange:!1})}let M=new Date(this.currentYear,this.currentMonth,a).getDay();for(let d=M;d<=6&&6!==M;d++)this.days.push({number:null,selected:!1});this.applyRange(),this.spinnerService.hide()}getWeekdayName(n){return this.weekdayNames[n.getDay()]}selectDate(n){if(n.past)return;const a=new Date(this.currentYear,this.currentMonth,n.number);!this.firstDateSelected||this.secondDateSelected&&this.firstDateSelected?(this.resetSelection(),this.firstDateSelected=a,console.log(a),this.firstDateSelectedFormat=this.formatDate(a),n.activeSelected=!0):a<this.firstDateSelected?(this.resetSelection(),this.firstDateSelected=a,this.firstDateSelectedFormat=this.formatDate(a),n.activeSelected=!0):(this.secondDateSelected=a,this.secondDateSelectedFormat=this.formatDate(a),this.applyRange())}formatDate(n){return`${n.getDate().toString().padStart(2,"0")}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getFullYear()}`}applyRange(){!this.firstDateSelected||!this.secondDateSelected||this.days.forEach(n=>{if(null!==n.number){const a=new Date(this.currentYear,this.currentMonth,n.number);n.activeRange=a>=this.firstDateSelected&&a<=this.secondDateSelected,n.activeSelected=a.getTime()===this.firstDateSelected.getTime()||a.getTime()===this.secondDateSelected.getTime()}else n.activeSelected=!1,n.activeRange=!1})}resetSelection(){this.days.forEach(n=>{n.activeSelected=!1,n.activeRange=!1}),this.firstDateSelected=null,this.secondDateSelected=null,this.firstDateSelectedFormat=null,this.secondDateSelectedFormat=null}selectDay(n){n.number&&!n.past&&(this.selectedDate=new Date(this.currentYear,this.currentMonth,n.number),this.currentDay=n.number,this.showDayCalendar=!1)}isButtonMonthEnabled(){return this.nameBlockMonth&&this.firstDateSelected&&this.secondDateSelected&&(this.allHoursMonth||this.startTimeMonth&&this.endTimeMonth)}isButtonDayEnabled(){return this.nameBlockDay&&this.selectedDate&&(this.allHoursDay||this.startTimeDay&&this.endTimeDay)}saveBlockDay(){const n=f(this.selectedDate).format("YYYY-MM-DD");this.spinnerService.show(),this.idEditBlock?this.teachService.updateData("monitor-nwds",this.idEditBlock,{monitor_id:this.editBlock.monitor_id,school_id:this.editBlock.school_id,station_id:this.editBlock.station_id,start_date:n,end_date:n,start_time:this.allHoursDay?"":`${this.startTimeDay}:00`,end_time:this.allHoursDay?"":`${this.endTimeDay}:00`,full_day:this.allHoursDay,description:this.nameBlockDay,color:this.editBlock.color,user_nwd_subtype_id:this.editBlock.user_nwd_subtype_id}).subscribe(o=>{console.log("Response:",o),this.spinnerService.hide(),this.toastr.success("Enregistr\xe9 correctement"),this.goTo("calendar")},o=>{console.error("Error:",o),this.spinnerService.hide(),this.toastr.error("Erreur")}):this.teachService.postData("monitor-nwds",{monitor_id:this.monitorData.id,school_id:this.monitorData.active_school,station_id:this.monitorData.active_station,start_date:n,end_date:n,start_time:this.allHoursDay?"":`${this.startTimeDay}:00`,end_time:this.allHoursDay?"":`${this.endTimeDay}:00`,full_day:this.allHoursDay,description:this.nameBlockDay,color:"#89add1",user_nwd_subtype_id:1}).subscribe(o=>{console.log("Response:",o),this.spinnerService.hide(),this.toastr.success("Enregistr\xe9 correctement"),this.goTo("calendar")},o=>{console.error("Error:",o),this.spinnerService.hide(),this.toastr.error("Erreur")})}saveBlockMonth(){const n=f(this.firstDateSelected),a=f(this.secondDateSelected),o=[];this.spinnerService.show();for(let s=n;s.diff(a,"days")<=0;s.add(1,"days")){const l=s.format("YYYY-MM-DD");o.push(this.teachService.postData("monitor-nwds",{monitor_id:this.monitorData.id,school_id:this.monitorData.active_school,station_id:this.monitorData.active_station,start_date:l,end_date:l,start_time:this.allHoursMonth?"":`${this.startTimeMonth}:00`,end_time:this.allHoursMonth?"":`${this.endTimeMonth}:00`,full_day:this.allHoursMonth,description:this.nameBlockMonth,color:"#89add1",user_nwd_subtype_id:1}))}(0,y.D)(o).subscribe(s=>{console.log("All requests completed",s),this.spinnerService.hide(),this.toastr.success("Enregistr\xe9 correctement"),this.goTo("calendar")},s=>{console.error("An error occurred",s),this.spinnerService.hide(),this.toastr.error("Erreur")})}deleteBlockDay(){this.idEditBlock&&confirm("\xcates-vous s\xfbr de vouloir supprimer le blocage?")&&(this.spinnerService.show(),this.teachService.deleteData("monitor-nwds",this.idEditBlock).subscribe(a=>{console.log("Response:",a),this.spinnerService.hide(),this.toastr.success("Supprim\xe9 correctement"),this.goTo("calendar")},a=>{console.error("Error:",a),this.spinnerService.hide(),this.toastr.error("Erreur")}))}goTo(...n){this.router.navigate(n)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(i=r).\u0275fac=function(n){return new(n||i)(e.Y36(h.F0),e.Y36(h.gz),e.Y36(D.q),e.Y36(T.b),e.Y36(A._W),e.Y36(w.V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-calendar-available"]],decls:14,vars:8,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content",3,"ngClass"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],[1,"header-section-title"],[4,"ngIf"],["src","assets/icon/icon-clock.png",1,"header-section-menu"],["class","mt-24 mb-32 flex-buttons",4,"ngIf"],["class","flex-members",4,"ngIf"],["class","padding-wrapper",4,"ngIf"],[1,"mt-24","mb-32","flex-buttons"],[1,"montserrat","flex-buttons-button","cursor-pointer",3,"ngClass","click"],[1,"flex-members"],[1,"box-arrow","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg"],[1,"montserrat","month-title"],["src","assets/icon/icons-outline-arrow-right-3-white.svg"],[1,"mt-12","flex-select-date","cursor-pointer",3,"click"],["src","assets/icon/icons-outline-calendar-1-white.svg"],["class","montserrat",4,"ngIf"],[1,"montserrat"],[1,"padding-wrapper"],[1,"mb-24","montserrat","align-center"],[1,"calendar","mb-24","background-color-dark"],[1,"weekdays"],["class","montserrat",4,"ngFor","ngForOf"],[1,"days"],[4,"ngFor","ngForOf"],[1,"inputs-flex"],[1,"input-label","color-light","montserrat"],[1,"input-form-icon","background-color-dark"],["type","text","disabled","true",1,"montserrat",3,"ngModel","ngModelChange"],[1,"circle-list-item","mb-24"],[1,"custom-radio"],[1,"simple-check-option"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"custom-check"],[1,"montserrat","color-light","circle-list-item-text"],[1,"input-label","color-light","montserrat","mt-24"],["type","text",1,"montserrat",3,"ngModel","ngModelChange"],[1,"content-button","btn-back-primary","montserrat","mb-32","mt-32",3,"disabled","click"],["class","montserrat day-span-a",3,"ngClass","click",4,"ngIf"],["class","montserrat day-span-a",4,"ngIf"],[1,"montserrat","day-span-a",3,"ngClass","click"],[1,"day-span-b","cursor-pointer","position-relative"],[1,"day-on-top"],["class","active-selected",4,"ngIf"],["class","active-range",4,"ngIf"],[1,"active-selected"],[1,"active-range"],[1,"montserrat","day-span-a"],[1,"input-label","color-light","montserrat","mb-24"],[1,"montserrat",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","active-today",4,"ngIf"],[1,"active-today"],["class","content-button reduce-top btn-back-grey montserrat mb-32",3,"click",4,"ngIf"],[1,"content-button","reduce-top","btn-back-grey","montserrat","mb-32",3,"click"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),e.NdJ("click",function(){return a.goTo("calendar")}),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,Z,2,0,"div",5),e.YNc(7,P,2,0,"div",5),e.qZA(),e._UZ(8,"img",6),e.qZA(),e.YNc(9,k,5,8,"div",7),e.YNc(10,O,7,2,"div",8),e.YNc(11,q,7,4,"ng-container",5),e.qZA(),e.YNc(12,K,35,8,"div",9),e.YNc(13,ne,3,2,"div",9),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("ngClass",a.idEditBlock?"mb-32":"mb-12"),e.xp6(3),e.Q6J("ngIf",!a.idEditBlock),e.xp6(1),e.Q6J("ngIf",a.idEditBlock),e.xp6(2),e.Q6J("ngIf",!a.idEditBlock),e.xp6(1),e.Q6J("ngIf",a.showMonthAvailable),e.xp6(1),e.Q6J("ngIf",a.showDayAvailable),e.xp6(1),e.Q6J("ngIf",a.showMonthAvailable),e.xp6(1),e.Q6J("ngIf",a.showDayAvailable))},dependencies:[u.mk,u.sg,u.O5,_.YN,_.Kr,_.Fj,_.Wl,_.EJ,_.JJ,_.On,v.W2],styles:['.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.month-title[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:500}.flex-members[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.box-arrow[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#2b303b}.box-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.filter-floating[_ngcontent-%COMP%]{width:54px;position:fixed;right:12px;bottom:102px;cursor:pointer}.button-floating[_ngcontent-%COMP%]{position:fixed;right:12px;bottom:102px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:40px;width:-moz-fit-content;width:fit-content;font-weight:600;font-size:14px}.flex-buttons[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;gap:4px}.flex-buttons-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:14px;width:100%;padding:6px 0;border-radius:4px}.input-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.input-form-icon[_ngcontent-%COMP%]{width:100%;height:48px;border-radius:12px;color:#fff;padding:0 16px;display:flex;align-items:center;gap:9px;margin-bottom:24px}.input-form-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;position:relative;top:-1px}.input-form-icon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-form-icon[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:#fff;font-size:15px;width:100%;border:none;background:transparent;outline:0}.inputs-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.calendar[_ngcontent-%COMP%]{color:#fff;width:100%;box-sizing:border-box;padding:16px;border-radius:8px}.header-calendar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.header-calendar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.header-calendar-arrows[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.header-calendar-arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:24px}.weekdays[_ngcontent-%COMP%], .days[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.weekdays[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1 0 calc(14.28% - 6px);height:40px;line-height:4px;text-align:center;margin:3px;font-size:11px;box-sizing:border-box}.days[_ngcontent-%COMP%]   .day-span-a[_ngcontent-%COMP%]{flex:1 0 calc(14.28% - 6px);height:40px;line-height:40px;text-align:center;margin:3px;font-size:16px!important;font-weight:500;box-sizing:border-box}.days[_ngcontent-%COMP%]   .day-span-b[_ngcontent-%COMP%]{display:flex;justify-content:center;width:32px;height:32px;align-items:center}.light-opacity[_ngcontent-%COMP%]{opacity:.6}.very-light-opacity[_ngcontent-%COMP%]{opacity:.4}.day-on-top[_ngcontent-%COMP%]{z-index:2}.active-selected[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:28px;background:var(--ion-color-primary);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.active-range[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:28px;background:rgba(51,153,255,.5);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.align-center[_ngcontent-%COMP%]{text-align:center}.flex-select-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;justify-content:center}.flex-select-date[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.flex-select-date[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.circle-list-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.circle-list-item-text[_ngcontent-%COMP%]{font-size:13px}.custom-radio[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.simple-check-option[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer;width:22px;height:22px}.simple-check-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.custom-check[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:22px;height:22px;background:transparent;border:1px solid #c8c8c8;border-radius:6px;display:block;align-items:center;justify-content:center}.custom-check[_ngcontent-%COMP%]:before{content:"";width:5px;height:10px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);position:absolute;top:4px;left:8px;display:none}.simple-check-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check[_ngcontent-%COMP%]{background:var(--ion-color-primary);border:none}.simple-check-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check[_ngcontent-%COMP%]:before{display:block}.reduce-top[_ngcontent-%COMP%]{margin-top:-16px}button[disabled][_ngcontent-%COMP%]{opacity:.4;pointer-events:none}']}),r})()}];let ae=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(ie),h.Bz]}),r})(),oe=(()=>{var i;class r{}return(i=r).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,_.u5,v.Pc,ae]}),r})()}}]);