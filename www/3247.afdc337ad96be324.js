"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3247],{3247:(S,f,s)=>{s.r(f),s.d(f,{ScanClientPageModule:()=>Me});var p=s(177),x=s(9417),h=s(8974),m=s(3314),d=s(467),_=s(4843),l=s(7586),b=s(9065),v=s(9569),e=s(6996),R=s(4621),E=s(5663),k=s(918),I=s(4387),$=s(5794),y=s(8551),M=s(1547),D=s(5473);function F(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2);e.R7$(1),e.SpI(" ",n.getLanguageById(n.clientMonitor.main.language1_id)," \xb7 ")}}function G(t,o){if(1&t&&(e.j41(0,"div",15)(1,"div",16),e.nrm(2,"img",17),e.k0s(),e.j41(3,"div",18)(4,"div",19)(5,"div",20),e.DNE(6,F,2,1,"ng-container",21),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",22)(10,"div"),e.EFF(11),e.k0s(),e.nrm(12,"img",23),e.k0s(),e.j41(13,"div",24)(14,"a",25),e.nrm(15,"img",26),e.k0s(),e.j41(16,"a",25),e.nrm(17,"img",27),e.k0s()()()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("src",n.clientMonitor.main.image?n.clientMonitor.main.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(4),e.Y8G("ngIf",n.clientMonitor.main.language1_id),e.R7$(1),e.E5c(" ",n.getCountryById(n.clientMonitor.main.country)," \xb7 ",n.getBirthYears(n.clientMonitor.main.birth_date)," ",e.bMT(8,9,"years")," "),e.R7$(4),e.Lme("",n.clientMonitor.main.first_name," ",n.clientMonitor.main.last_name,""),e.R7$(3),e.Y8G("href","tel:"+n.clientMonitor.main.phone,e.B4B),e.R7$(2),e.Y8G("href","mailto:"+n.clientMonitor.main.email,e.B4B)}}function O(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2);e.R7$(1),e.SpI(" ",n.getLanguageById(n.clientMonitor.language1_id)," \xb7 ")}}function T(t,o){if(1&t&&(e.j41(0,"div",15)(1,"div",16),e.nrm(2,"img",17),e.k0s(),e.j41(3,"div",18)(4,"div",19)(5,"div",20),e.DNE(6,O,2,1,"ng-container",21),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",22)(10,"div"),e.EFF(11),e.k0s()(),e.j41(12,"div",24)(13,"a",25),e.nrm(14,"img",26),e.k0s(),e.j41(15,"a",25),e.nrm(16,"img",27),e.k0s()()()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("src",n.clientMonitor.image?n.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(4),e.Y8G("ngIf",n.clientMonitor.language1_id),e.R7$(1),e.E5c(" ",n.getCountryById(n.clientMonitor.country)," \xb7 ",n.clientMonitor.birth_years," ",e.bMT(8,9,"years")," "),e.R7$(4),e.Lme("",n.clientMonitor.first_name," ",n.clientMonitor.last_name,""),e.R7$(2),e.Y8G("href","tel:"+n.clientMonitor.phone,e.B4B),e.R7$(2),e.Y8G("href","mailto:"+n.clientMonitor.email,e.B4B)}}function j(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2);e.R7$(1),e.SpI(" ",n.getLanguageById(n.clientMonitor.language1_id)," \xb7 ")}}function B(t,o){if(1&t&&(e.j41(0,"div",28)(1,"div",16),e.nrm(2,"img",17),e.k0s(),e.j41(3,"div",18)(4,"div",19)(5,"div",20),e.DNE(6,j,2,1,"ng-container",21),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",22)(10,"div"),e.EFF(11),e.k0s()()()()),2&t){const n=e.XpG();e.R7$(2),e.Y8G("src",n.clientMonitor.image?n.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(4),e.Y8G("ngIf",n.clientMonitor.language1_id),e.R7$(1),e.E5c(" ",n.getCountryById(n.clientMonitor.country)," \xb7 ",n.clientMonitor.birth_years," ",e.bMT(8,7,"years")," "),e.R7$(4),e.Lme("",n.clientMonitor.first_name," ",n.clientMonitor.last_name,"")}}function Y(t,o){if(1&t&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" ",n.todayDateFull," ")}}function w(t,o){1&t&&(e.j41(0,"div",30),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"no_reservations_today")," "))}function N(t,o){1&t&&e.nrm(0,"div",45)}function V(t,o){1&t&&e.nrm(0,"img",46)}function X(t,o){1&t&&e.nrm(0,"img",47)}function L(t,o){1&t&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"collective")," "))}function U(t,o){1&t&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"private")," "))}function A(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(1),e.SpI(" ",n.sport_data.name," ")}}const P=function(t){return{background:t}};function z(t,o){if(1&t&&(e.j41(0,"div",48),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("ngStyle",e.eq3(2,P,n.degree_data.color)),e.R7$(1),e.SpI(" ",n.degree_data.annotation," ")}}function K(t,o){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(1),e.SpI(" - ",n.school_data.name,"")}}function J(t,o){if(1&t&&(e.j41(0,"div",49),e.nrm(1,"img",50),e.j41(2,"span"),e.EFF(3),e.k0s(),e.DNE(4,K,2,1,"span",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.station_data.name),e.R7$(1),e.Y8G("ngIf",n.station_data)}}function W(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.SpI(" ",i.getLanguageById(n.monitor_data.language1_id)," ")}}function q(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.SpI(" \xb7 ",i.getLanguageById(n.monitor_data.language2_id)," ")}}function H(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.SpI(" \xb7 ",i.getLanguageById(n.monitor_data.language3_id)," ")}}function Q(t,o){if(1&t&&(e.qex(0),e.j41(1,"div",51),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",52)(5,"div",53),e.nrm(6,"img",17),e.k0s(),e.j41(7,"div",54)(8,"div",55),e.DNE(9,W,2,1,"ng-container",21),e.DNE(10,q,2,1,"ng-container",21),e.DNE(11,H,2,1,"ng-container",21),e.k0s(),e.j41(12,"div",56)(13,"div",57),e.EFF(14),e.k0s()(),e.j41(15,"div",24)(16,"a",25),e.nrm(17,"img",26),e.k0s(),e.j41(18,"a",25),e.nrm(19,"img",27),e.k0s()()()(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,9,"teacher")," "),e.R7$(4),e.Y8G("src",n.monitor_data.image?n.monitor_data.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(3),e.Y8G("ngIf",n.monitor_data.language1_id),e.R7$(1),e.Y8G("ngIf",n.monitor_data.language2_id),e.R7$(1),e.Y8G("ngIf",n.monitor_data.language3_id),e.R7$(3),e.Lme("",n.monitor_data.first_name," ",n.monitor_data.last_name,""),e.R7$(2),e.Y8G("href","tel:"+n.monitor_data.phone,e.B4B),e.R7$(2),e.Y8G("href","mailto:"+n.monitor_data.email,e.B4B)}}function Z(t,o){1&t&&(e.qex(0),e.j41(1,"div",58),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"no_monitor_assigned")," "))}function ee(t,o){if(1&t&&(e.qex(0),e.DNE(1,N,1,0,"div",31),e.j41(2,"div",32)(3,"div",33)(4,"div",34),e.EFF(5),e.k0s()(),e.j41(6,"div",35)(7,"div",36)(8,"div",37),e.DNE(9,V,1,0,"img",38),e.DNE(10,X,1,0,"img",39),e.k0s(),e.j41(11,"div",40)(12,"div",41),e.EFF(13),e.k0s(),e.j41(14,"div",42)(15,"span"),e.DNE(16,L,3,3,"ng-container",21),e.DNE(17,U,3,3,"ng-container",21),e.DNE(18,A,2,1,"ng-container",21),e.k0s()()()(),e.DNE(19,z,2,4,"div",43),e.k0s(),e.DNE(20,J,5,2,"div",44),e.k0s(),e.DNE(21,Q,20,11,"ng-container",21),e.DNE(22,Z,4,3,"ng-container",21),e.bVm()),2&t){const n=o.$implicit,i=o.index,a=e.XpG();e.R7$(1),e.Y8G("ngIf",0!==i),e.R7$(4),e.SpI(" ",a.formatTimeRange(n.hour_start,n.hour_end)," "),e.R7$(4),e.Y8G("ngIf",1==n.course.course_type),e.R7$(1),e.Y8G("ngIf",2==n.course.course_type),e.R7$(3),e.SpI(" ",n.course.name," "),e.R7$(3),e.Y8G("ngIf",1==n.course.course_type),e.R7$(1),e.Y8G("ngIf",2==n.course.course_type),e.R7$(1),e.Y8G("ngIf",n.sport_data&&a.sports.length),e.R7$(1),e.Y8G("ngIf",1==n.course.course_type&&n.degree_data&&a.degrees.length),e.R7$(1),e.Y8G("ngIf",n.station_data),e.R7$(1),e.Y8G("ngIf",n.monitor_data),e.R7$(1),e.Y8G("ngIf",!n.monitor_data)}}function te(t,o){if(1&t&&(e.j41(0,"div",59),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" ",n.tomorrowDateFull," ")}}function ne(t,o){1&t&&(e.j41(0,"div",30),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"no_reservations_tomorrow")," "))}function ie(t,o){1&t&&e.nrm(0,"div",45)}function ae(t,o){1&t&&e.nrm(0,"img",46)}function oe(t,o){1&t&&e.nrm(0,"img",47)}function re(t,o){1&t&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"collective")," "))}function se(t,o){1&t&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"private")," "))}function ce(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(1),e.SpI(" ",n.sport_data.name," ")}}function le(t,o){if(1&t&&(e.j41(0,"div",48),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("ngStyle",e.eq3(2,P,n.degree_data.color)),e.R7$(1),e.SpI(" ",n.degree_data.annotation," ")}}function ge(t,o){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(1),e.SpI(" - ",n.school_data.name,"")}}function de(t,o){if(1&t&&(e.j41(0,"div",49),e.nrm(1,"img",50),e.j41(2,"span"),e.EFF(3),e.k0s(),e.DNE(4,ge,2,1,"span",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.station_data.name),e.R7$(1),e.Y8G("ngIf",n.station_data)}}function _e(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.SpI(" ",i.getLanguageById(n.monitor_data.language1_id)," ")}}function pe(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.SpI(" \xb7 ",i.getLanguageById(n.monitor_data.language2_id)," ")}}function me(t,o){if(1&t&&(e.qex(0),e.EFF(1),e.bVm()),2&t){const n=e.XpG(2).$implicit,i=e.XpG();e.R7$(1),e.SpI(" \xb7 ",i.getLanguageById(n.monitor_data.language3_id)," ")}}function ue(t,o){if(1&t&&(e.qex(0),e.j41(1,"div",51),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",52)(5,"div",53),e.nrm(6,"img",17),e.k0s(),e.j41(7,"div",54)(8,"div",55),e.DNE(9,_e,2,1,"ng-container",21),e.DNE(10,pe,2,1,"ng-container",21),e.DNE(11,me,2,1,"ng-container",21),e.k0s(),e.j41(12,"div",56)(13,"div",57),e.EFF(14),e.k0s()(),e.j41(15,"div",24)(16,"a",25),e.nrm(17,"img",26),e.k0s(),e.j41(18,"a",25),e.nrm(19,"img",27),e.k0s()()()(),e.bVm()),2&t){const n=e.XpG().$implicit;e.R7$(2),e.SpI(" ",e.bMT(3,9,"teacher")," "),e.R7$(4),e.Y8G("src",n.monitor_data.image?n.monitor_data.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(3),e.Y8G("ngIf",n.monitor_data.language1_id),e.R7$(1),e.Y8G("ngIf",n.monitor_data.language2_id),e.R7$(1),e.Y8G("ngIf",n.monitor_data.language3_id),e.R7$(3),e.Lme("",n.monitor_data.first_name," ",n.monitor_data.last_name,""),e.R7$(2),e.Y8G("href","tel:"+n.monitor_data.phone,e.B4B),e.R7$(2),e.Y8G("href","mailto:"+n.monitor_data.email,e.B4B)}}function fe(t,o){1&t&&(e.qex(0),e.j41(1,"div",58),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"no_monitor_assigned")," "))}function he(t,o){if(1&t&&(e.qex(0),e.DNE(1,ie,1,0,"div",31),e.j41(2,"div",32)(3,"div",33)(4,"div",34),e.EFF(5),e.k0s()(),e.j41(6,"div",35)(7,"div",36)(8,"div",37),e.DNE(9,ae,1,0,"img",38),e.DNE(10,oe,1,0,"img",39),e.k0s(),e.j41(11,"div",40)(12,"div",41),e.EFF(13),e.k0s(),e.j41(14,"div",42)(15,"span"),e.DNE(16,re,3,3,"ng-container",21),e.DNE(17,se,3,3,"ng-container",21),e.DNE(18,ce,2,1,"ng-container",21),e.k0s()()()(),e.DNE(19,le,2,4,"div",43),e.k0s(),e.DNE(20,de,5,2,"div",44),e.k0s(),e.DNE(21,ue,20,11,"ng-container",21),e.DNE(22,fe,4,3,"ng-container",21),e.bVm()),2&t){const n=o.$implicit,i=o.index,a=e.XpG();e.R7$(1),e.Y8G("ngIf",0!==i),e.R7$(4),e.SpI(" ",a.formatTimeRange(n.hour_start,n.hour_end)," "),e.R7$(4),e.Y8G("ngIf",1==n.course.course_type),e.R7$(1),e.Y8G("ngIf",2==n.course.course_type),e.R7$(3),e.SpI(" ",n.course.name," "),e.R7$(3),e.Y8G("ngIf",1==n.course.course_type),e.R7$(1),e.Y8G("ngIf",2==n.course.course_type),e.R7$(1),e.Y8G("ngIf",n.sport_data&&a.sports.length),e.R7$(1),e.Y8G("ngIf",1==n.course.course_type&&n.degree_data&&a.degrees.length),e.R7$(1),e.Y8G("ngIf",n.station_data),e.R7$(1),e.Y8G("ngIf",n.monitor_data),e.R7$(1),e.Y8G("ngIf",!n.monitor_data)}}const be=[{path:"",component:(()=>{var t;class o{constructor(i,a,r,c,g,C,u,Ce,Pe,Se){this.router=i,this.activatedRoute=a,this.changeDetectorRef=r,this.menuService=c,this.monitorDataService=g,this.sharedDataService=C,this.teachService=u,this.toastr=Ce,this.spinnerService=Pe,this.translate=Se,this.starterLevel={id:0,name:"D\xe9butante",level:"STARTER LEAGUE",percentage:0,color:"#c8c8c8",objectives:["Je n'ai jamais fait de ski."]},this.dataLevels=[{id:1,name:"Prince Bleu",level:"BLUE LEAGUE",percentage:30,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:2,name:"Roi Bleu",level:"BLUE LEAGUE",percentage:60,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:3,name:"Star Bleu",level:"BLUE LEAGUE",percentage:100,color:"#0057ff",inactive_color:"#80adff",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:4,name:"Prince Red",level:"RED LEAGUE",percentage:30,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:5,name:"Roi Red",level:"RED LEAGUE",percentage:60,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:6,name:"Star Red",level:"RED LEAGUE",percentage:100,color:"#e9484a",inactive_color:"#fba0a1",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:7,name:"Prince Noir",level:"BLACK LEAGUE",percentage:30,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:8,name:"Roi Noir",level:"BLACK LEAGUE",percentage:60,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]},{id:9,name:"Star Noir",level:"BLACK LEAGUE",percentage:100,color:"#373737",inactive_color:"#806f6f",objectives:["Virage chasse-neige sur piste bleue facile","D\xe9rapage lat\xe9ral","Skier des bosses et des sauts faciles avec les skis parall\xe8les","Virage chasse-neige sur piste bleue facile"]}],this.allLevels=[this.starterLevel,...this.dataLevels],this.monitors=[],this.stations=[],this.schools=[],this.degrees=[],this.sports=[],this.languages=[],this.todayDateFormatted=l().format("YYYY-MM-DD"),this.tomorrowDateFormatted=l().add(1,"days").format("YYYY-MM-DD"),this.translate.onLangChange.subscribe(Re=>{this.updateDate(Re.lang)}),this.updateDate(this.translate.currentLang)}updateDate(i){l.locale(i),this.todayDateFull=l().format("dddd, D MMMM"),this.tomorrowDateFull=l().add(1,"days").format("dddd, D MMMM")}ngOnInit(){var i=this;return(0,d.A)(function*(){i.subscription=i.monitorDataService.getMonitorData().subscribe(function(){var a=(0,d.A)(function*(r){if(r){i.monitorData=r;try{i.degrees=yield(0,_._)(i.sharedDataService.fetchDegrees(i.monitorData.active_school)),i.sports=yield(0,_._)(i.sharedDataService.fetchSports(i.monitorData.active_school)),i.languages=yield(0,_._)(i.sharedDataService.fetchLanguages()),i.stations=yield(0,_._)(i.sharedDataService.fetchStations()),i.schools=yield(0,_._)(i.sharedDataService.fetchSchools())}catch(c){console.error("Error fetching data:",c),i.toastr.error(i.translate.instant("toast.error_loading_data"))}i.activatedRoute.params.subscribe(function(){var c=(0,d.A)(function*(g){i.clientId=+g.client,i.clientId?(i.spinnerService.show(),yield i.getMonitors(),i.getClient(i.clientId),i.loadBookings(i.clientId)):(i.toastr.error(i.translate.instant("toast.no_client_found")),i.goTo("home"))});return function(g){return c.apply(this,arguments)}}())}});return function(r){return a.apply(this,arguments)}}())})()}getLanguageById(i){const a=this.languages.find(r=>r.id===i);return a?a.code.toUpperCase():""}getCountryById(i){const a=b.k.find(r=>r.id===i);return a?a.iso:"Aucun"}getProvinceById(i){const a=v.R.find(r=>r.id===i);return a?a.name:"Aucune"}getMonitors(){var i=this;return(0,d.A)(function*(){try{const a=yield i.teachService.getData("monitors").toPromise();i.monitors=a.data}catch(a){console.error("There was an error!",a)}})()}getClient(i){this.spinnerService.show(),this.teachService.getData(`clients/${i}`,null,{"with[]":"main"}).subscribe(a=>{const r=a.data;this.spinnerService.hide(),r?(r.birth_years=this.getBirthYears(r.birth_date),this.clientMonitor=r,this.changeDetectorRef.detectChanges()):(this.toastr.error(this.translate.instant("toast.no_client_found")),this.goTo("home"))},a=>{console.error("There was an error fetching clients!",a),this.spinnerService.hide()})}loadBookings(i){this.spinnerService.show(),this.teachService.getData("teach/clients/"+i+"/bookings",null,{date_start:this.todayDateFormatted,date_end:this.tomorrowDateFormatted}).subscribe(a=>{const r=new Date,c=new Date;c.setDate(r.getDate()+1);const g=a.data.filter(u=>this.isSameDay(new Date(u.date),r)),C=a.data.filter(u=>this.isSameDay(new Date(u.date),c));this.bookingsToday=this.addFieldsBookings(g),this.bookingsTomorrow=this.addFieldsBookings(C),this.changeDetectorRef.detectChanges(),this.spinnerService.hide()},a=>{console.error("There was an error!",a),this.spinnerService.hide()})}isSameDay(i,a){return i.getDate()===a.getDate()&&i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear()}addFieldsBookings(i){return i.map(a=>({...a,monitor_data:this.monitors.find(r=>r.id===a.monitor_id),school_data:this.schools.find(r=>r.id===a.course.school_id),station_data:this.stations.find(r=>r.id===a.course.station_id),degree_data:this.degrees.find(r=>r.id===a.degree_id),sport_data:this.sports.find(r=>r.id===a.course.sport_id)}))}getBirthYears(i){const a=l(i);return l().diff(a,"years")}formatTimeRange(i,a){let r=a;r||(r="18:00");const c=g=>g.substring(0,5);return`${c(i)}-${c(r)}`}toggleMenu(){this.menuService.toggleMenu()}goTo(...i){this.router.navigate(i)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(t=o).\u0275fac=function(i){return new(i||t)(e.rXU(m.Ix),e.rXU(m.nX),e.rXU(e.gRc),e.rXU(R.$),e.rXU(E.O),e.rXU(k.H),e.rXU(I.R),e.rXU($.tw),e.rXU(y.D),e.rXU(M.c$))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-scan-client"]],decls:22,vars:12,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-24"],[1,"header-section-title"],["src","assets/icon/icon-scan-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],["class","header-user-data-b mt-24",4,"ngIf"],[1,"padding-wrapper"],[1,"background-color-dark","box-radius","padding-wrapper"],["class","header-user-data-b mb-32",4,"ngIf"],["class","mb-24 content-title-separator",4,"ngIf"],["class","content-title-c",4,"ngIf"],[4,"ngFor","ngForOf"],["class","pt-12 mt-32 mb-24 content-title-separator",4,"ngIf"],["section","scan"],[1,"header-user-data-b","mt-24"],[1,"header-user-data-img"],[3,"src"],[1,"header-user-data-text"],[1,"header-user-data-text-top"],[1,"color-light"],[4,"ngIf"],[1,"header-user-data-text-title"],["src","assets/icon/icon-crown.png"],[1,"header-user-data-text-icons"],[3,"href"],["src","assets/icon/icon-phone-box.png",1,"cursor-pointer"],["src","assets/icon/icon-mail-box.png",1,"cursor-pointer"],[1,"header-user-data-b","mb-32"],[1,"mb-24","content-title-separator"],[1,"content-title-c"],["class","border-separator mt-24 mb-24",4,"ngIf"],[1,"box-selector-full"],[1,"box-selector-top"],[1,"box-selector-date"],[1,"box-selector-middle"],[1,"box-selector-middle-interior"],[1,"box-selector-image-wrapper"],["src","assets/icon/course-collective-box.png","class","box-selector-image",4,"ngIf"],["src","assets/icon/course-private-box.png","class","box-selector-image",4,"ngIf"],[1,"box-selector-text"],[1,"montserrat","box-selector-title"],[1,"montserrat","color-light","box-selector-subtitle"],["class","box-selector-level color-light",3,"ngStyle",4,"ngIf"],["class","montserrat color-light box-selector-bottom",4,"ngIf"],[1,"border-separator","mt-24","mb-24"],["src","assets/icon/course-collective-box.png",1,"box-selector-image"],["src","assets/icon/course-private-box.png",1,"box-selector-image"],[1,"box-selector-level","color-light",3,"ngStyle"],[1,"montserrat","color-light","box-selector-bottom"],["src","assets/icon/icon-location-grey.png",1,"box-selector-location"],[1,"mt-24","mb-12","content-title-c","uppercase"],[1,"montserrat","mt-12","mb-24","pt-8","pb-8","user-booking"],[1,"user-booking-img"],[1,"user-booking-content"],[1,"color-light","user-booking-subheader"],[1,"user-booking-header"],[1,"user-booking-title"],[1,"mt-24","mb-12","content-title-c"],[1,"pt-12","mt-32","mb-24","content-title-separator"]],template:function(i,a){1&i&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e.nrm(5,"img",4),e.j41(6,"div"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"img",5),e.bIt("click",function(){return a.toggleMenu()}),e.k0s()(),e.DNE(10,G,18,11,"div",6),e.DNE(11,T,17,11,"div",6),e.k0s(),e.j41(12,"div",7)(13,"div",8),e.DNE(14,B,12,9,"div",9),e.DNE(15,Y,2,1,"div",10),e.DNE(16,w,3,3,"div",11),e.DNE(17,ee,23,12,"ng-container",12),e.DNE(18,te,2,1,"div",13),e.DNE(19,ne,3,3,"div",11),e.DNE(20,he,23,12,"ng-container",12),e.k0s()()()(),e.nrm(21,"app-footer",14)),2&i&&(e.R7$(7),e.JRh(e.bMT(8,10,"scan")),e.R7$(3),e.Y8G("ngIf",a.clientMonitor&&a.clientMonitor.main),e.R7$(1),e.Y8G("ngIf",a.clientMonitor&&!a.clientMonitor.main),e.R7$(3),e.Y8G("ngIf",a.clientMonitor&&a.clientMonitor.main),e.R7$(1),e.Y8G("ngIf",a.bookingsToday),e.R7$(1),e.Y8G("ngIf",a.bookingsToday&&!a.bookingsToday.length),e.R7$(1),e.Y8G("ngForOf",a.bookingsToday),e.R7$(1),e.Y8G("ngIf",a.bookingsTomorrow),e.R7$(1),e.Y8G("ngIf",a.bookingsTomorrow&&!a.bookingsTomorrow.length),e.R7$(1),e.Y8G("ngForOf",a.bookingsTomorrow))},dependencies:[p.Sq,p.bT,p.B3,h.W9,D.n,M.D9],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-user-data[_ngcontent-%COMP%]{display:flex;width:100%;align-items:flex-start;gap:16px}.header-user-data-b[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;gap:16px}.header-user-data-img[_ngcontent-%COMP%]{width:54px;min-width:54px;height:54px;position:relative;border-radius:54px}.header-user-data-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.header-user-data-text[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:4px}.header-user-data-text-top[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.header-user-data-text-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:11px}.header-user-data-text-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.header-user-data-text-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:17px;color:#fff;font-weight:500}.header-user-data-text-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-user-data-text-subtitle[_ngcontent-%COMP%]{font-size:13px}.header-user-data-text-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-user-data-text-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px}.content-title-separator[_ngcontent-%COMP%]{font-size:17px;color:#fff;font-weight:500;text-transform:capitalize}.content-title-c[_ngcontent-%COMP%]{font-size:12px;color:#fff}.user-booking[_ngcontent-%COMP%]{display:flex;width:100%;gap:12px;align-items:center}.user-booking-content[_ngcontent-%COMP%]{width:100%;display:flex;gap:4px;flex-direction:column}.user-booking-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.user-booking-title[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.user-booking-img[_ngcontent-%COMP%]{width:50px;min-width:50px;height:50px;border-radius:50px;position:relative}.user-booking-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.user-booking-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.user-booking-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.user-booking-subheader[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:11px}.user-booking-subheader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.user-booking-level[_ngcontent-%COMP%]{color:#80adff}.box-radius[_ngcontent-%COMP%]{width:100%;border-radius:8px}.box-selector-full[_ngcontent-%COMP%]{display:flex;white-space:normal;width:100%;flex-direction:column;gap:14px;align-items:flex-start;border-radius:8px}.box-selector-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.box-selector-middle[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;width:100%}.box-selector-bottom-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.box-selector-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px}.box-selector-bottom-left[_ngcontent-%COMP%], .box-selector-bottom-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.box-selector-bottom-number[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:16px;background:#e9484a;color:#fff;font-size:11px;display:flex;align-items:center;justify-content:center}.box-selector-bottom-users[_ngcontent-%COMP%]{display:block;position:relative;width:40px;height:40px}.box-selector-bottom-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute;border-radius:40px;border:1px solid var(--ion-back-color-dark)}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){right:0}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){right:6px}.box-selector-bottom-users[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){right:12px}.box-selector-date[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.box-selector-price[_ngcontent-%COMP%]{font-size:13px}.box-selector-middle-interior[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.box-selector-image-wrapper[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:8px;position:relative}.box-selector-image[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:8px}.box-selector-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.box-selector-title[_ngcontent-%COMP%]{color:#fff;font-size:14px}.box-selector-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px}.box-selector-subtitle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.box-selector-level[_ngcontent-%COMP%]{font-size:12px;padding:4px 6px;border-radius:20px}.box-selector-location[_ngcontent-%COMP%]{width:13px}.border-separator[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #444953;height:1px}"]}),o})()}];let ve=(()=>{var t;class o{}return(t=o).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.iI.forChild(be),m.iI]}),o})();var xe=s(5553);let Me=(()=>{var t;class o{}return(t=o).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.MD,x.YN,h.bv,ve,xe.h,M.h]}),o})()},4843:(S,f,s)=>{s.d(f,{_:()=>h});var p=s(9350),x=s(7707);function h(m,d){const _="object"==typeof d;return new Promise((l,b)=>{const v=new x.Ms({next:e=>{l(e),v.unsubscribe()},error:b,complete:()=>{_?l(d.defaultValue):b(new p.G)}});m.subscribe(v)})}}}]);