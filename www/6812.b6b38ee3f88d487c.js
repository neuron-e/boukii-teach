"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6812],{6812:(R,m,r)=>{r.r(m),r.d(m,{ScanPageModule:()=>w});var v=r(6814),C=r(6223),u=r(3582),g=r(5367),f=r(5861),P=r(2726),h=function(n){return n.Aztec="AZTEC",n.Codabar="CODABAR",n.Code39="CODE_39",n.Code93="CODE_93",n.Code128="CODE_128",n.DataMatrix="DATA_MATRIX",n.Ean8="EAN_8",n.Ean13="EAN_13",n.Itf="ITF",n.Pdf417="PDF_417",n.QrCode="QR_CODE",n.UpcA="UPC_A",n.UpcE="UPC_E",n}(h||{});const c=(0,P.fo)("BarcodeScanner",{web:()=>r.e(7338).then(r.bind(r,7338)).then(n=>new n.BarcodeScannerWeb)});var e=r(6689),A=r(2042),D=r(2425),b=r(7364),y=r(7913);const L=[{path:"",component:(()=>{var n;class s{constructor(t,o,i,p){this.router=t,this.menuService=o,this.toastr=i,this.spinnerService=p}ionViewDidEnter(){this.initializeScanner()}initializeScanner(){var t=this;return(0,f.Z)(function*(){try{"granted"!==(yield c.checkPermissions()).camera&&(yield c.requestPermissions());const i=document.querySelector(".qr-scanner-wrapper"),p=document.querySelector(".qr-scanner-frame"),l=document.querySelector(".ion-content-scan"),M=document.body;i&&l&&p?(i.classList.add("barcode-scanner-active"),l.classList.add("ion-content-transparent"),M.style.background="transparent",p.classList.remove("display-none"),console.log("Class 'barcode-scanner-active' added to the element")):console.error("qr-scanner-wrapper element not found"),c.startScan({formats:[h.QrCode]}),c.addListener("barcodeScanned",function(){var U=(0,f.Z)(function*(d){d.barcode&&(console.log(d.barcode),console.log(d.barcode.rawValue),t.spinnerService.show(),setTimeout(()=>{t.spinnerService.hide(),t.toastr.success("QR scann\xe9 avec succ\xe8s"),t.router.navigate(["/scan-client",d.barcode.rawValue])},1e3)),yield t.stopScanner()});return function(d){return U.apply(this,arguments)}}())}catch(o){console.error("Error starting QR Code scanner:",o),t.toastr.success("Erreur de num\xe9risation QR"),yield t.stopScanner()}})()}stopScanner(){return(0,f.Z)(function*(){const t=document.querySelector(".qr-scanner-wrapper"),o=document.querySelector(".qr-scanner-frame"),i=document.querySelector(".ion-content-scan"),p=document.body;t&&i&&o?(t.classList.remove("barcode-scanner-active"),i.classList.remove("ion-content-transparent"),p.style.removeProperty("background"),o.classList.add("display-none"),console.log("Scanner stopped and styles reset")):console.error("qr-scanner-wrapper element not found"),yield c.stopScan(),yield c.removeAllListeners()})()}ionViewWillLeave(){this.stopScanner()}toggleMenu(){this.menuService.toggleMenu()}goTo(...t){this.router.navigate(t)}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(A.h),e.Y36(D._W),e.Y36(b.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-scan"]],decls:16,vars:0,consts:[[1,"ion-content-scan"],[1,"content-size"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper","header-index"],[1,"header-section-content"],[1,"header-section-title"],["src","assets/icon/icon-scan-blue.png"],["src","assets/icon/icon-menu.png",1,"header-section-menu","cursor-pointer",3,"click"],[1,"qr-scanner-wrapper"],[1,"qr-scanner-frame","display-none"],[1,"corner","top-left"],[1,"corner","top-right"],[1,"corner","bottom-left"],[1,"corner","bottom-right"],["section","scan"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.TgZ(6,"div"),e._uU(7,"Analyse"),e.qZA()(),e.TgZ(8,"img",6),e.NdJ("click",function(){return o.toggleMenu()}),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8),e._UZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),e.qZA()()()(),e._UZ(15,"app-footer",13))},dependencies:[u.W2,y.c],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-index[_ngcontent-%COMP%]{z-index:10;position:relative}.qr-scanner-wrapper[_ngcontent-%COMP%]{width:100%;height:100vh;position:fixed;top:0;left:0}.qr-scanner-frame[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:210px;height:210px;border:1px solid transparent}.corner[_ngcontent-%COMP%]{position:absolute;width:32px;height:32px;background-color:transparent;border:4px solid var(--ion-color-primary)}.top-left[_ngcontent-%COMP%]{top:0;left:0;border-bottom:none;border-right:none}.top-right[_ngcontent-%COMP%]{top:0;right:0;border-bottom:none;border-left:none}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0;border-top:none;border-right:none}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0;border-top:none;border-left:none}"]}),s})()}];let x=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(L),g.Bz]}),s})();var S=r(822);let w=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[v.ez,C.u5,u.Pc,x,S.K]}),s})()}}]);