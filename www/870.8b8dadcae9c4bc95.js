"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[870],{870:(l,a,i)=>{i.r(a),i.d(a,{BarcodeScannerWeb:()=>d});var t=i(467),o=i(7464),s=i(3822);class d extends o.E_{constructor(){super(...arguments),this._isSupported="BarcodeDetector"in window,this.errorVideoElementMissing="videoElement must be provided.",this.eventBarcodesScanned="barcodesScanned"}startScan(e){var n=this;return(0,t.A)(function*(){if(!n._isSupported)throw n.createUnimplementedException();if(null==e||!e.videoElement)throw new Error(n.errorVideoElementMissing);n.videoElement=e.videoElement,n.stream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:(null==e?void 0:e.lensFacing)===s.Nn.Front?"user":"environment"}},audio:!1}),e.videoElement.srcObject=n.stream,yield e.videoElement.play();const r=new BarcodeDetector;n.intervalId=window.setInterval((0,t.A)(function*(){if(!e.videoElement)return;const c=yield r.detect(e.videoElement);0!==c.length&&n.handleScannedBarcodes(c)}),500)})()}stopScan(){var e=this;return(0,t.A)(function*(){if(!e._isSupported)throw e.createUnimplementedException();e.intervalId&&(clearInterval(e.intervalId),e.intervalId=void 0),e.stream&&(e.stream.getTracks().forEach(n=>n.stop()),e.stream=void 0),e.videoElement&&(e.videoElement.srcObject=null,e.videoElement=void 0)})()}readBarcodesFromImage(e){var n=this;return(0,t.A)(function*(){throw n.createUnimplementedException()})()}scan(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}isSupported(){var e=this;return(0,t.A)(function*(){return{supported:e._isSupported}})()}enableTorch(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}disableTorch(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}toggleTorch(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}isTorchEnabled(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}isTorchAvailable(){return(0,t.A)(function*(){return{available:!1}})()}setZoomRatio(e){var n=this;return(0,t.A)(function*(){throw n.createUnimplementedException()})()}getZoomRatio(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}getMinZoomRatio(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}getMaxZoomRatio(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}openSettings(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}isGoogleBarcodeScannerModuleAvailable(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}installGoogleBarcodeScannerModule(){var e=this;return(0,t.A)(function*(){throw e.createUnimplementedException()})()}checkPermissions(){return(0,t.A)(function*(){try{return{camera:(yield navigator.permissions.query({name:"camera"})).state}}catch{return{camera:"prompt"}}})()}requestPermissions(){return(0,t.A)(function*(){try{return(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(n=>n.stop()),{camera:"granted"}}catch{return{camera:"denied"}}})()}createUnimplementedException(){return new o.I9("This method is not implemented on web.",o.$c.Unimplemented)}handleScannedBarcodes(e){const n={barcodes:e.map(r=>({cornerPoints:[[r.cornerPoints[0].x,r.cornerPoints[0].y],[r.cornerPoints[1].x,r.cornerPoints[1].y],[r.cornerPoints[2].x,r.cornerPoints[2].y],[r.cornerPoints[3].x,r.cornerPoints[3].y]],displayValue:r.rawValue,rawValue:r.rawValue,format:r.format.toUpperCase(),valueType:s.gH.Unknown}))};this.notifyListeners(this.eventBarcodesScanned,n)}}}}]);