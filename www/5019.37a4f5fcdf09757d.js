"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5019],{5019:(P,x,s)=>{s.r(x),s.d(x,{ClientDetailPageModule:()=>K});var g=s(6814),M=s(6223),v=s(3582),p=s(8520),l=s(5861),f=s(4036),d=s(6676),m=s(3659),_=s(8187),t=s(2029),Z=s(2234),y=s(5693),O=s(3271),w=s(2425),T=s(7364),C=s(3911),D=s(9844);function A(i,a){1&i&&(t.TgZ(0,"div",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"group")," "))}function S(i,a){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.getLanguageById(e.clientMonitor.main.language1_id)," \xb7 ")}}function L(i,a){if(1&i&&(t.TgZ(0,"div",26)(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t.YNc(6,S,2,1,"ng-container",22),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",32)(10,"div"),t._uU(11),t.qZA(),t._UZ(12,"img",33),t.qZA(),t.TgZ(13,"div",34)(14,"a",35),t._UZ(15,"img",36),t.qZA(),t.TgZ(16,"a",35),t._UZ(17,"img",37),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("src",e.clientMonitor.main.image?e.clientMonitor.main.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH),t.xp6(4),t.Q6J("ngIf",e.clientMonitor.main.language1_id),t.xp6(1),t.lnq(" ",e.getCountryById(e.clientMonitor.main.country)," \xb7 ",e.getBirthYears(e.clientMonitor.main.birth_date)," ",t.lcZ(8,9,"years")," "),t.xp6(4),t.AsE("",e.clientMonitor.main.first_name," ",e.clientMonitor.main.last_name,""),t.xp6(3),t.Q6J("href","tel:"+e.clientMonitor.main.phone,t.LSH),t.xp6(2),t.Q6J("href","mailto:"+e.clientMonitor.main.email,t.LSH)}}function I(i,a){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.getLanguageById(e.clientMonitor.language1_id)," \xb7 ")}}function U(i,a){if(1&i&&(t.TgZ(0,"div",26)(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t.YNc(6,I,2,1,"ng-container",22),t._uU(7),t.qZA()(),t.TgZ(8,"div",32)(9,"div"),t._uU(10),t.qZA()(),t.TgZ(11,"div",34)(12,"a",35),t._UZ(13,"img",36),t.qZA(),t.TgZ(14,"a",35),t._UZ(15,"img",37),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("src",e.clientMonitor.image?e.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH),t.xp6(4),t.Q6J("ngIf",e.clientMonitor.language1_id),t.xp6(1),t.AsE(" ",e.getCountryById(e.clientMonitor.country)," \xb7 ",e.clientMonitor.birth_years," ans "),t.xp6(3),t.AsE("",e.clientMonitor.first_name," ",e.clientMonitor.last_name,""),t.xp6(2),t.Q6J("href","tel:"+e.clientMonitor.phone,t.LSH),t.xp6(2),t.Q6J("href","mailto:"+e.clientMonitor.email,t.LSH)}}function J(i,a){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.getLanguageById(e.clientMonitor.language1_id)," \xb7 ")}}function Q(i,a){if(1&i&&(t.TgZ(0,"div",38)(1,"div",27),t._UZ(2,"img",28),t.qZA(),t.TgZ(3,"div",29)(4,"div",30)(5,"div",31),t.YNc(6,J,2,1,"ng-container",22),t._uU(7),t.qZA()(),t.TgZ(8,"div",32)(9,"div"),t._uU(10),t.qZA()(),t.TgZ(11,"div",34)(12,"a",35),t._UZ(13,"img",36),t.qZA(),t.TgZ(14,"a",35),t._UZ(15,"img",37),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("src",e.clientMonitor.image?e.clientMonitor.image:"assets/icon/icons-outline-default-avatar.svg",t.LSH),t.xp6(4),t.Q6J("ngIf",e.clientMonitor.language1_id),t.xp6(1),t.AsE(" ",e.getCountryById(e.clientMonitor.country)," \xb7 ",e.clientMonitor.birth_years," ans "),t.xp6(3),t.AsE("",e.clientMonitor.first_name," ",e.clientMonitor.last_name,""),t.xp6(2),t.Q6J("href","tel:"+e.clientMonitor.phone,t.LSH),t.xp6(2),t.Q6J("href","mailto:"+e.clientMonitor.email,t.LSH)}}const k=function(i){return{"opacity-light":i}};function B(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){const r=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.changeSport(r))}),t._UZ(1,"img",28),t.TgZ(2,"div",42),t._uU(3),t.qZA()()}if(2&i){const e=a.$implicit;t.Q6J("ngClass",t.VKq(3,k,!e.selected)),t.xp6(1),t.Q6J("src",e.selected?e.icon_selected:e.icon_unselected,t.LSH),t.xp6(2),t.Oqu(e.name)}}function z(i,a){if(1&i&&(t.TgZ(0,"div",39),t.YNc(1,B,4,5,"div",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.clientMonitor.sports)}}function Y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"app-level-full",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goTo("client-level","client","1","1",o.clientId,o.sportSelected))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("allLevels",e.sportDegrees)("selectLevel",e.clientMonitor.degree_sport)("size",280)}}function j(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.clientMonitor.observations.general," ")}}function q(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"div",45),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",44),t._uU(5),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"school_notes")),t.xp6(3),t.hij(" ",e.clientMonitor.observations.notes," ")}}function E(i,a){if(1&i&&(t.TgZ(0,"div",44),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.clientMonitor.observations.historical," ")}}const N=[{path:"",component:(()=>{var i;class a{constructor(n,o,r,c,u,h,b,R){this.router=n,this.activatedRoute=o,this.monitorDataService=r,this.sharedDataService=c,this.teachService=u,this.toastr=h,this.spinnerService=b,this.translate=R,this.showGeneral=!0,this.showSports=!1,this.showWinter=!0,this.showSummer=!1,this.showOther=!1,this.showLevel=!1,this.dataSports=[{id:1,name:"Ski",image:"assets/icon/icons-outline-disciplinas-1.svg",checked:!1},{id:2,name:"Snowboard",image:"assets/icon/icons-outline-disciplinas-2.svg",checked:!1},{id:3,name:"Telemark",image:"assets/icon/icons-outline-disciplinas-3.svg",checked:!1},{id:4,name:"S.Rando",image:"assets/icon/icons-outline-disciplinas-4.svg",checked:!1}],this.currentLevel=0,this.degrees=[],this.sportDegrees=[],this.sports=[],this.languages=[]}ngOnInit(){var n=this;return(0,l.Z)(function*(){n.subscription=n.monitorDataService.getMonitorData().subscribe(function(){var o=(0,l.Z)(function*(r){if(r){n.monitorData=r;try{n.degrees=yield(0,f.z)(n.sharedDataService.fetchDegrees(n.monitorData.active_school)),n.sports=yield(0,f.z)(n.sharedDataService.fetchSports(n.monitorData.active_school)),n.languages=yield(0,f.z)(n.sharedDataService.fetchLanguages())}catch(c){console.error("Error fetching data:",c),n.toastr.error(n.translate.instant("toast.error_loading_data"))}n.activatedRoute.params.subscribe(function(){var c=(0,l.Z)(function*(u){n.clientId=+u.id,n.clientId?(n.spinnerService.show(),yield n.getClient(),n.spinnerService.hide()):n.goTo("clients")});return function(u){return c.apply(this,arguments)}}())}});return function(r){return o.apply(this,arguments)}}())})()}getLanguageById(n){const o=this.languages.find(r=>r.id===n);return o?o.code.toUpperCase():""}getCountryById(n){const o=m.M.find(r=>r.id===n);return o?o.iso:"Aucun"}getProvinceById(n){const o=_.J.find(r=>r.id===n);return o?o.name:"Aucune"}getClient(){var n=this;return(0,l.Z)(function*(){try{const r=(yield n.teachService.getData(`teach/clients/${n.clientId}`).toPromise()).data;if(r){const c=d(r.birth_date),u=d().diff(c,"years");r.birth_years=u,r.degree_sport=0,r.sports&&r.sports.length&&r.sports[0]&&(r.sports[0].selected=!0,r.sports[0].pivot.degree_id&&(r.degree_sport=r.sports[0].pivot.degree_id)),n.clientMonitor=r;let h=1;n.clientMonitor&&n.clientMonitor.sports&&n.clientMonitor.sports.length&&n.clientMonitor.sports[0].id&&(h=n.clientMonitor.sports[0].id),n.sportSelected=h,n.sportDegrees=n.degrees.filter(b=>b.sport_id===h)}else n.goTo("clients")}catch(o){console.error("There was an error fetching clients!",o)}})()}changeSport(n){let o=0;this.clientMonitor.sports[n]&&(this.clientMonitor.sports.forEach(r=>{r.selected=!1}),this.clientMonitor.sports[n].selected=!0,this.clientMonitor.sports[n].pivot.degree_id&&(o=this.clientMonitor.sports[n].pivot.degree_id),this.sportSelected=this.clientMonitor.sports[n].id),this.clientMonitor.degree_sport=o,this.sportDegrees=this.degrees.filter(r=>r.sport_id===this.clientMonitor.sports[n].id)}getBirthYears(n){const o=d(n);return d().diff(o,"years")}doShowLevel(n){this.selectedSport=n,this.currentLevel=n.level?n.level:0,this.showLevel=!0}updateLevel(){this.selectedSport.level=this.currentLevel,this.currentLevel=0,this.showLevel=!1}goTo(...n){this.router.navigate(n)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(i=a).\u0275fac=function(n){return new(n||i)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(Z.q),t.Y36(y.g),t.Y36(O.b),t.Y36(w._W),t.Y36(T.V),t.Y36(C.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-client-detail"]],decls:38,vars:18,consts:[[1,"content-size","content-background-image","status-bar-overlap"],[1,"background-color-dark","padding-wrapper"],[1,"header-content","mb-12"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],["class","header-top-title",4,"ngIf"],["class","header-user-data mt-24",4,"ngIf"],[1,"padding-wrapper"],[1,"background-color-dark","box-radius"],["class","header-user-data padding-wrapper",4,"ngIf"],[1,"box-top"],["class","box-top-left",4,"ngIf"],[1,"pt-24"],["class","cursor-pointer",3,"allLevels","selectLevel","size","click",4,"ngIf"],[1,"padding-wrapper","mt-8"],[1,"content-button","btn-back-primary","montserrat",3,"click"],[1,"flex-title-selector","mt-32","mb-8","cursor-pointer"],[1,"flex-title-selector-interior"],[1,"background-color-dark","flex-title-selector-icon"],["src","assets/icon/icon-observations.png"],[1,"flex-title-selector-text"],[1,"background-color-dark","box-radius","box-observations"],["class","montserrat color-light text-observations",4,"ngIf"],[4,"ngIf"],["src","assets/icon/icon-historic.png"],[1,"background-color-dark","box-radius","box-observations","mb-24"],[1,"header-top-title"],[1,"header-user-data","mt-24"],[1,"header-user-data-img"],[3,"src"],[1,"header-user-data-text"],[1,"header-user-data-text-top"],[1,"color-light"],[1,"header-user-data-text-title"],["src","assets/icon/icon-crown.png"],[1,"header-user-data-text-icons"],[3,"href"],["src","assets/icon/icon-phone-box.png",1,"cursor-pointer"],["src","assets/icon/icon-mail-box.png",1,"cursor-pointer"],[1,"header-user-data","padding-wrapper"],[1,"box-top-left"],["class","box-top-icon cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"box-top-icon","cursor-pointer",3,"ngClass","click"],[1,"montserrat"],[1,"cursor-pointer",3,"allLevels","selectLevel","size","click"],[1,"montserrat","color-light","text-observations"],[1,"montserrat","mt-12","pt-8","pb-8","title-observations"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),t.NdJ("click",function(){return o.goTo("clients")}),t.qZA(),t.YNc(5,A,3,3,"div",4),t.qZA(),t.YNc(6,L,18,11,"div",5),t.YNc(7,U,16,8,"div",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7),t.YNc(10,Q,16,8,"div",8),t.TgZ(11,"div",9),t.YNc(12,z,2,1,"div",10),t.qZA(),t.TgZ(13,"div",11),t.YNc(14,Y,1,3,"app-level-full",12),t.TgZ(15,"div",13)(16,"button",14),t.NdJ("click",function(){return o.goTo("client-level","client","1","1",o.clientId,o.sportSelected)}),t._uU(17),t.ALo(18,"translate"),t.qZA()()()(),t.TgZ(19,"div",15)(20,"div",16)(21,"div",17),t._UZ(22,"img",18),t.qZA(),t.TgZ(23,"div",19),t._uU(24),t.ALo(25,"translate"),t.qZA()()(),t.TgZ(26,"div",20),t.YNc(27,j,2,1,"div",21),t.YNc(28,q,6,4,"ng-container",22),t.qZA(),t.TgZ(29,"div",15)(30,"div",16)(31,"div",17),t._UZ(32,"img",23),t.qZA(),t.TgZ(33,"div",19),t._uU(34),t.ALo(35,"translate"),t.qZA()()(),t.TgZ(36,"div",24),t.YNc(37,E,2,1,"div",21),t.qZA()()()()),2&n&&(t.xp6(5),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),t.xp6(1),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),t.xp6(1),t.Q6J("ngIf",o.clientMonitor&&!o.clientMonitor.main),t.xp6(3),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.main),t.xp6(2),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.sports),t.xp6(2),t.Q6J("ngIf",o.clientMonitor&&o.sportDegrees&&o.sportDegrees.length),t.xp6(3),t.hij(" ",t.lcZ(18,12,"evaluate_progress")," "),t.xp6(7),t.hij(" ",t.lcZ(25,14,"observations")," "),t.xp6(3),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.observations.general),t.xp6(1),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.observations.notes),t.xp6(6),t.hij(" ",t.lcZ(35,16,"historical")," "),t.xp6(3),t.Q6J("ngIf",o.clientMonitor&&o.clientMonitor.observations.historical))},dependencies:[g.mk,g.sg,g.O5,v.W2,D.L,C.X$],styles:[".content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-user-data[_ngcontent-%COMP%]{display:flex;width:100%;align-items:flex-start;gap:16px}.header-user-data-img[_ngcontent-%COMP%]{width:60px;min-width:60px;height:60px;position:relative;border-radius:60px}.header-user-data-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.header-user-data-text[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:4px}.header-user-data-text-top[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.header-user-data-text-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:11px}.header-user-data-text-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.header-user-data-text-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:17px;color:#fff;font-weight:500}.header-user-data-text-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-user-data-text-subtitle[_ngcontent-%COMP%]{font-size:13px}.header-user-data-text-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-user-data-text-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px}.box-sport[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;padding:18px 12px;border-radius:8px}.box-sport[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.box-sport[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.box-sport[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}.box-school[_ngcontent-%COMP%]{display:block;width:300px;min-width:300px;padding:18px 12px;border-radius:8px}.box-school-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.flex-title-selector[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.flex-title-selector-interior[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.flex-title-selector-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px;display:flex;align-items:center;justify-content:center}.flex-title-selector-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.flex-title-selector-text[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:500}.flex-title-selector-arrow[_ngcontent-%COMP%]{width:24px}.box-radius[_ngcontent-%COMP%]{width:100%;border-radius:8px}.box-top[_ngcontent-%COMP%]{padding:10px 20px;border-bottom:1px solid #43494f;display:flex;width:100%;align-items:center;justify-content:space-between}.box-top-left[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.box-top-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center}.box-top-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.box-top-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.box-observations[_ngcontent-%COMP%]{padding:12px 16px}.text-observations[_ngcontent-%COMP%]{font-size:13px}.title-observations[_ngcontent-%COMP%]{font-size:15px;border-top:1px solid #444953}.list-box-selector-users[_ngcontent-%COMP%]{width:100%;overflow-x:auto;white-space:nowrap;display:flex;gap:16px;padding:8px 0;margin-bottom:-16px;justify-content:space-around}.box-selector-user-section[_ngcontent-%COMP%]{display:flex;white-space:normal;width:80px;min-width:80px;max-width:80px;padding:8px;flex-direction:column;gap:12px;align-items:center;border-radius:8px;justify-content:flex-start}.box-selector-user-section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#fff;font-size:14px;line-height:1.3;text-align:center}.box-selector-user-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.opacity-light[_ngcontent-%COMP%]{opacity:.6}"]}),a})()}];let H=(()=>{var i;class a{}return(i=a).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(N),p.Bz]}),a})();var F=s(822);let K=(()=>{var i;class a{}return(i=a).\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,M.u5,v.Pc,H,F.K,C.aw]}),a})()},4036:(P,x,s)=>{s.d(x,{z:()=>v});var g=s(6973),M=s(305);function v(p,l){const f="object"==typeof l;return new Promise((d,m)=>{const _=new M.Hp({next:t=>{d(t),_.unsubscribe()},error:m,complete:()=>{f?d(l.defaultValue):m(new g.K)}});p.subscribe(_)})}}}]);