"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4414],{4414:(j,B,u)=>{u.r(B),u.d(B,{CourseDetailPageModule:()=>fe});var b=u(177),w=u(9417),P=u(8974),M=u(3314),y=u(467),O=u(4843),m=u(7586),D=u(9065),I=u(9569),e=u(6996),F=u(5663),R=u(918),$=u(4387),E=u(5794),G=u(8551),T=u(1547),S=u(7319);function Y(n,l){1&n&&e.nrm(0,"div",12)}function z(n,l){if(1&n){const i=e.RV6();e.j41(0,"div",10),e.bIt("click",function(){const r=e.eBV(i).$implicit,s=e.XpG();return e.Njj(s.selectBooking(r))}),e.EFF(1),e.nrm(2,"br"),e.EFF(3),e.DNE(4,Y,1,0,"div",11),e.k0s()}if(2&n){const i=l.$implicit,t=e.XpG();e.Y8G("ngClass",t.selectedBooking===i?"section-selected":"section-title"),e.R7$(1),e.SpI(" ",t.formatTimeStart(i.hour_start)," "),e.R7$(2),e.SpI(" ",t.formatTimeEnd(i.hour_end)," "),e.R7$(1),e.Y8G("ngIf",t.selectedBooking===i)}}function X(n,l){1&n&&e.nrm(0,"img",41)}function N(n,l){1&n&&e.nrm(0,"img",42)}function A(n,l){if(1&n&&e.nrm(0,"img",43),2&n){const i=e.XpG(2);e.Y8G("src",i.selectedBooking.course_sport.icon_selected,e.B4B)}}function V(n,l){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"collective")," "))}function L(n,l){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"private")," "))}function U(n,l){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const i=e.XpG(2);e.R7$(1),e.SpI(" ",i.selectedBooking.course_sport.name," ")}}function J(n,l){if(1&n&&(e.j41(0,"div",44),e.nrm(1,"ion-icon",45),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&n){const i=e.XpG(2);e.R7$(2),e.Lme(" ",e.bMT(3,2,"course_level"),": ",i.getDegreeLabel(i.selectedBooking.degree_sport)," ")}}const W=function(n){return{"chip-selected":n}};function H(n,l){if(1&n){const i=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){const r=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.selectAssignedDate(r))}),e.EFF(1),e.k0s()}if(2&n){const i=l.$implicit,t=e.XpG(3);e.Y8G("ngClass",e.eq3(2,W,t.isSelectedAssignedDate(i))),e.R7$(1),e.SpI(" ",t.formatDate(i.date)," ")}}function K(n,l){if(1&n&&(e.qex(0),e.DNE(1,H,2,4,"div",46),e.bVm()),2&n){const i=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",i.getMonitorAssignedDates())}}function Q(n,l){if(1&n&&(e.j41(0,"div",50),e.EFF(1),e.k0s()),2&n){const i=e.XpG().$implicit,t=e.XpG(3);e.R7$(1),e.SpI(" ",t.formatDate(i.date)," ")}}function Z(n,l){if(1&n&&(e.qex(0),e.DNE(1,Q,2,1,"div",49),e.bVm()),2&n){const i=l.$implicit,t=e.XpG(3);e.R7$(1),e.Y8G("ngIf",t.selectedBooking.course_date_id==i.id)}}function q(n,l){if(1&n&&(e.qex(0),e.DNE(1,Z,2,1,"ng-container",48),e.bVm()),2&n){const i=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",i.selectedBooking.course.course_dates)}}function ee(n,l){if(1&n){const i=e.RV6();e.j41(0,"div",51),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.goTo("course-group",o.bookingIdFull,o.dateBooking,o.selectedBooking.course_id,o.selectedBooking.hour_start,o.selectedBooking.course_group_id,o.selectedBooking.course_subgroup_id))}),e.j41(1,"div",34),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",52)(5,"span",30),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.nrm(8,"img",53),e.k0s()()}2&n&&(e.R7$(2),e.JRh(e.bMT(3,2,"group")),e.R7$(4),e.JRh(e.bMT(7,4,"groups")))}const te=function(n){return{background:n}};function ne(n,l){if(1&n&&(e.j41(0,"div",54),e.nrm(1,"img",55),e.j41(2,"div",56),e.EFF(3),e.k0s()()),2&n){const i=e.XpG(2);e.Y8G("ngStyle",e.eq3(2,te,i.selectedBooking.degree_sport.color)),e.R7$(3),e.JRh(i.getDegreeLabel(i.selectedBooking.degree_sport))}}function ie(n,l){if(1&n&&(e.j41(0,"div",28),e.nrm(1,"img",57),e.j41(2,"div",30),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"span",31),e.EFF(6),e.k0s()()),2&n){const i=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,3,"day")),e.R7$(3),e.Lme("",i.getPositionDate(i.selectedBooking.course.course_dates,i.selectedBooking.course_date_id),"/",i.selectedBooking.course.course_dates.length,"")}}function oe(n,l){if(1&n){const i=e.RV6();e.j41(0,"img",58),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.goTo("course-participation",o.bookingIdFull,o.dateBooking,o.selectedBooking.course_id))}),e.k0s()}}function se(n,l){if(1&n){const i=e.RV6();e.j41(0,"img",59),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.openCourseTransfer())}),e.k0s()}}function re(n,l){1&n&&(e.j41(0,"div",60),e.nrm(1,"ion-icon",61),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"mark_attendance")," "))}function ce(n,l){if(1&n&&e.nrm(0,"app-level-user",72),2&n){const i=e.XpG().$implicit,t=e.XpG(2);e.Y8G("allLevels",t.selectedBooking.sport_degrees)("selectLevel",i.degree_sport)("size",60)("userImage",i.image?i.image:"assets/icon/icons-outline-default-avatar.svg")}}function ae(n,l){if(1&n){const i=e.RV6();e.j41(0,"ion-checkbox",73),e.bIt("ionChange",function(o){e.eBV(i);const r=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.onToggle(r.id,o.detail.checked))})("click",function(o){return o.stopPropagation()}),e.k0s()}if(2&n){const i=e.XpG().$implicit,t=e.XpG(2);e.Y8G("checked",t.isAttended(i.id))}}function le(n,l){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const i=e.XpG().$implicit,t=e.XpG(2);e.R7$(1),e.SpI(" ",t.getLanguageById(i.language1_id)," \xb7 ")}}function de(n,l){1&n&&(e.j41(0,"div",74),e.nrm(1,"div",75),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&n&&(e.R7$(2),e.SpI("",e.bMT(3,1,"not_paid")," "))}function ge(n,l){if(1&n){const i=e.RV6();e.j41(0,"div",62),e.DNE(1,ce,1,4,"app-level-user",63),e.j41(2,"div",64)(3,"div",65)(4,"div",66)(5,"div",67),e.bIt("click",function(){const r=e.eBV(i).$implicit,s=e.XpG(2);return e.Njj(s.goToClientDetail(r))}),e.j41(6,"div"),e.EFF(7),e.k0s()(),e.DNE(8,ae,1,1,"ion-checkbox",68),e.j41(9,"img",69),e.bIt("click",function(){const r=e.eBV(i).$implicit,s=e.XpG(2);return e.Njj(s.goToClientDetail(r))}),e.k0s()(),e.j41(10,"div",70),e.bIt("click",function(){const r=e.eBV(i).$implicit,s=e.XpG(2);return e.Njj(s.goToClientDetail(r))}),e.j41(11,"span",56),e.DNE(12,le,2,1,"ng-container",21),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.DNE(15,de,4,3,"div",71),e.k0s()()()()}if(2&n){const i=l.$implicit,t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",t.selectedBooking&&t.selectedBooking.sport_degrees&&t.selectedBooking.sport_degrees.length),e.R7$(6),e.Lme("",i.first_name," ",i.last_name,""),e.R7$(1),e.Y8G("ngIf",t.canMarkAttendance()),e.R7$(4),e.Y8G("ngIf",i.language1_id),e.R7$(1),e.E5c(" ",t.getCountryById(i.country)," \xb7 ",t.getBirthYears(i.birth_date)," ",e.bMT(14,9,"years")," "),e.R7$(2),e.Y8G("ngIf",!i.booking_client.paid)}}function pe(n,l){if(1&n&&(e.j41(0,"div",13)(1,"div",14),e.DNE(2,X,1,0,"img",15),e.DNE(3,N,1,0,"img",16),e.j41(4,"div",17)(5,"div",18),e.DNE(6,A,1,1,"img",19),e.j41(7,"span",20),e.DNE(8,V,3,3,"ng-container",21),e.DNE(9,L,3,3,"ng-container",21),e.DNE(10,U,2,1,"ng-container",21),e.k0s()(),e.j41(11,"div"),e.EFF(12),e.k0s(),e.DNE(13,J,4,4,"div",22),e.k0s()(),e.j41(14,"div",23),e.DNE(15,K,2,1,"ng-container",21),e.DNE(16,q,2,1,"ng-container",21),e.k0s(),e.DNE(17,ee,9,6,"div",24),e.j41(18,"div",25),e.DNE(19,ne,4,4,"div",26),e.DNE(20,ie,7,5,"div",27),e.j41(21,"div",28),e.nrm(22,"img",29),e.j41(23,"div",30),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"span",31),e.EFF(27),e.k0s()(),e.j41(28,"div",28),e.nrm(29,"img",32),e.j41(30,"div",30),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"span",31),e.EFF(34),e.k0s()()(),e.j41(35,"div",33)(36,"div",34),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.j41(39,"div",35),e.DNE(40,oe,1,0,"img",36),e.DNE(41,se,1,0,"img",37),e.k0s()(),e.DNE(42,re,4,3,"div",38),e.j41(43,"div",39),e.DNE(44,ge,16,11,"div",40),e.k0s()()),2&n){const i=e.XpG();e.R7$(2),e.Y8G("ngIf",1==i.selectedBooking.course.course_type),e.R7$(1),e.Y8G("ngIf",2==i.selectedBooking.course.course_type),e.R7$(3),e.Y8G("ngIf",i.selectedBooking.course_sport&&i.sports.length),e.R7$(2),e.Y8G("ngIf",1==i.selectedBooking.course.course_type),e.R7$(1),e.Y8G("ngIf",2==i.selectedBooking.course.course_type),e.R7$(1),e.Y8G("ngIf",i.selectedBooking.course_sport&&i.sports.length),e.R7$(2),e.JRh(i.selectedBooking.course.name),e.R7$(1),e.Y8G("ngIf",i.selectedBooking.degree_sport),e.R7$(2),e.Y8G("ngIf",1===i.selectedBooking.course.course_type),e.R7$(1),e.Y8G("ngIf",2===i.selectedBooking.course.course_type),e.R7$(1),e.Y8G("ngIf",1==i.selectedBooking.course.course_type),e.R7$(2),e.Y8G("ngIf",1==i.selectedBooking.course.course_type&&i.selectedBooking.degree_sport&&i.degrees.length),e.R7$(1),e.Y8G("ngIf",1==i.selectedBooking.course.course_type),e.R7$(4),e.JRh(e.bMT(25,23,"students")),e.R7$(3),e.Lme("",i.selectedBooking.all_clients.length,"/",i.selectedBooking.course.max_participants,""),e.R7$(4),e.JRh(e.bMT(32,25,"hours")),e.R7$(3),e.JRh(i.getHoursMinutes(i.selectedBooking.hour_start,i.selectedBooking.hour_end)),e.R7$(3),e.JRh(e.bMT(38,27,"students")),e.R7$(3),e.Y8G("ngIf",i.selectedBooking.course.confirm_attendance),e.R7$(1),e.Y8G("ngIf",1==i.selectedBooking.course.course_type),e.R7$(1),e.Y8G("ngIf",i.canMarkAttendance()),e.R7$(2),e.Y8G("ngForOf",i.selectedBooking.all_clients)}}const ue=[{path:"",component:(()=>{var n;class l{constructor(t,o,r,s,a,d,c,_){this.router=t,this.activatedRoute=o,this.monitorDataService=r,this.sharedDataService=s,this.teachService=a,this.toastr=d,this.spinnerService=c,this.translate=_,this.bookingsCurrent=[],this.degrees=[],this.sports=[],this.languages=[],this.bookingUserByClient=new Map,this.translate.onLangChange.subscribe(g=>{this.dateBooking&&this.updateDate(this.dateBooking,g.lang)})}ngOnInit(){var t=this;return(0,y.A)(function*(){t.subscription=t.monitorDataService.getMonitorData().subscribe(function(){var o=(0,y.A)(function*(r){if(r){t.monitorData=r;try{t.degrees=yield(0,O._)(t.sharedDataService.fetchDegrees(t.monitorData.active_school)),t.sports=yield(0,O._)(t.sharedDataService.fetchSports(t.monitorData.active_school)),t.languages=yield(0,O._)(t.sharedDataService.fetchLanguages())}catch(s){console.error("Error fetching data:",s),t.toastr.error(t.translate.instant("toast.error_loading_data"))}t.activatedRoute.params.subscribe(function(){var s=(0,y.A)(function*(a){a.id.startsWith("s-")?(t.bookingIdFull=a.id,t.bookingId=+a.id.substring(2),t.isSubgroup=!0):(t.bookingIdFull=a.id,t.bookingId=+a.id,t.isSubgroup=!1),t.dateBooking=a.date,t.bookingIdFull&&t.bookingId&&t.dateBooking?(t.spinnerService.show(),t.updateDate(t.dateBooking,t.translate.currentLang),t.loadBookings()):t.goTo("home")});return function(a){return s.apply(this,arguments)}}())}});return function(r){return o.apply(this,arguments)}}())})()}updateDate(t,o){m.locale(o),this.currentDateFull=m(t).format("D MMMM YYYY")}getDegreeLabel(t){return(null==t?void 0:t.annotation)||(null==t?void 0:t.name)||(null==t?void 0:t.league)||""}getLanguageById(t){const o=this.languages.find(r=>r.id===t);return o?o.code.toUpperCase():""}getCountryById(t){const o=D.k.find(r=>r.id===t);return o?o.iso:"Aucun"}getProvinceById(t){const o=I.R.find(r=>r.id===t);return o?o.name:"Aucune"}loadCourses(){this.teachService.getData("teach/courses","15").subscribe(t=>{this.courseBookings=t.data,this.spinnerService.hide()},t=>{console.error("There was an error!",t),this.spinnerService.hide()})}loadBookings(){const t={date_start:this.dateBooking,date_end:this.dateBooking};this.monitorData.active_school&&(t.school_id=this.monitorData.active_school),this.teachService.getData("teach/getAgenda",null,t).subscribe(o=>{this.processBookings(o.data.bookings,o.data.subgroups)},o=>{console.error("There was an error!",o),this.spinnerService.hide()})}processBookings(t,o){const r=new Map;this.bookingsCurrent=[],t.forEach(s=>{if(s.course){var a,d,c,_;const g={...s,course_group_id:null!==(a=null!==(d=s.course_group_id)&&void 0!==d?d:s.group_id)&&void 0!==a?a:null===(c=s.course_group)||void 0===c?void 0:c.id,course_subgroup_id:null!==(_=s.course_subgroup_id)&&void 0!==_?_:s.subgroup_id};let h=`${g.course_id}`;if(1==g.course.course_type?h=`${g.course_id}-${g.course_subgroup_id}`:2==g.course.course_type&&(h=`${g.course_id}-${g.hour_start}-${g.hour_end}`),r.has(h)){const x={...g.client,booking_client:g.booking,degree_sport:this.getClientLevel(g.client.sports,g.course.sport_id)};r.get(h).all_clients.push(x),!this.isSubgroup&&g.id===this.bookingId&&(r.get(h).selected_detail=!0)}else{const x={...g.client,booking_client:g.booking,degree_sport:this.getClientLevel(g.client.sports,g.course.sport_id)},k=this.sports.find(v=>v.id===g.course.sport_id),f=this.degrees.filter(v=>v.sport_id===g.course.sport_id);let p=this.degrees.find(v=>v.id===g.degree_id);p=p||this.degrees[0],r.set(h,{...g,all_clients:[x],selected_detail:!this.isSubgroup&&g.id===this.bookingId,course_sport:k,sport_degrees:f,degree_sport:p,is_subgroup:!1}),this.bookingsCurrent.push(r.get(h))}}}),o.forEach(s=>{if(s.course){var a;const g=this.sports.find(f=>f.id===s.course.sport_id),h=this.degrees.filter(f=>f.sport_id===s.course.sport_id);let x=this.degrees.find(f=>f.id===s.degree_id);x=x||this.degrees[0];const k=2===s.course.course_type?{date_total:0,date_index:0}:{date_total:null!==(a=s.course.course_dates_total)&&void 0!==a?a:s.course.course_dates.length,date_index:this.getPositionDate(s.course.course_dates,s.course_date_id)};if(k.date_index>0){var d,c,_;const f={...s,course_subgroup_id:s.id,course_group_id:null!==(d=null!==(c=s.course_group_id)&&void 0!==c?c:s.group_id)&&void 0!==d?d:null===(_=s.course_group)||void 0===_?void 0:_.id,hour_start:s.course.course_dates[k.date_index-1].hour_start,hour_end:s.course.course_dates[k.date_index-1].hour_end,client:null,client_id:null,all_clients:[],selected_detail:!!this.isSubgroup&&s.id===this.bookingId,course_sport:g,sport_degrees:h,degree_sport:x,is_subgroup:!0};this.bookingsCurrent.push(f)}}}),this.bookingsCurrent.sort((s,a)=>{const d=s.hour_start,c=a.hour_start;return d<c?-1:d>c?1:0}),this.selectedBooking=this.bookingsCurrent.find(s=>!0===s.selected_detail),!this.selectedBooking&&this.bookingsCurrent.length?this.applySelection(this.bookingsCurrent[0]):this.selectedBooking&&this.applySelection(this.selectedBooking),this.spinnerService.hide()}selectBooking(t){this.applySelection(t)}applySelection(t){t&&(t.is_subgroup?(this.bookingId=t.id,this.bookingIdFull="s-"+t.id):(this.bookingId=t.id,this.bookingIdFull=t.id),this.selectedBooking=t,this.selectedCourseDetail=null,this.selectedBooking&&this.selectedBooking.course_id&&this.loadAttendance(this.selectedBooking.course_id))}getClientLevel(t,o){const r=t.find(s=>s.id===o);return r?r.pivot.degree_id:0}formatTimeRange(t,o){const r=s=>s.substring(0,5);return`${r(t)}-${r(o)}`}formatTimeStart(t){return`${r=t,r.substring(0,5)}`;var r}formatTimeEnd(t){return`${r=t,r.substring(0,5)}`;var r}formatDate(t){return m(t).format("DD-MM-YYYY")}getMonitorAssignedDates(){var t,o,r,s,a;if(!this.selectedBooking||!this.selectedBooking.course||1!==this.selectedBooking.course.course_type)return[];const d=Array.isArray(null===(t=this.selectedCourseDetail)||void 0===t?void 0:t.course_dates)?this.selectedCourseDetail.course_dates:Array.isArray(this.selectedBooking.course.course_dates)?this.selectedBooking.course.course_dates:[];var c,_;if(!d.length&&null!==(o=this.selectedBooking)&&void 0!==o&&o.course_date_id)return[{id:this.selectedBooking.course_date_id,date:null!==(c=null===(_=this.selectedBooking)||void 0===_?void 0:_.date)&&void 0!==c?c:this.dateBooking}];const g=null===(r=this.monitorData)||void 0===r?void 0:r.id;if(!g)return d;const h=null===(s=this.selectedBooking)||void 0===s?void 0:s.subgroup_dates_id,x=null===(a=this.selectedBooking)||void 0===a?void 0:a.degree_id,k=d.filter(f=>((null==f?void 0:f.course_groups)||[]).some(v=>((null==v?void 0:v.course_subgroups)||[]).some(C=>(null==C?void 0:C.monitor_id)===g&&(h?(null==C?void 0:C.subgroup_dates_id)===h:!x||(null==C?void 0:C.degree_id)===x))));return k.length?k:d}isSelectedAssignedDate(t){return!(!this.selectedBooking||this.selectedBooking.course_date_id!==(null==t?void 0:t.id))}selectAssignedDate(t){if(!t)return;const o=m(t.date).format("YYYY-MM-DD");if(o===this.dateBooking)return;const r=this.findSubgroupForDate(t);null!=r&&r.id?this.goTo("course-detail",`s-${r.id}`,o):this.toastr.error(this.translate.instant("toast.error_loading_data"))}findSubgroupForDate(t){var o,r;if(null==t||!t.course_groups)return null;const s=[];t.course_groups.forEach(c=>{((null==c?void 0:c.course_subgroups)||[]).forEach(_=>s.push(_))});const a=null===(o=this.selectedBooking)||void 0===o?void 0:o.subgroup_dates_id;if(a)return s.find(c=>(null==c?void 0:c.subgroup_dates_id)===a)||null;const d=null===(r=this.monitorData)||void 0===r?void 0:r.id;return d?s.find(c=>(null==c?void 0:c.monitor_id)===d)||null:s[0]||null}getPositionDate(t,o){const r=t.findIndex(s=>s.id===o);return r>=0?r+1:0}getHoursMinutes(t,o){const r=_=>{const[g,h]=_.split(":").map(Number);return{hours:g,minutes:h}},s=r(t),a=r(o);let d=a.hours-s.hours,c=a.minutes-s.minutes;return c<0&&(d--,c+=60),`${d}h${c}m`}getBirthYears(t){const o=m(t);return m().diff(o,"years")}isGroupSelected(){return!(!this.selectedBooking||!this.selectedBooking.course||1!==this.selectedBooking.course.course_type)}isDateBeforeOrEqualToToday(t){const o=m(t).startOf("day"),r=m().startOf("day");return o.isSameOrBefore(r)}canMarkAttendance(){if(!this.selectedBooking||!this.dateBooking)return!1;const t=m(this.dateBooking).startOf("day"),o=m().startOf("day");return t.isSameOrBefore(o)}loadAttendance(t){this.bookingUserByClient.clear(),this.teachService.getData("teach/courses",t).subscribe({next:o=>{var r,s,a,d;const c=null==o?void 0:o.data;(null==c?void 0:c.id)===t&&(this.selectedCourseDetail=c);const _=Array.isArray(null==c?void 0:c.booking_users)?c.booking_users:[],g=null===(r=this.monitorData)||void 0===r?void 0:r.id,h=this.isGroupSelected(),x=null===(s=this.selectedBooking)||void 0===s?void 0:s.course_date_id,k=null===(a=this.selectedBooking)||void 0===a?void 0:a.hour_start,f=null===(d=this.selectedBooking)||void 0===d?void 0:d.hour_end;_.forEach(p=>{if((null==p?void 0:p.monitor_id)!==g)return;let v=!1;v=h?(null==p?void 0:p.course_date_id)===x:(null==p?void 0:p.date)&&m(p.date).isSame(this.dateBooking,"day")&&(null==p?void 0:p.hour_start)===k&&(null==p?void 0:p.hour_end)===f,v&&null!=p&&p.client_id&&this.bookingUserByClient.set(p.client_id,p)})},error:()=>{}})}isAttended(t){const o=this.bookingUserByClient.get(t);return!!o&&!(!0!==o.attended&&1!==o.attended&&!0!==o.attendance&&1!==o.attendance)}onToggle(t,o,r){r&&(r.stopPropagation(),r.preventDefault());const s=this.bookingUserByClient.get(t);if(!s)return;const a={...s,attended:o,attendance:o};["client","created_at","deleted_at","updated_at"].forEach(d=>{d in a&&delete a[d]}),this.spinnerService.show(),this.teachService.updateData("booking-users",s.id,a).subscribe({next:()=>{this.bookingUserByClient.set(t,{...s,attended:o}),this.spinnerService.hide(),this.toastr.success(this.translate.instant("toast.registered_correctly"))},error:()=>{this.spinnerService.hide(),this.toastr.error(this.translate.instant("toast.error"))}})}goToClientDetail(t){this.goTo("course-detail-level",this.bookingIdFull,this.dateBooking,t.id,this.selectedBooking.course.sport_id)}openCourseTransfer(){var t,o,r,s,a;if(!this.selectedBooking)return void this.toastr.error(this.translate.instant("toast.error_loading_data"));const d=null!==(t=null!==(o=this.selectedBooking.course_group_id)&&void 0!==o?o:this.selectedBooking.group_id)&&void 0!==t?t:null===(r=this.selectedBooking.course_group)||void 0===r?void 0:r.id,c=null!==(s=null!==(a=this.selectedBooking.course_subgroup_id)&&void 0!==a?a:this.selectedBooking.subgroup_id)&&void 0!==s?s:this.selectedBooking.is_subgroup?this.selectedBooking.id:null;d&&c?this.goTo("course-transfer",this.bookingIdFull,this.dateBooking,this.selectedBooking.course_id,this.selectedBooking.hour_start,d,c):this.toastr.error(this.translate.instant("toast.error_loading_data"))}goTo(...t){this.router.navigate(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(M.Ix),e.rXU(M.nX),e.rXU(F.O),e.rXU(R.H),e.rXU($.R),e.rXU(E.tw),e.rXU(G.D),e.rXU(T.c$))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-course-detail"]],decls:14,vars:6,consts:[[1,"content-size","content-background-image","status-bar-overlap"],[1,"background-color-dark","padding-wrapper"],[1,"header-content","mb-12"],["src","assets/icon/arrow-left.svg",1,"cursor-pointer","header-content-icon",3,"click"],[1,"header-top-title"],[1,"montserrat","color-light","header-top-subtitle","capitalize"],[1,"padding-wrapper"],[1,"flex-sections","mb-24"],[3,"ngClass","click",4,"ngFor","ngForOf"],["class","background-color-dark padding-wrapper box-radius",4,"ngIf"],[3,"ngClass","click"],["class","section-bullet",4,"ngIf"],[1,"section-bullet"],[1,"background-color-dark","padding-wrapper","box-radius"],[1,"mb-24","content-flex-top"],["src","assets/icon/course-collective-box.png","class","content-flex-top-img",4,"ngIf"],["src","assets/icon/course-private-box.png","class","content-flex-top-img",4,"ngIf"],[1,"content-flex-top-text"],[1,"content-flex-top-text-flex-b"],[3,"src",4,"ngIf"],[1,"color-light","uppercase"],[4,"ngIf"],["class","montserrat color-light","style","font-size: 12px; margin-top: 4px; opacity: 0.9;",4,"ngIf"],[1,"list-dates-chips","mt-24","mb-24"],["class","cursor-pointer menu-section-content",3,"click",4,"ngIf"],[1,"list-box-selector-b","mt-12","mb-12"],["class","box-selector-type flex-large color-light cursor-pointer",3,"ngStyle",4,"ngIf"],["class","background-grey-translucent box-selector-type flex-normal cursor-pointer",4,"ngIf"],[1,"background-grey-translucent","box-selector-type","flex-normal","cursor-pointer"],["src","assets/icon/icon-user-tick.png"],[1,"montserrat","color-light"],[1,"color-light"],["src","assets/icon/icon-timer.png"],[1,"menu-section-content","mt-24","mb-24"],[1,"menu-section-title"],[1,"menu-section-icons"],["src","assets/icon/icon-user-tick-w.png","class","cursor-pointer",3,"click",4,"ngIf"],["src","assets/icon/icon-transfer.png","class","cursor-pointer",3,"click",4,"ngIf"],["class","montserrat color-light mb-12","style","font-size: 12px; padding: 0 24px; opacity: 0.8;",4,"ngIf"],[1,"member-list"],["class","pb-8 mb-8 member-list-item",4,"ngFor","ngForOf"],["src","assets/icon/course-collective-box.png",1,"content-flex-top-img"],["src","assets/icon/course-private-box.png",1,"content-flex-top-img"],[3,"src"],[1,"montserrat","color-light",2,"font-size","12px","margin-top","4px","opacity","0.9"],["name","ribbon-outline",2,"font-size","14px","vertical-align","middle","margin-right","4px"],["class","background-grey-translucent montserrat chip-date chip-clickable",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"background-grey-translucent","montserrat","chip-date","chip-clickable",3,"ngClass","click"],[4,"ngFor","ngForOf"],["class","background-grey-translucent montserrat chip-date chip-selected",4,"ngIf"],[1,"background-grey-translucent","montserrat","chip-date","chip-selected"],[1,"cursor-pointer","menu-section-content",3,"click"],[1,"menu-section-text"],["src","assets/icon/icons-outline-arrow-right-3-white.svg"],[1,"box-selector-type","flex-large","color-light","cursor-pointer",3,"ngStyle"],["src","assets/icon/icon-award-level-grey.svg"],[1,"montserrat"],["src","assets/icon/icon-calendar-tick.png"],["src","assets/icon/icon-user-tick-w.png",1,"cursor-pointer",3,"click"],["src","assets/icon/icon-transfer.png",1,"cursor-pointer",3,"click"],[1,"montserrat","color-light","mb-12",2,"font-size","12px","padding","0 24px","opacity","0.8"],["name","checkmark-circle-outline",2,"font-size","14px","vertical-align","middle","margin-right","4px"],[1,"pb-8","mb-8","member-list-item"],[3,"allLevels","selectLevel","size","userImage",4,"ngIf"],[1,"member-item-flex"],[1,"member-item-content"],[1,"member-item-title"],[1,"montserrat","member-item-title-icon",2,"cursor","pointer","flex","1",3,"click"],["slot","start","style","margin-left: 8px;",3,"checked","ionChange","click",4,"ngIf"],["src","assets/icon/icons-outline-arrow-right-3-white.svg",2,"cursor","pointer",3,"click"],[1,"member-item-subtitle",2,"cursor","pointer",3,"click"],["class","montserrat uppercase",4,"ngIf"],[3,"allLevels","selectLevel","size","userImage"],["slot","start",2,"margin-left","8px",3,"checked","ionChange","click"],[1,"montserrat","uppercase"],[1,"member-item-bullet"]],template:function(t,o){1&t&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"img",3),e.bIt("click",function(){return o.goTo("calendar")}),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.nI1(7,"translate"),e.k0s()(),e.j41(8,"div",5),e.EFF(9),e.k0s()(),e.j41(10,"div",6)(11,"div",7),e.DNE(12,z,5,4,"div",8),e.k0s(),e.DNE(13,pe,45,29,"div",9),e.k0s()()()),2&t&&(e.R7$(6),e.SpI(" ",e.bMT(7,4,"today")," "),e.R7$(3),e.SpI(" ",o.currentDateFull," "),e.R7$(3),e.Y8G("ngForOf",o.bookingsCurrent),e.R7$(1),e.Y8G("ngIf",o.selectedBooking))},dependencies:[b.YU,b.Sq,b.bT,b.B3,P.eY,P.W9,P.iq,P.hB,S.L,T.D9],styles:['.content-wrapper[_ngcontent-%COMP%]{width:100%;min-height:100%;padding:20px 16px}.content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.header-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:60px}.header-content-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);width:28px}.header-top-title[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:600}.header-top-subtitle[_ngcontent-%COMP%]{font-size:14px;display:block;text-align:center}.opacity-light[_ngcontent-%COMP%]{opacity:.6}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:15px;position:relative;height:58px;font-weight:500;cursor:pointer;line-height:1.5;text-align:center}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}.box-radius[_ngcontent-%COMP%]{border-radius:8px}.content-flex-top-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.content-flex-top-wrapper-icon[_ngcontent-%COMP%]{width:24px}.content-flex-top[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.content-flex-top-img[_ngcontent-%COMP%]{width:44px}.content-flex-top-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.content-flex-top-text-flex-b[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;align-items:center}.content-flex-top-text-flex-b[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;position:relative;top:-1px}.content-flex-top-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:22px;font-weight:600}.content-flex-top-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;font-weight:400}.menu-section-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.menu-section-title[_ngcontent-%COMP%]{font-size:17px;font-weight:500}.menu-section-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;background-color:var(--ion-color-primary);padding:5px 8px;border-radius:40px;font-size:12px;font-weight:500;display:flex;align-items:center;justify-content:center}.menu-section-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.menu-section-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.menu-section-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.menu-section-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.list-box-selector-b[_ngcontent-%COMP%]{width:100%;display:flex;padding:8px 0;gap:12px;justify-content:space-between}.background-grey-translucent[_ngcontent-%COMP%]{background:rgba(65,69,78,.4)}.box-selector-type[_ngcontent-%COMP%]{display:flex;padding:12px 6px;flex-direction:column;gap:8px;align-items:center;border-radius:8px;justify-content:flex-start;text-align:center}.box-selector-type-red[_ngcontent-%COMP%]{color:#faafaf}.box-selector-type[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-selector-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.box-selector-type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.member-list[_ngcontent-%COMP%]{display:flex;gap:8px;flex-direction:column}.member-list-item[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;width:100%;border-bottom:1px solid #444953}.member-item-flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.member-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;width:100%}.member-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.member-item-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px;color:#fff}.member-item-title-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.member-item-title-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px!important}.member-item-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.member-item-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.member-item-subtitle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;display:flex;align-items:center;gap:2px}.member-item-bullet[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:6px;background:#e9484a}.member-item-icon[_ngcontent-%COMP%]{width:20px}.no-border[_ngcontent-%COMP%]{border:none!important}.header-user-data[_ngcontent-%COMP%]{display:flex;width:100%;align-items:flex-start;gap:16px}.header-user-data-img[_ngcontent-%COMP%]{width:60px;min-width:60px;height:60px;position:relative;border-radius:60px}.header-user-data-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.header-user-data-text[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;gap:4px}.header-user-data-text-top[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between}.header-user-data-text-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:11px}.header-user-data-text-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.header-user-data-text-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:17px;color:#fff;font-weight:500}.header-user-data-text-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-user-data-text-subtitle[_ngcontent-%COMP%]{font-size:13px}.header-user-data-text-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-user-data-text-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px}.border-separator[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #444953;height:1px}.flex-title-selector[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.flex-title-selector-interior[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.flex-title-selector-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:40px;display:flex;align-items:center;justify-content:center}.flex-title-selector-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.flex-title-selector-text[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:500}.flex-title-selector-arrow[_ngcontent-%COMP%]{width:24px}.box-top[_ngcontent-%COMP%]{padding:10px 20px;border-bottom:1px solid #43494f;display:flex;width:100%;align-items:center;justify-content:space-between}.box-top-center[_ngcontent-%COMP%]{padding:10px 20px;border-bottom:1px solid #43494f;display:flex;width:100%;align-items:center;justify-content:center}.box-top-left[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}.box-top-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center}.box-top-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.box-top-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.content-button[_ngcontent-%COMP%]{width:100%;height:44px;line-height:44px;display:block;border-radius:44px;color:#000;text-align:center;font-size:14px;font-weight:500;cursor:pointer;transition:all ease-in-out .3s}.box-observations[_ngcontent-%COMP%]{padding:12px 16px}.text-observations[_ngcontent-%COMP%]{font-size:13px}.title-observations[_ngcontent-%COMP%]{font-size:15px;border-top:1px solid #444953}.list-box-selector-users[_ngcontent-%COMP%]{width:100%;overflow-x:auto;white-space:nowrap;display:flex;gap:16px;padding:8px 0;margin-bottom:-16px;justify-content:space-around}.box-selector-user-section[_ngcontent-%COMP%]{display:flex;white-space:normal;width:80px;min-width:80px;max-width:80px;padding:8px;flex-direction:column;gap:12px;align-items:center;border-radius:8px;justify-content:flex-start}.box-selector-user-section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#fff;font-size:14px;line-height:1.3;text-align:center}.box-selector-user-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.flex-large[_ngcontent-%COMP%]{flex:2.5}.flex-normal[_ngcontent-%COMP%]{flex:1}.list-dates-chips[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;gap:6px;flex-wrap:wrap}.chip-date[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:4px 6px;font-size:11px;border-radius:8px}.chip-selected[_ngcontent-%COMP%]{font-weight:600}.chip-clickable[_ngcontent-%COMP%]{cursor:pointer}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.custom-radio-small[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;position:relative;top:-1px}.simple-check-option-small[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer;width:16px;height:16px}.simple-check-option-small[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.custom-check-small[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:16px;height:16px;background:transparent;border:1px solid #c8c8c8;border-radius:6px;display:block;align-items:center;justify-content:center}.custom-check-small[_ngcontent-%COMP%]:before{content:"";width:3px;height:7px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);position:absolute;top:3px;left:6px;display:none}.simple-check-option-small[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check-small[_ngcontent-%COMP%]{background:var(--ion-color-primary);border:none}.simple-check-option-small[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .custom-check-small[_ngcontent-%COMP%]:before{display:block}ion-checkbox[_ngcontent-%COMP%]{--size: 20px;--border-radius: 4px;--background-checked: var(--ion-color-primary);--border-color: #c8c8c8;--border-color-checked: var(--ion-color-primary);--checkmark-color: white;position:relative;z-index:10;margin:0;padding:0}ion-checkbox[_ngcontent-%COMP%]::part(container){border-width:2px}.member-item-title-icon[_ngcontent-%COMP%]{position:relative;z-index:1}.member-item-title-icon[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{z-index:10;pointer-events:auto!important;touch-action:manipulation}']}),l})()}];let _e=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[M.iI.forChild(ue),M.iI]}),l})();var he=u(5553);let fe=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[b.MD,w.YN,P.bv,_e,he.h,T.h]}),l})()},4843:(j,B,u)=>{u.d(B,{_:()=>P});var b=u(9350),w=u(7707);function P(M,y){const O="object"==typeof y;return new Promise((m,D)=>{const I=new w.Ms({next:e=>{m(e),I.unsubscribe()},error:D,complete:()=>{O?m(y.defaultValue):D(new b.G)}});M.subscribe(I)})}}}]);