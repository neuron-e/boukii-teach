"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5018],{5018:(C,u,s)=>{s.r(u),s.d(u,{ScanBookingPageModule:()=>D});var g=s(177),_=s(9417),k=s(8974),d=s(3314),p=s(7586),n=s(6996),b=s(4387),h=s(5794),f=s(8551),r=s(1547),v=s(5473);function m(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"email")),n.R7$(3),n.JRh(null==t.data.client?null:t.data.client.email)}}function R(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13)(5,"a",15),n.EFF(6),n.k0s()()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,3,"mobile")),n.R7$(3),n.Y8G("href","tel:"+(null==t.data.client?null:t.data.client.phone),n.B4B),n.R7$(1),n.JRh(null==t.data.client?null:t.data.client.phone)}}function F(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13)(5,"a",15),n.EFF(6),n.k0s()()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,3,"telephone")),n.R7$(3),n.Y8G("href","tel:"+(null==t.data.client?null:t.data.client.telephone),n.B4B),n.R7$(1),n.JRh(null==t.data.client?null:t.data.client.telephone)}}function $(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"scan_booking.booking_status")),n.R7$(3),n.JRh(t.getBookingStatusLabel())}}function x(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.nI1(6,"translate"),n.nI1(7,"translate"),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"scan_booking.paid")),n.R7$(3),n.JRh(null!=t.data.booking&&t.data.booking.paid?n.bMT(6,4,"yes"):n.bMT(7,6,"no"))}}function M(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"scan_booking.payment_status")),n.R7$(3),n.JRh(t.getPaymentStatusLabel())}}function E(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"scan_booking.meeting_point")),n.R7$(3),n.JRh(null==t.data.meeting_point?null:t.data.meeting_point.name)}}function j(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"scan_booking.address")),n.R7$(3),n.JRh(null==t.data.meeting_point?null:t.data.meeting_point.address)}}function I(a,e){if(1&a&&(n.j41(0,"div",11)(1,"span",12),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"span",13),n.EFF(5),n.k0s()()),2&a){const t=n.XpG(2);n.R7$(2),n.JRh(n.bMT(3,2,"scan_booking.instructions")),n.R7$(3),n.JRh(null==t.data.meeting_point?null:t.data.meeting_point.instructions)}}const P=function(a,e){return{ok:a,warn:e}};function T(a,e){if(1&a&&(n.j41(0,"div",7)(1,"div",8),n.EFF(2),n.nI1(3,"translate"),n.nI1(4,"translate"),n.k0s(),n.j41(5,"div",9)(6,"div",10),n.EFF(7),n.nI1(8,"translate"),n.k0s(),n.j41(9,"div",11)(10,"span",12),n.EFF(11),n.nI1(12,"translate"),n.k0s(),n.j41(13,"span",13),n.EFF(14),n.k0s()(),n.DNE(15,m,6,4,"div",14),n.DNE(16,R,7,5,"div",14),n.DNE(17,F,7,5,"div",14),n.k0s(),n.j41(18,"div",9)(19,"div",10),n.EFF(20),n.nI1(21,"translate"),n.k0s(),n.j41(22,"div",11)(23,"span",12),n.EFF(24),n.nI1(25,"translate"),n.k0s(),n.j41(26,"span",13),n.EFF(27),n.k0s()(),n.DNE(28,$,6,4,"div",14),n.DNE(29,x,8,8,"div",14),n.DNE(30,M,6,4,"div",14),n.k0s(),n.j41(31,"div",9)(32,"div",10),n.EFF(33),n.nI1(34,"translate"),n.k0s(),n.j41(35,"div",11)(36,"span",12),n.EFF(37),n.nI1(38,"translate"),n.k0s(),n.j41(39,"span",13),n.EFF(40),n.k0s()(),n.j41(41,"div",11)(42,"span",12),n.EFF(43),n.nI1(44,"translate"),n.k0s(),n.j41(45,"span",13),n.EFF(46),n.k0s()(),n.j41(47,"div",11)(48,"span",12),n.EFF(49),n.nI1(50,"translate"),n.k0s(),n.j41(51,"span",13),n.EFF(52),n.k0s()(),n.j41(53,"div",11)(54,"span",12),n.EFF(55),n.nI1(56,"translate"),n.k0s(),n.j41(57,"span",13),n.EFF(58),n.k0s()(),n.j41(59,"div",11)(60,"span",12),n.EFF(61),n.nI1(62,"translate"),n.k0s(),n.j41(63,"span",13),n.EFF(64),n.k0s()(),n.j41(65,"div",11)(66,"span",12),n.EFF(67),n.nI1(68,"translate"),n.k0s(),n.j41(69,"span",13),n.EFF(70),n.k0s()(),n.DNE(71,E,6,4,"div",14),n.DNE(72,j,6,4,"div",14),n.DNE(73,I,6,4,"div",14),n.k0s()()),2&a){const t=n.XpG();n.R7$(1),n.Y8G("ngClass",n.l_i(56,P,t.data.is_assigned_to_monitor,!t.data.is_assigned_to_monitor)),n.R7$(1),n.SpI(" ",t.data.is_assigned_to_monitor?n.bMT(3,30,"scan_booking.assigned"):n.bMT(4,32,"scan_booking.not_assigned")," "),n.R7$(5),n.JRh(n.bMT(8,34,"scan_booking.client")),n.R7$(4),n.JRh(n.bMT(12,36,"scan_booking.participant")),n.R7$(3),n.JRh((null==t.data.client?null:t.data.client.full_name)||"NDF"),n.R7$(1),n.Y8G("ngIf",null==t.data.client?null:t.data.client.email),n.R7$(1),n.Y8G("ngIf",null==t.data.client?null:t.data.client.phone),n.R7$(1),n.Y8G("ngIf",null==t.data.client?null:t.data.client.telephone),n.R7$(3),n.JRh(n.bMT(21,38,"scan_booking.booking")),n.R7$(4),n.JRh(n.bMT(25,40,"scan_booking.booking_id")),n.R7$(3),n.JRh((null==t.data.booking?null:t.data.booking.id)||"NDF"),n.R7$(1),n.Y8G("ngIf",null!=(null==t.data.booking?null:t.data.booking.status)),n.R7$(1),n.Y8G("ngIf",null!=(null==t.data.booking?null:t.data.booking.paid)),n.R7$(1),n.Y8G("ngIf",null!=(null==t.data.booking?null:t.data.booking.payment_method_status)),n.R7$(3),n.JRh(n.bMT(34,42,"activity")),n.R7$(4),n.JRh(n.bMT(38,44,"scan_booking.course")),n.R7$(3),n.JRh((null==t.data.course?null:t.data.course.name)||"NDF"),n.R7$(3),n.JRh(n.bMT(44,46,"scan_booking.sport")),n.R7$(3),n.JRh((null==t.data.course||null==t.data.course.sport?null:t.data.course.sport.name)||"NDF"),n.R7$(3),n.JRh(n.bMT(50,48,"scan_booking.degree")),n.R7$(3),n.JRh((null==t.data.degree?null:t.data.degree.name)||"NDF"),n.R7$(3),n.JRh(n.bMT(56,50,"scan_booking.date")),n.R7$(3),n.JRh(t.formatDate(null==t.data.booking_user?null:t.data.booking_user.date)||"NDF"),n.R7$(3),n.JRh(n.bMT(62,52,"scan_booking.time")),n.R7$(3),n.SpI(" ",t.formatTimeRange(null==t.data.booking_user?null:t.data.booking_user.hour_start,null==t.data.booking_user?null:t.data.booking_user.hour_end)," "),n.R7$(3),n.JRh(n.bMT(68,54,"scan_booking.monitor")),n.R7$(3),n.JRh((null==t.data.monitor?null:t.data.monitor.full_name)||"NDF"),n.R7$(1),n.Y8G("ngIf",null==t.data.meeting_point?null:t.data.meeting_point.name),n.R7$(1),n.Y8G("ngIf",null==t.data.meeting_point?null:t.data.meeting_point.address),n.R7$(1),n.Y8G("ngIf",null==t.data.meeting_point?null:t.data.meeting_point.instructions)}}const S=[{path:"",component:(()=>{var a;class e{constructor(o,i,l,c,y,G){this.route=o,this.router=i,this.teachService=l,this.toastr=c,this.spinnerService=y,this.translate=G}ngOnInit(){this.subscription=this.route.params.subscribe(o=>{if(this.token=o.token,!this.token)return this.toastr.error(this.translate.instant("toast.no_client_found")),void this.goTo("home");this.loadBooking()})}loadBooking(){this.spinnerService.show(),this.teachService.getData("teach/scan/booking",null,{token:this.token}).subscribe(o=>{var i;this.data=null!==(i=o.data)&&void 0!==i?i:o,this.spinnerService.hide()},o=>{console.error("Error resolving scan token:",o),this.spinnerService.hide(),this.toastr.error(this.translate.instant("toast.no_client_found")),this.goTo("home")})}formatTimeRange(o,i){return o&&i?`${o.substring(0,5)}-${i.substring(0,5)}`:""}formatDate(o){if(!o)return"";const i=p(o);return i.isValid()?i.format("DD-MM-YYYY"):""}goTo(...o){this.router.navigate(o)}getBookingStatusLabel(){var o,i;const l=null===(o=this.data)||void 0===o||null===(o=o.booking)||void 0===o?void 0:o.status_key;if(l)return this.translate.instant(`scan_booking.status.${l}`);const c=null===(i=this.data)||void 0===i||null===(i=i.booking)||void 0===i?void 0:i.status;return null==c?"":String(c)}getPaymentStatusLabel(){var o;const i=null===(o=this.data)||void 0===o||null===(o=o.booking)||void 0===o?void 0:o.payment_method_status;if(null==i)return"";const l=`scan_booking.payment_status_labels.${i}`,c=this.translate.instant(l);return c!==l?c:String(i)}ngOnDestroy(){var o;null===(o=this.subscription)||void 0===o||o.unsubscribe()}}return(a=e).\u0275fac=function(o){return new(o||a)(n.rXU(d.nX),n.rXU(d.Ix),n.rXU(b.R),n.rXU(h.tw),n.rXU(f.D),n.rXU(r.c$))},a.\u0275cmp=n.VBU({type:a,selectors:[["app-scan-booking"]],decls:10,vars:4,consts:[[1,"scan-booking-content"],[1,"scan-booking"],[1,"scan-booking__header"],[1,"scan-booking__title"],[1,"scan-booking__back",3,"click"],["class","scan-booking__card",4,"ngIf"],["section","scan"],[1,"scan-booking__card"],[1,"scan-booking__status",3,"ngClass"],[1,"scan-booking__section"],[1,"scan-booking__section-title"],[1,"scan-booking__row"],[1,"scan-booking__label"],[1,"scan-booking__value"],["class","scan-booking__row",4,"ngIf"],[1,"scan-booking__link",3,"href"]],template:function(o,i){1&o&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"button",4),n.bIt("click",function(){return i.goTo("home")}),n.EFF(7,"\xd7"),n.k0s()(),n.DNE(8,T,74,59,"div",5),n.k0s(),n.nrm(9,"app-footer",6),n.k0s()),2&o&&(n.R7$(4),n.JRh(n.bMT(5,2,"scan_booking.title")),n.R7$(4),n.Y8G("ngIf",i.data))},dependencies:[g.YU,g.bT,k.W9,v.n,r.D9],styles:[".scan-booking-content[_ngcontent-%COMP%]{--background: #101318}.scan-booking[_ngcontent-%COMP%]{padding:16px;color:#e6e9ef}.scan-booking__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.scan-booking__title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.scan-booking__back[_ngcontent-%COMP%]{border:none;background:transparent;color:#e6e9ef;font-size:22px}.scan-booking__card[_ngcontent-%COMP%]{background:#1a1f27;border-radius:12px;padding:14px;box-shadow:0 8px 24px #0003;display:flex;flex-direction:column;gap:12px}.scan-booking__status[_ngcontent-%COMP%]{padding:6px 10px;border-radius:999px;font-size:12px;width:-moz-fit-content;width:fit-content;margin-bottom:12px}.scan-booking__status.ok[_ngcontent-%COMP%]{background:rgba(46,204,113,.2);color:#2ecc71}.scan-booking__status.warn[_ngcontent-%COMP%]{background:rgba(241,196,15,.2);color:#f1c40f}.scan-booking__section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.scan-booking__section-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#c9d2df;text-transform:uppercase;letter-spacing:.04em;margin-top:4px}.scan-booking__row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;padding:6px 0;border-bottom:1px solid rgba(255,255,255,.06)}.scan-booking__row[_ngcontent-%COMP%]:last-child{border-bottom:none}.scan-booking__label[_ngcontent-%COMP%]{font-size:12px;color:#9aa4b2;flex:0 0 120px}.scan-booking__value[_ngcontent-%COMP%]{font-size:13px;color:#e6e9ef;text-align:right;flex:1;word-break:break-word}.scan-booking__link[_ngcontent-%COMP%]{color:#e6e9ef;text-decoration:none}"]}),e})()}];let J=(()=>{var a;class e{}return(a=e).\u0275fac=function(o){return new(o||a)},a.\u0275mod=n.$C({type:a}),a.\u0275inj=n.G2t({imports:[d.iI.forChild(S),d.iI]}),e})();var B=s(5553);let D=(()=>{var a;class e{}return(a=e).\u0275fac=function(o){return new(o||a)},a.\u0275mod=n.$C({type:a}),a.\u0275inj=n.G2t({imports:[g.MD,_.YN,k.bv,J,B.h,r.h]}),e})()}}]);