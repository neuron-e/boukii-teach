"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6345],{6345:(b,d,a)=>{a.r(d),a.d(d,{MeteoPageModule:()=>E});var l=a(177),f=a(9417),m=a(8974),g=a(3314),s=a(467),u=a(4843),p=a(7586),t=a(6996),h=a(5663),v=a(918),y=a(4387),P=a(5794),k=a(8551),x=a(1547);function O(n,r){if(1&n&&t.nrm(0,"img",17),2&n){const i=t.XpG();t.Y8G("src",i.monitorStation.image,t.B4B)}}function w(n,r){if(1&n&&(t.j41(0,"div",18),t.EFF(1),t.k0s()),2&n){const i=t.XpG();t.R7$(1),t.JRh(i.monitorStation.name)}}function _(n,r){if(1&n&&(t.j41(0,"div",19),t.EFF(1),t.k0s()),2&n){const i=t.XpG();t.R7$(1),t.JRh(i.monitorStation.city)}}function C(n,r){if(1&n&&(t.j41(0,"div",20)(1,"div",21),t.EFF(2),t.k0s(),t.nrm(3,"img",22),t.j41(4,"div",19),t.EFF(5),t.k0s()()),2&n){const i=r.$implicit;t.R7$(2),t.JRh(i.time),t.R7$(1),t.Y8G("src","assets/icon/weather/"+i.icon+".png",t.B4B),t.R7$(2),t.SpI("",i.temperature,"\xba")}}function S(n,r){if(1&n&&(t.j41(0,"div",25)(1,"div",21),t.EFF(2),t.k0s(),t.nrm(3,"img",22),t.j41(4,"div",26)(5,"div",19),t.EFF(6),t.k0s(),t.j41(7,"div",19),t.EFF(8),t.k0s()()()),2&n){const i=r.$implicit,e=t.XpG(2);t.R7$(2),t.JRh(e.weekdays[e.getDayIndex(i.day)]),t.R7$(1),t.Y8G("src","assets/icon/weather/"+i.icon+".png",t.B4B),t.R7$(3),t.SpI("",i.temperature_min,"\xba"),t.R7$(2),t.SpI("",i.temperature_max,"\xba")}}function D(n,r){if(1&n&&(t.j41(0,"div",23),t.DNE(1,S,9,4,"div",24),t.k0s()),2&n){const i=t.XpG();t.R7$(1),t.Y8G("ngForOf",i.meteoWeek)}}const F=[{path:"",component:(()=>{var n;class r{constructor(e,o,c,M,I,j,$){this.router=e,this.monitorDataService=o,this.sharedDataService=c,this.teachService=M,this.toastr=I,this.spinnerService=j,this.translate=$,this.stations=[],this.meteo=[],this.meteoWeek=[],this.translate.onLangChange.subscribe(()=>{this.loadWeekdays()}),this.loadWeekdays()}loadWeekdays(){this.weekdays=[this.translate.instant("days_abbrev.sunday"),this.translate.instant("days_abbrev.monday"),this.translate.instant("days_abbrev.tuesday"),this.translate.instant("days_abbrev.wednesday"),this.translate.instant("days_abbrev.thursday"),this.translate.instant("days_abbrev.friday"),this.translate.instant("days_abbrev.saturday")]}ngOnInit(){var e=this;return(0,s.A)(function*(){e.subscription=e.monitorDataService.getMonitorData().subscribe(function(){var o=(0,s.A)(function*(c){if(c){e.spinnerService.show(),e.monitorData=c;try{e.stations=yield(0,u._)(e.sharedDataService.fetchStations())}catch(M){console.error("Error fetching data:",M),e.toastr.error(e.translate.instant("toast.error_loading_data"))}yield e.getStation(),yield e.getMeteo(),yield e.getMeteoWeek(),e.spinnerService.hide()}});return function(c){return o.apply(this,arguments)}}())})()}getStation(){var e=this;return(0,s.A)(function*(){e.monitorStation=e.stations.find(o=>o.id===e.monitorData.active_station)})()}getMeteo(){var e=this;return(0,s.A)(function*(){try{const o=yield e.teachService.getData("teach/weather",null,{station_id:e.monitorData.active_station}).toPromise();e.meteo=o.data}catch(o){console.error("There was an error!",o)}})()}getMeteoWeek(){var e=this;return(0,s.A)(function*(){try{const o=yield e.teachService.getData("teach/weather/week",null,{station_id:e.monitorData.active_station}).toPromise();e.meteoWeek=o.data}catch(o){console.error("There was an error!",o)}})()}getDayIndex(e){return p(e,"YYYY-MM-DD").day()}goTo(...e){this.router.navigate(e)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(n=r).\u0275fac=function(e){return new(e||n)(t.rXU(g.Ix),t.rXU(h.O),t.rXU(v.H),t.rXU(y.R),t.rXU(P.tw),t.rXU(k.D),t.rXU(x.c$))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-meteo"]],decls:22,vars:11,consts:[[1,"content-size","dark-background"],[1,"content-img-wrapper"],[1,"wrapper-back"],["class","content-img-back",3,"src",4,"ngIf"],[1,"box-icon-left","cursor-pointer",3,"click"],["src","assets/icon/arrow-left.svg"],[1,"content-img-text"],["class","content-img-title",4,"ngIf"],[1,"content-img-text-flex"],["src","assets/icon/icon-location-blue.png"],["class","montserrat",4,"ngIf"],[1,"padding-wrapper"],[1,"montserrat","mb-8","color-light","title-selector-small","uppercase"],[1,"background-color-dark","flex-weather","pt-24"],["class","flex-weather-item pb-24",4,"ngFor","ngForOf"],[1,"montserrat","mt-24","mb-8","color-light","title-selector-small","uppercase"],["class","background-color-dark flex-weather pt-24  pb-24",4,"ngIf"],[1,"content-img-back",3,"src"],[1,"content-img-title"],[1,"montserrat"],[1,"flex-weather-item","pb-24"],[1,"color-light","montserrat"],[3,"src"],[1,"background-color-dark","flex-weather","pt-24","pb-24"],["class","flex-weather-item",4,"ngFor","ngForOf"],[1,"flex-weather-item"],[2,"display","flex","align-items","center","gap","4px"]],template:function(e,o){1&e&&(t.j41(0,"ion-content")(1,"div",0)(2,"div",1),t.nrm(3,"div",2),t.DNE(4,O,1,1,"img",3),t.j41(5,"div",4),t.bIt("click",function(){return o.goTo("home")}),t.nrm(6,"img",5),t.k0s(),t.j41(7,"div",6),t.DNE(8,w,2,1,"div",7),t.j41(9,"div",8),t.nrm(10,"img",9),t.DNE(11,_,2,1,"div",10),t.k0s()()(),t.j41(12,"div",11)(13,"div",12),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"div",13),t.DNE(17,C,6,3,"div",14),t.k0s(),t.j41(18,"div",15),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.DNE(21,D,2,1,"div",16),t.k0s()()()),2&e&&(t.R7$(4),t.Y8G("ngIf",o.monitorStation&&o.monitorStation.image),t.R7$(4),t.Y8G("ngIf",o.monitorStation&&o.monitorStation.name),t.R7$(3),t.Y8G("ngIf",o.monitorStation&&o.monitorStation.city),t.R7$(3),t.SpI(" ",t.bMT(15,7,"today")," "),t.R7$(3),t.Y8G("ngForOf",o.meteo),t.R7$(2),t.SpI(" ",t.bMT(20,9,"next_days")," "),t.R7$(2),t.Y8G("ngIf",o.meteoWeek&&o.meteoWeek.length))},dependencies:[l.Sq,l.bT,m.W9,x.D9],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.dark-background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:var(--ion-back-color-dark)}.content-img-wrapper[_ngcontent-%COMP%]{width:100%;height:calc(200px + env(safe-area-inset-top));position:relative}.content-img-back[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.content-img-text[_ngcontent-%COMP%]{position:absolute;bottom:16px;left:16px;display:flex;flex-direction:column;gap:4px}.content-img-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#fff}.content-img-text-flex[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center}.content-img-text-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.content-img-text-flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#fff}.wrapper-back[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:70%;background:linear-gradient(to top,rgba(0,0,0,.9) 0%,rgba(0,0,0,.4) 70%,transparent 100%);z-index:0}.box-icon-left[_ngcontent-%COMP%]{position:absolute;top:calc(16px + env(safe-area-inset-top));left:16px;width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#2b303b}.box-icon-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.box-icon-right[_ngcontent-%COMP%]{position:absolute;top:calc(16px + env(safe-area-inset-top));right:16px;width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#2b303b}.box-icon-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}.flex-weather[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between;padding:6px 2px;flex-wrap:wrap}.flex-weather-item[_ngcontent-%COMP%]{flex:0 0 16.6666666667%;display:flex;flex-direction:column;gap:4px;justify-content:center;align-items:center}.flex-weather-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.flex-weather-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.title-selector-small[_ngcontent-%COMP%]{font-size:12px}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.uppercase[_ngcontent-%COMP%]{text-transform:uppercase}"]}),r})()}];let R=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[g.iI.forChild(F),g.iI]}),r})(),E=(()=>{var n;class r{}return(n=r).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[l.MD,f.YN,m.bv,R,x.h]}),r})()},4843:(b,d,a)=>{a.d(d,{_:()=>m});var l=a(9350),f=a(7707);function m(g,s){const u="object"==typeof s;return new Promise((p,t)=>{const h=new f.Ms({next:v=>{p(v),h.unsubscribe()},error:t,complete:()=>{u?p(s.defaultValue):t(new l.G)}});g.subscribe(h)})}}}]);