"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7432],{7432:(y,m,i)=>{i.r(m),i.d(m,{ClientsPageModule:()=>U});var l=i(177),g=i(9417),h=i(8974),d=i(3314),u=i(467),C=i(4843),p=i(7586),f=i(9065),x=i(9569),e=i(6996),O=i(4621),S=i(5663),I=i(918),T=i(4387),w=i(5794),j=i(8551),b=i(1547),D=i(7473),F=i(5473);const R=function(n){return{"menu-badge-hidden":n}};function _(n,a){if(1&n&&(e.j41(0,"div",12),e.EFF(1),e.k0s()),2&n){const r=a.ngIf;e.Y8G("ngClass",e.eq3(2,R,r<=0)),e.R7$(1),e.SpI(" ",r>99?"99+":r," ")}}function $(n,a){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const r=e.XpG().$implicit,t=e.XpG();e.R7$(1),e.SpI(" ",t.getLanguageById(r.language1_id)," \xb7 ")}}function E(n,a){if(1&n){const r=e.RV6();e.j41(0,"div",13),e.bIt("click",function(){const s=e.eBV(r).$implicit,c=e.XpG();return e.Njj(c.goTo("client-detail",s.id))}),e.j41(1,"div",14),e.nrm(2,"img",15),e.k0s(),e.j41(3,"div",16)(4,"div",17)(5,"div",18),e.EFF(6),e.k0s()(),e.j41(7,"div",19),e.DNE(8,$,2,1,"ng-container",20),e.EFF(9),e.nI1(10,"translate"),e.k0s()()()}if(2&n){const r=a.$implicit,t=e.XpG();e.R7$(2),e.Y8G("src",r.image?r.image:"assets/icon/icons-outline-default-avatar.svg",e.B4B),e.R7$(4),e.Lme("",r.first_name," ",r.last_name,""),e.R7$(2),e.Y8G("ngIf",r.language1_id),e.R7$(1),e.E5c(" ",t.getCountryById(r.country)," \xb7 ",r.birth_years," ",e.bMT(10,7,"years")," ")}}const z=[{path:"",component:(()=>{var n;class a{constructor(t,o,s,c,v,M,P,k,X){this.router=t,this.menuService=o,this.monitorDataService=s,this.sharedDataService=c,this.teachService=v,this.toastr=M,this.spinnerService=P,this.translate=k,this.notificationService=X,this.searchTerm="",this.showClients=!0,this.showSchools=!1,this.languages=[],this.unreadCount$=this.notificationService.unreadCount$}ngOnInit(){var t=this;return(0,u.A)(function*(){t.subscription=t.monitorDataService.getMonitorData().subscribe(function(){var o=(0,u.A)(function*(s){if(s){t.spinnerService.show(),t.monitorData=s;try{t.languages=yield(0,C._)(t.sharedDataService.fetchLanguages())}catch(c){console.error("Error fetching data:",c),t.toastr.error(t.translate.instant("toast.error_loading_data"))}t.teachService.getData("teach/clients").subscribe(c=>{c.forEach(v=>{const M=p(v.birth_date),P=p().diff(M,"years");v.birth_years=P}),t.clientsMonitor=c,t.filteredClients=c,t.spinnerService.hide()},c=>{t.spinnerService.hide(),console.error("There was an error!",c)})}});return function(s){return o.apply(this,arguments)}}())})()}getLanguageById(t){const o=this.languages.find(s=>s.id===t);return o?o.code.toUpperCase():""}getCountryById(t){const o=f.k.find(s=>s.id===t);return o?o.iso:"Aucun"}getProvinceById(t){const o=x.R.find(s=>s.id===t);return o?o.name:"Aucune"}searchClients(){if(this.searchTerm){const t=this.normalizeString(this.searchTerm);this.filteredClients=this.clientsMonitor.filter(o=>this.normalizeString(o.first_name).includes(t)||this.normalizeString(o.last_name).includes(t))}else this.filteredClients=this.clientsMonitor}normalizeString(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}toggleMenu(){this.menuService.toggleMenu()}goTo(...t){this.router.navigate(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(d.Ix),e.rXU(O.$),e.rXU(S.O),e.rXU(I.H),e.rXU(T.R),e.rXU(w.tw),e.rXU(j.D),e.rXU(b.c$),e.rXU(D.J))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-clients"]],decls:18,vars:11,consts:[[1,"content-size","content-background-image"],[1,"background-color-dark","padding-wrapper","status-bar-overlap-wrapper"],[1,"header-section-content","mb-12"],[1,"header-section-title"],["src","assets/icon/icon-clients-blue.png"],[1,"header-section-menu","header-menu-wrapper","cursor-pointer",3,"click"],["src","assets/icon/icon-menu.png"],["class","menu-badge",3,"ngClass",4,"ngIf"],["type","text",1,"montserrat","mt-12","header-input-search",3,"ngModel","placeholder","ngModelChange","keyup"],[1,"padding-wrapper"],["class","background-color-dark mb-24 box-message cursor-pointer",3,"click",4,"ngFor","ngForOf"],["section","clients"],[1,"menu-badge",3,"ngClass"],[1,"background-color-dark","mb-24","box-message","cursor-pointer",3,"click"],[1,"box-message-img-wrapper"],[1,"box-message-img",3,"src"],[1,"box-message-content"],[1,"box-message-name-flex"],[1,"montserrat","box-message-name"],[1,"montserrat","color-light","box-message-text"],[4,"ngIf"]],template:function(t,o){1&t&&(e.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e.nrm(5,"img",4),e.j41(6,"div"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",5),e.bIt("click",function(){return o.toggleMenu()}),e.nrm(10,"img",6),e.DNE(11,_,2,4,"div",7),e.nI1(12,"async"),e.k0s()(),e.j41(13,"input",8),e.bIt("ngModelChange",function(c){return o.searchTerm=c})("keyup",function(){return o.searchClients()}),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"div",9),e.DNE(16,E,11,9,"div",10),e.k0s()()(),e.nrm(17,"app-footer",11)),2&t&&(e.R7$(7),e.JRh(e.bMT(8,5,"clients")),e.R7$(4),e.Y8G("ngIf",e.bMT(12,7,o.unreadCount$)),e.R7$(2),e.FS9("placeholder",e.bMT(14,9,"search_clients")),e.Y8G("ngModel",o.searchTerm),e.R7$(3),e.Y8G("ngForOf",o.filteredClients))},dependencies:[l.YU,l.Sq,l.bT,g.me,g.BC,g.vS,h.W9,F.n,l.Jj,b.D9],styles:[".content-size[_ngcontent-%COMP%]{width:100%;min-height:100%}.padding-wrapper[_ngcontent-%COMP%]{padding:20px 16px}.header-section-content[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:center}.header-section-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.header-section-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:600}.header-input-search[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px;background:#2b303b;color:#fff;border:none;outline:0;border-radius:40px}.header-section-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);width:22px;display:flex;align-items:center;justify-content:center}.header-section-menu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px}.menu-badge[_ngcontent-%COMP%]{min-width:16px;height:16px;padding:0 4px;border-radius:8px;background:var(--ion-color-primary);color:#fff;font-size:10px;line-height:16px;text-align:center;position:absolute;top:-8px;right:-10px}.menu-badge-hidden[_ngcontent-%COMP%]{display:none}.box-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:16px;border-radius:8px}.box-message-img-wrapper[_ngcontent-%COMP%]{width:44px;min-width:44px;height:44px;border-radius:44px;position:relative;background:#41454e}.box-message-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;border-radius:100%}.box-message-img-none[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:26px}.box-message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;width:100%}.box-message-name-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.box-message-name-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.box-message-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.box-message-number[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:18px;display:flex;align-items:center;justify-content:center;font-size:12px;background:var(--ion-color-primary);color:#fff;font-weight:600}.box-message-text[_ngcontent-%COMP%]{font-size:13px}.box-message-date[_ngcontent-%COMP%]{font-size:11px;width:100%;text-align:right}.filter-floating[_ngcontent-%COMP%]{width:54px;position:fixed;right:12px;bottom:calc(140px + var(--teach-footer-extra-padding, 0px));cursor:pointer}.flex-sections[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:32px}.section-title[_ngcontent-%COMP%]{color:#c8c8c8;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-selected[_ngcontent-%COMP%]{color:#fff;font-size:17px;position:relative;height:38px;font-weight:500;cursor:pointer}.section-bullet[_ngcontent-%COMP%]{background:var(--ion-color-primary);width:8px;height:8px;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translate(-50%)}"]}),a})()}];let B=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.iI.forChild(z),d.iI]}),a})();var G=i(5553);let U=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[l.MD,g.YN,h.bv,B,G.h,b.h]}),a})()},4843:(y,m,i)=>{i.d(m,{_:()=>h});var l=i(9350),g=i(7707);function h(d,u){const C="object"==typeof u;return new Promise((p,f)=>{const x=new g.Ms({next:e=>{p(e),x.unsubscribe()},error:f,complete:()=>{C?p(u.defaultValue):f(new l.G)}});d.subscribe(x)})}}}]);