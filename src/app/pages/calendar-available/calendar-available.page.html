<ion-content>
  <div class="content-size content-background-image">
    
    <div class="background-color-dark padding-wrapper status-bar-overlap-wrapper">

      <div class="header-section-content" [ngClass]="idEditBlock ? 'mb-32' : 'mb-12'">
        <img src="assets/icon/arrow-left.svg" class="cursor-pointer header-content-icon" (click)="goTo('calendar')" />
        <div class="header-section-title">
          <div *ngIf="!idEditBlock">Disponibilité</div>
          <div *ngIf="idEditBlock">Editer Disponibilité</div>
        </div>
        <img src="assets/icon/icon-clock.png" class="header-section-menu" />
      </div>

      <div *ngIf="!idEditBlock" class="mt-24 mb-32 flex-buttons">
        <div [ngClass]="{'btn-back-primary': showMonthAvailable, 'btn-back-grey': !showMonthAvailable}" class="montserrat flex-buttons-button cursor-pointer" (click)="showMonthAvailable=true;showDayAvailable=false;">
          Mois
        </div>
        <div [ngClass]="{'btn-back-primary': showDayAvailable, 'btn-back-grey': !showDayAvailable}" class="montserrat flex-buttons-button cursor-pointer" (click)="showMonthAvailable=false;showDayAvailable=true;">
          Jour
        </div>
      </div>

      <!--MONTHS-->
      <div class="flex-members" *ngIf="showMonthAvailable">
        <div class="box-arrow cursor-pointer" (click)="previousMonth()">
          <img src="assets/icon/arrow-left.svg" />
        </div>

        <div class="montserrat month-title">
          {{ monthNames[currentMonth] }} {{ currentYear }}
        </div>

        <div class="box-arrow cursor-pointer" (click)="nextMonth()">
          <img src="assets/icon/icons-outline-arrow-right-3-white.svg" />
        </div>
      </div>

      <!--DAYS-->
      <ng-container *ngIf="showDayAvailable">
        <!--Calendar closed-->
        <div class="flex-members" *ngIf="!showDayCalendar">
          <div class="box-arrow cursor-pointer" (click)="previousDay()">
            <img src="assets/icon/arrow-left.svg" />
          </div>
        
          <div class="montserrat month-title">
            {{ getWeekdayName(selectedDate) }}, {{ currentDay }} {{ monthNames[currentMonth] }} {{ currentYear }}
          </div>
        
          <div class="box-arrow cursor-pointer" (click)="nextDay()">
            <img src="assets/icon/icons-outline-arrow-right-3-white.svg" />
          </div>
        </div>
        <!--Calendar opened-->
        <div class="flex-members" *ngIf="showDayCalendar">
          <div class="box-arrow cursor-pointer" (click)="previousMonth()">
            <img src="assets/icon/arrow-left.svg" />
          </div>
  
          <div class="montserrat month-title">
            {{ monthNames[currentMonth] }} {{ currentYear }}
          </div>
  
          <div class="box-arrow cursor-pointer" (click)="nextMonth()">
            <img src="assets/icon/icons-outline-arrow-right-3-white.svg" />
          </div>
        </div>
        <!--open/close calendar-->
        <div class="mt-12 flex-select-date cursor-pointer" (click)="showDayCalendar = !showDayCalendar">
          <img src="assets/icon/icons-outline-calendar-1-white.svg" />
          <div class="montserrat" *ngIf="!showDayCalendar">Calendrier ouvert</div>
          <div class="montserrat" *ngIf="showDayCalendar">Fermer le calendrier</div>
        </div>
      </ng-container>

    </div>

    <!--MONTH-->
    <div class="padding-wrapper" *ngIf="showMonthAvailable">

      <div class="mb-24 montserrat align-center">
        Choisissez une plage de dates
      </div>

      <div class="calendar mb-24 background-color-dark">
        <div class="weekdays">
            <span *ngFor="let day of weekdays" class="montserrat">{{ day }}</span>
        </div>
        <div class="days">
            <ng-container *ngFor="let day of days">
                <span *ngIf="day.number !== null" [ngClass]="{'very-light-opacity': day.past}" 
                      class="montserrat day-span-a"
                      (click)="selectDate(day)">
                      <span class="day-span-b cursor-pointer position-relative">
                        <span class="day-on-top">{{ day.number }}</span>
                        <span *ngIf="day.activeSelected" class="active-selected"></span>
                        <span *ngIf="day.activeRange" class="active-range"></span>
                      </span>
                  </span>
                  <span *ngIf="day.number === null" class="montserrat day-span-a">
                    <!--empty days-->
                  </span>
            </ng-container>
        </div>
      </div> 

      <div class="inputs-flex">
        <div>
          <div class="input-label color-light montserrat">
            Date de début
          </div>
          <div class="input-form-icon background-color-dark">
            <img src="assets/icon/icons-outline-calendar-1-white.svg" />
            <input class="montserrat" type="text" disabled="true" [(ngModel)]="firstDateSelectedFormat" />
          </div>
        </div>
        <div>
          <div class="input-label color-light montserrat">
            Date de fin
          </div>
          <div class="input-form-icon background-color-dark">
            <img src="assets/icon/icons-outline-calendar-1-white.svg" />
            <input class="montserrat" type="text" disabled="true" [(ngModel)]="secondDateSelectedFormat" />
          </div>
        </div>
      </div>
      
      <div class="circle-list-item mb-24">
        <div class="custom-radio">
          <label class="simple-check-option">
              <input type="checkbox" [(ngModel)]="allHoursMonth" />
              <div class="custom-check"></div>
          </label>
        </div>
        <div class="montserrat color-light circle-list-item-text">
          Toute la journée
        </div>
      </div>

      <ng-container *ngIf="!allHoursMonth">
        <div class="input-label color-light montserrat mb-24">
          Heure de début
        </div>
        <div class="input-form-icon background-color-dark">
          <select class="montserrat" [(ngModel)]="startTimeMonth" (change)="onStartTimeMonthChange()">
            <option *ngFor="let hour of hoursRange" [value]="hour">{{hour}}</option>
          </select>
        </div>
        
        <div class="input-label color-light montserrat">
          Heure de fin
        </div>
        <div class="input-form-icon background-color-dark">
          <select class="montserrat" [(ngModel)]="endTimeMonth">
            <option *ngFor="let hour of filteredEndHoursMonth" [value]="hour">{{hour}}</option>
          </select>
        </div>
      </ng-container>

      <div class="input-label color-light montserrat mt-24">
        Titre
      </div>
      <div class="input-form-icon background-color-dark">
        <input class="montserrat" type="text" [(ngModel)]="nameBlockMonth" />
      </div>

      <button (click)="saveBlockMonth()" [disabled]="!isButtonMonthEnabled()" class="content-button btn-back-primary montserrat mb-32 mt-32">
        Sauvegarder
      </button>

    </div>

    <!--DAY-->
    <div class="padding-wrapper" *ngIf="showDayAvailable">

      <ng-container *ngIf="showDayCalendar">
        <div class="mb-24 montserrat align-center">
          Choisissez un jour
        </div>

        <div class="calendar mb-24 background-color-dark">
          <div class="weekdays">
              <span *ngFor="let day of weekdays" class="montserrat">{{ day }}</span>
          </div>
          <div class="days">
              <ng-container *ngFor="let day of days">
                  <span [ngClass]="{'very-light-opacity': day.past}" 
                        class="montserrat day-span-a"
                        (click)="selectDay(day)">
                        <span class="day-span-b cursor-pointer position-relative">
                          <span class="day-on-top">{{ day.number }}</span>
                          <span *ngIf="day.today" class="active-today"></span>
                          
                        </span>
                    </span>
              </ng-container>
          </div>
        </div> 
      </ng-container>

      <ng-container *ngIf="!showDayCalendar">

        <div class="circle-list-item mb-24">
          <div class="custom-radio">
            <label class="simple-check-option">
                <input type="checkbox" [(ngModel)]="allHoursDay" />
                <div class="custom-check"></div>
            </label>
          </div>
          <div class="montserrat color-light circle-list-item-text">
            Toute la journée
          </div>
        </div>

        <ng-container *ngIf="!allHoursDay">
          <div class="input-label color-light montserrat mb-24">
            Heure de début
          </div>
          <div class="input-form-icon background-color-dark">
            <select class="montserrat" [(ngModel)]="startTimeDay"(change)="onStartTimeDayChange()">
              <option *ngFor="let hour of hoursRange" [value]="hour">{{hour}}</option>
            </select>
          </div>
          
          <div class="input-label color-light montserrat">
            Heure de fin
          </div>
          <div class="input-form-icon background-color-dark">
            <select class="montserrat" [(ngModel)]="endTimeDay">
              <option *ngFor="let hour of filteredEndHoursDay" [value]="hour">{{hour}}</option>
            </select>
          </div>
        </ng-container>

        <div class="input-label color-light montserrat mt-24">
          Titre
        </div>
        <div class="input-form-icon background-color-dark">
          <input class="montserrat" type="text" [(ngModel)]="nameBlockDay" />
        </div>

        <button (click)="saveBlockDay()" [disabled]="!isButtonDayEnabled()" class="content-button btn-back-primary montserrat mb-32 mt-32">
          Sauvegarder
        </button>

        <button *ngIf="idEditBlock" (click)="deleteBlockDay()" class="content-button reduce-top btn-back-grey montserrat mb-32">
          Éliminer
        </button>
      </ng-container>

    </div>

  </div>
  
</ion-content>
